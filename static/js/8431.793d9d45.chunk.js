"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[8431],{79347:(t,e,n)=>{n.d(e,{e:()=>a});var i,r,o,s={exports:{}};i=s,r=function(){function t(t,n,r){r=r||2;var o,s,a,c,p,u,h,d=n&&n.length,v=d?n[0]*r:t.length,g=e(t,0,v,r,!0),f=[];if(!g||g.next===g.prev)return f;if(d&&(g=l(t,n,g,r)),t.length>80*r){o=a=t[0],s=c=t[1];for(var m=r;m<v;m+=r)(p=t[m])<o&&(o=p),(u=t[m+1])<s&&(s=u),p>a&&(a=p),u>c&&(c=u);h=0!==(h=Math.max(a-o,c-s))?1/h:0}return i(g,f,r,o,s,h),f}function e(t,e,n,i,r){var o,s;if(r===O(t,e,n,i)>0)for(o=e;o<n;o+=i)s=S(o,t[o],t[o+1],s);else for(o=n-i;o>=e;o-=i)s=S(o,t[o],t[o+1],s);if(s&&y(s,s.next)){var a=s.next;M(s),s=a}return s}function n(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!y(i,i.next)&&0!==x(i.prev,i,i.next))i=i.next;else{var r=i.prev;if(M(i),(i=e=r)===i.next)break;n=!0}}while(n||i!==e);return e}function i(t,e,l,c,p,u,h){if(t){!h&&u&&d(t,c,p,u);for(var v,g,f=t;t.prev!==t.next;)if(v=t.prev,g=t.next,u?o(t,c,p,u):r(t))e.push(v.i/l),e.push(t.i/l),e.push(g.i/l),M(t),t=g.next,f=g.next;else if((t=g)===f){h?1===h?i(t=s(n(t),e,l),e,l,c,p,u,2):2===h&&a(t,e,l,c,p,u):i(n(t),e,l,c,p,u,1);break}}}function r(t){var e=t.prev,n=t,i=t.next;if(x(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(f(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&x(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function o(t,e,n,i){var r=t.prev,o=t,s=t.next;if(x(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,p=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,u=v(a,l,e,n,i),h=v(c,p,e,n,i),d=t.prevZ,g=t.nextZ;d&&d.z>=u&&g&&g.z<=h;){if(d!==t.prev&&d!==t.next&&f(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,g!==t.prev&&g!==t.next&&f(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&x(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;d&&d.z>=u;){if(d!==t.prev&&d!==t.next&&f(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;g&&g.z<=h;){if(g!==t.prev&&g!==t.next&&f(r.x,r.y,o.x,o.y,s.x,s.y,g.x,g.y)&&x(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function s(t,e,i){var r=t;do{var o=r.prev,s=r.next.next;!y(o,s)&&_(o,r,r.next,s)&&C(o,s)&&C(s,o)&&(e.push(o.i/i),e.push(r.i/i),e.push(s.i/i),M(r),M(r.next),r=t=s),r=r.next}while(r!==t);return n(r)}function a(t,e,r,o,s,a){var l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&m(l,c)){var p=T(l,c);return l=n(l,l.next),p=n(p,p.next),i(l,e,r,o,s,a),void i(p,e,r,o,s,a)}c=c.next}l=l.next}while(l!==t)}function l(t,i,r,o){var s,a,l,p=[];for(s=0,a=i.length;s<a;s++)(l=e(t,i[s]*o,s<a-1?i[s+1]*o:t.length,o,!1))===l.next&&(l.steiner=!0),p.push(g(l));for(p.sort(c),s=0;s<p.length;s++)r=n(r=u(p[s],r),r.next);return r}function c(t,e){return t.x-e.x}function p(t){if(t.next.prev===t)return t;let e=t;for(;;){const n=e.next;if(n.prev===e||n===e||n===t)break;e=n}return e}function u(t,e){var i=function(t,e){var n,i=e,r=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>s){if(s=a,a===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===s)return n;var l,c=n,p=n.x,u=n.y,d=1/0;i=n;do{r>=i.x&&i.x>=p&&r!==i.x&&f(o<u?r:s,o,p,u,o<u?s:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),C(i,t)&&(l<d||l===d&&(i.x>n.x||i.x===n.x&&h(n,i)))&&(n=i,d=l)),i=i.next}while(i!==c);return n}(t,e);if(!i)return e;var r=T(i,t),o=n(i,i.next);let s=p(r);return n(s,s.next),o=p(o),p(e===i?o:e)}function h(t,e){return x(t.prev,t,e.prev)<0&&x(e.next,t,t.next)<0}function d(t,e,n,i){var r=t;do{null===r.z&&(r.z=v(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,o,s,a,l,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,i=n,a=0,e=0;e<c&&(a++,i=i.nextZ);e++);for(l=c;a>0||l>0&&i;)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(s>1)}(r)}function v(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function g(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function f(t,e,n,i,r,o,s,a){return(r-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(i-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(r-s)*(i-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(C(t,e)&&C(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(x(t.prev,t,e.prev)||x(t,e.prev,e))||y(t,e)&&x(t.prev,t,t.next)>0&&x(e.prev,e,e.next)>0)}function x(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,n,i){var r=w(x(t,e,n)),o=w(x(t,e,i)),s=w(x(n,i,t)),a=w(x(n,i,e));return r!==o&&s!==a||!(0!==r||!b(t,n,e))||!(0!==o||!b(t,i,e))||!(0!==s||!b(n,t,i))||!(0!==a||!b(n,e,i))}function b(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function w(t){return t>0?1:t<0?-1:0}function C(t,e){return x(t.prev,t,t.next)<0?x(t,e,t.next)>=0&&x(t,t.prev,e)>=0:x(t,e,t.prev)<0||x(t,t.next,e)<0}function T(t,e){var n=new P(t.i,t.x,t.y),i=new P(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function S(t,e,n,i){var r=new P(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function M(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,n,i){for(var r=0,o=e,s=n-i;o<n;o+=i)r+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return r}return t.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,s=Math.abs(O(t,0,o,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,p=a<l-1?e[a+1]*n:t.length;s-=Math.abs(O(t,c,p,n))}var u=0;for(a=0;a<i.length;a+=3){var h=i[a]*n,d=i[a+1]*n,v=i[a+2]*n;u+=Math.abs((t[h]-t[v])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[v+1]-t[h+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},t.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var o=0;o<t[r].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[r][o][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n},t},void 0!==(o=r())&&(i.exports=o);const a=s.exports},58935:(t,e,n)=>{n.d(e,{N9:()=>_,Pr:()=>C,SP:()=>y,Se:()=>T,cy:()=>x,i_:()=>b,ym:()=>w});var i=n(92026),r=n(47898),o=n(5163);function s(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return(0,o.VG)(t,(0,r.nn)(e,n).value,n,i,s)}function a(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";return(0,o.LO)(t,(0,r.nn)(e,n).value,n,i,s)}function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.Rd)(t,e.value,e.unit,n,i)}function c(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.mg)(t,e.value,e.unit,n,i)}function p(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.Wv)(t,e.value,e.unit,n,i)}function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.h9)(t,e.value,e.unit,n,i)}function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.ld)(t,e.value,e.unit,n,i)}function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.Ud)(t,e.value,e.unit,n,i)}function v(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.q6)(t,e.value,e.unit,n,i)}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.Zv)(t,e.value,e.unit,n,i)}function f(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.aC)(t,e.value,e.unit,n,i)}function m(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"abbr";return(0,o.yc)(t,e.value,e.unit,n,i)}function x(t,e,n){return(0,o.L4)(t.value,t.unit,t.rotationType,e,n)}function y(t,e,n){return(0,o._o)(t.value,t.unit,t.rotationType,e,n)}function _(t,e,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(r=(0,i.Pt)(r,2),n){case"imperial":return d(t,e,r,o);case"metric":return l(t,e,r,o);default:return s(t,e,n,r,o)}}function b(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return v(t,e,i,r);case"metric":return c(t,e,i,r);default:return a(t,e,n,i,r)}}function w(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return g(t,e,i,r);case"metric":return p(t,e,i,r);default:return s(t,e,n,i,r)}}function C(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return f(t,e,i,r);case"metric":return u(t,e,i,r);default:return a(t,e,n,i,r)}}function T(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"abbr";switch(n){case"imperial":return m(t,e,i,r);case"metric":return h(t,e,i,r);default:return s(t,e,n,i,r)}}},47898:(t,e,n)=>{n.d(e,{Fp:()=>c,GJ:()=>a,ne:()=>s,nn:()=>l,yG:()=>o,yP:()=>p});var i=n(92026),r=n(68860);function o(t,e){return{type:(0,r.UF)(e),value:t,unit:e}}function s(t,e){return{type:(0,r.UF)(e),value:t,unit:e}}function a(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"arithmetic";return{type:(0,r.UF)(e),value:t,unit:e,rotationType:n}}function l(t,e){return function(t,e){return{type:(0,r.UF)(e),value:t,unit:e}}((0,r.En)(t.value,t.unit,e),e)}function c(t,e){return(0,i.Wi)(t)?e:(0,i.Wi)(e)||t.value>(0,r.En)(e.value,e.unit,t.unit)?t:e}const p=o(0,"meters")},69674:(t,e,n)=>{n.d(e,{w:()=>F});var i=n(27366),r=n(91505),o=n(41691),s=n(84652),a=n(92026),l=n(66978),c=n(47898),p=n(94172),u=n(17842),h=n(68860),d=n(49861),v=(n(25243),n(69912)),g=n(70178),f=n(74509),m=n(50951),x=n(78005);class y{constructor(t){let{grabbableForEvent:e}=t;this.events=new r.Z,this.interactive=!0,this.selectable=!1,this.cursor=null,this.grabbable=!0,this.grabbableForEvent=e}intersectionDistance(t,e){return 0}attach(){}detach(){}}var _=n(14813),b=n(74229),w=n(84954),C=n(87268),T=n(52349),S=n(61920),M=n(34019),P=n(80151),O=n(71040),W=n(4943);let Z=class extends W.h{constructor(t){super(t),this.type="draw-point"}};(0,i._)([(0,d.Cb)()],Z.prototype,"type",void 0),(0,i._)([(0,d.Cb)()],Z.prototype,"elevation",void 0),Z=(0,i._)([(0,v.j)("esri.views.interactive.tooltip.DrawPointTooltipInfo")],Z);let V=class extends W.h{constructor(t){super(t),this.type="draw-polyline"}};(0,i._)([(0,d.Cb)()],V.prototype,"type",void 0),(0,i._)([(0,d.Cb)()],V.prototype,"elevation",void 0),(0,i._)([(0,d.Cb)()],V.prototype,"totalLength",void 0),V=(0,i._)([(0,v.j)("esri.views.interactive.tooltip.DrawPolylineTooltipInfo")],V);let I=class extends W.h{constructor(t){super(t),this.type="draw-polygon"}};(0,i._)([(0,d.Cb)()],I.prototype,"type",void 0),(0,i._)([(0,d.Cb)()],I.prototype,"elevation",void 0),(0,i._)([(0,d.Cb)()],I.prototype,"area",void 0),I=(0,i._)([(0,v.j)("esri.views.interactive.tooltip.DrawPolygonTooltipInfo")],I);var k=n(72189),R=n(71353),D=n(21971),L=n(59418),z=n(12611);function G(t,e){const n=(t=>(0,L.Ul)(t,e))(t),i=t.paths[0]?.[t.paths[0]?.length-1]??null,{hasZ:r,spatialReference:o}=t,s=i?(0,R.f)(i[0],i[1],r?i[2]:0):null;return t=>{if((0,a.Wi)(t)||(0,a.Wi)(n)||(0,a.Wi)(s))return n;E[0]=t.x,E[1]=t.y,E[2]=r?t.z:0;const i=((t,n,i)=>(0,L.MU)(t,n,i,e))(s,E,o);return(0,a.Wi)(i)?n:(0,c.yG)(n.value+i.value,n.unit)}}const E=(0,R.c)();let F=class extends(r.Z.EventedMixin(o.r)){constructor(t){super(t),this._createOperationCompleted=!1,this._pointerDownStates=new Set,this._snappingPipeline=new P.n,this._tooltip=null,this._tooltipContext={calculateElevation:null,calculateTotalLength:null,calculateArea:null},this.isDraped=!0,this.labelOptions=new T.Z,this.tooltipOptions=new S.Z,this.snapToSceneEnabled=null,(0,a.Wi)(t.elevationInfo)&&(this.elevationInfo={mode:t.hasZ?"absolute-height":"on-the-ground",offset:0})}initialize(){const{geometryType:t,view:e}=this,{spatialReference:n}=e,i="viewingMode"in e.state?e.state.viewingMode:m.JY.Local,r="segment"===t||"multipoint"===t?"polyline":t;this.coordinateHelper=(0,_.Y6)(this.hasZ,this.hasM,n),this._editGeometryOperations=new C.c(new w.XE(r,this.coordinateHelper)),this._snappingOperation=new O.y({view:e}),this.handles.add((0,p.YP)((()=>this.stagedVertex),((t,e)=>{(0,a.pC)(this._tooltip)&&((0,a.pC)(e)!==(0,a.pC)(t)?this._tooltip.info=this._getTooltipInfo():this._updateTooltipInfo()),(0,a.Wi)(t)||this.emit("cursor-update",{updated:null,vertices:[{componentIndex:0,vertexIndex:this._activeComponent.vertices.length,coordinates:this.coordinateHelper.pointToArray(t)}],operation:"apply",type:"vertex-update"})}),{sync:!0,equals:(t,e)=>(0,a._W)(t,e,g.k)})),this._activeComponent=new w.wA(n,i),this._editGeometryOperations.data.components.push(this._activeComponent);const o=this.segmentLabels;(0,a.pC)(o)&&(o.context={view:e,editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,labelOptions:this.labelOptions},this.handles.add([(0,p.YP)((()=>this.labelOptions.enabled),(t=>{o.visible=t}),p.tX),this.on("cursor-update",(()=>{const t=this.stagedVertex;o.stagedVertex=(0,a.pC)(t)?this.coordinateHelper.pointToVector(t):null}))])),this.handles.add(this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(t=>{const e=t.vertices.map((t=>({componentIndex:0,vertexIndex:t.index,coordinates:this.coordinateHelper.vectorToArray(t.pos)}))),n=e.map((t=>t.coordinates));switch(t.type){case"vertex-add":this.emit(t.type,{...t,added:n,vertices:e});break;case"vertex-update":this.emit(t.type,{...t,updated:n,vertices:e});break;case"vertex-remove":this.emit(t.type,{...t,removed:n,vertices:e})}}))),this._manipulator=new y({grabbableForEvent:t=>"click"!==this.drawingMode||"touch"===t.pointerType&&this._snappingEnabled&&1===this._pointerDownStates.size}),this.manipulators.add(this._manipulator),this._manipulator.grabbable="point"!==t,this.handles.add([this._createManipulatorDragPipeline(this._manipulator),this._manipulator.events.on("immediate-click",(t=>this._onImmediateClick(t))),this._manipulator.events.on("immediate-double-click",(t=>this._onImmediateDoubleClick(t))),(0,p.YP)((()=>this.tooltipOptions.enabled),(t=>{this._tooltip=t?new k.u({view:e,info:this._getTooltipInfo()}):(0,a.SC)(this._tooltip)}),p.nn),this._editGeometryOperations.on(["vertex-add","vertex-update","vertex-remove"],(()=>(0,a.yw)(this._tooltip,(t=>{t.info=this._getTooltipInfo()}))))])}destroy(){(0,a.SC)(this.segmentLabels),(0,a.SC)(this._snappingOperation),this._tooltip=(0,a.SC)(this._tooltip),this._editGeometryOperations=(0,a.SC)(this._editGeometryOperations)}get _snappingEnabled(){return(0,a.pC)(this.snappingManager)&&this.snappingManager.options.effectiveEnabled}get _defaultElevation(){return(0,c.yG)(this.defaultZ,"meters")}get canRedo(){return this._editGeometryOperations.canRedo}get canUndo(){return this._editGeometryOperations.canUndo}get committedVertices(){return this._activeComponent.vertices.map((t=>this.coordinateHelper.vectorToArray(t.pos)))}set drawingMode(t){this._set("drawingMode",t??x.n)}get interactive(){return this._manipulator.interactive}set interactive(t){this._manipulator.interactive=t}get isCompleted(){return this._createOperationCompleted}get numCommittedVertices(){return this._activeComponent.vertices.length}get numVertices(){return(0,a.pC)(this.stagedVertex)?this._activeComponent.vertices.length+1:this._activeComponent.vertices.length}get stagedVertex(){return this._snappingOperation.stagedPoint}set stagedVertex(t){this._snappingOperation.stagedPoint=(0,s.d9)(t)}get updating(){return this.updatingHandles.updating}get vertices(){const t=this.committedVertices;return(0,a.pC)(this.stagedVertex)&&t.push(this.coordinateHelper.pointToArray(this.stagedVertex)),t}get stagedOrLastVertex(){if((0,a.pC)(this.stagedVertex))return this.stagedVertex;const t=this._activeComponent.getLastVertex();return(0,a.Wi)(t)?null:this._editGeometryOperations.data.coordinateHelper.vectorToDehydratedPoint(t.pos)}cancel(){this.complete({aborted:!0})}commitStagedVertex(){if(this._snappingOperation.abort(),(0,a.pC)(this.stagedVertex)){const{stagedVertex:t}=this;this.stagedVertex=null,this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(t))}}complete(t){const e=t&&t.aborted||!1;this._snappingOperation.abort(),(0,a.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),"segment"===this.geometryType||"point"===this.geometryType?this.commitStagedVertex():this.stagedVertex=null;const n="multipoint"===this.geometryType&&0===this.numVertices||"polyline"===this.geometryType&&this.numVertices<2||"polygon"===this.geometryType&&this.numVertices<3;this._createOperationCompleted=!n,(this.isCompleted||e)&&this.emit("complete",{vertices:this.vertices.map(((t,e)=>({componentIndex:0,vertexIndex:e,coordinates:t}))),aborted:e,type:"complete"})}onInputEvent(t){switch(t.type){case"pointer-down":this._pointerDownStates.add(t.pointerId);break;case"pointer-up":this._pointerDownStates.delete(t.pointerId)}switch(t.type){case"pointer-move":return this._onPointerMove(t);case"hold":return this._onHold(t)}}redo(){this._editGeometryOperations.redo()}undo(){(0,a.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),this._editGeometryOperations.undo()}_closeOnClickVertexIndex(t){const e=this._activeComponent;if("polygon"===this.geometryType&&e.vertices.length>2){if(this._vertexWithinPointerDistance(e.vertices[0].pos,t))return 0;if(this._vertexWithinPointerDistance(e.vertices[e.vertices.length-1].pos,t))return e.vertices.length-1}return null}_createManipulatorDragPipeline(t){switch((0,a.Wg)(this.drawingMode)){case"click":return this._createManipulatorDragPipelineClick(t);case"freehand":return this._createManipulatorDragPipelineFreehand(t);case"hybrid":return this._createManipulatorDragPipelineHybrid(t)}}_createManipulatorDragPipelineClick(t){return(0,b.Xd)(t,((t,e,n,i)=>{const r="touch"===i&&this._snappingEnabled;!this.isCompleted&&r&&(e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&(this.stagedVertex=t.mapStart,("segment"===this.geometryType||r&&0===this.numVertices)&&this.commitStagedVertex()),t))).next(this._snappingPipeline.createSnapDragEventPipelineStep({predicate:()=>r,cancel:n,snappingManager:this.snappingManager,snappingContext:new M.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:i,visualizer:this.snappingVisualizer}),updatingHandles:this.updatingHandles}),this._snappingPipeline.next).next((t=>(r&&(this.stagedVertex=t.mapEnd,"end"===t.action&&this.commitStagedVertex()),t))).next((t=>("end"===t.action&&("segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()),t))),n.next((()=>{r&&(0,a.pC)(this.snappingManager)&&this.snappingManager.doneSnapping()})))}))}_createManipulatorDragPipelineFreehand(t){return(0,b.Xd)(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&((0,a.Wi)(this.stagedVertex)&&(this.stagedVertex=t.mapStart),"segment"===this.geometryType&&this.commitStagedVertex()),t))).next((t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":this.complete()}return t}))}))}_createManipulatorDragPipelineHybrid(t){return(0,b.Xd)(t,((t,e)=>{this.isCompleted||e.next(this._screenToMapDragEventStep()).next((t=>("start"===t.action&&((0,a.Wi)(this.stagedVertex)&&(this.stagedVertex=t.mapStart),this.commitStagedVertex()),t))).next((t=>{switch(t.action){case"start":case"update":this.stagedVertex=t.mapEnd,"polygon"!==this.geometryType&&"polyline"!==this.geometryType||this.commitStagedVertex();break;case"end":"segment"!==this.geometryType&&"point"!==this.geometryType||this.complete()}return t}))}))}_getDrawSurface(){if((0,a.Wi)(this.elevationDrawSurface))return this.drawSurface;if(!this.coordinateHelper.hasZ)return this.elevationDrawSurface.defaultZ=null,this.elevationDrawSurface;let t=this.defaultZ,e=!1;(0,a.pC)(this.elevationInfo)&&"absolute-height"===this.elevationInfo.mode&&(e=!0),(0,a.pC)(this.snapToSceneEnabled)&&(e=this.snapToSceneEnabled),(0,a.pC)(this.elevationInfo)&&"on-the-ground"===this.elevationInfo.mode&&(e=!1);const n=this._activeComponent.vertices.length;return("segment"===this.geometryType||"polygon"===this.geometryType)&&n>0&&(t=this.coordinateHelper.getZ(this._activeComponent.vertices[0].pos),e=!1),e?this.drawSurface:(this.elevationDrawSurface.defaultZ=t,this.elevationDrawSurface)}_mapToScreen(t){return this._getDrawSurface().mapToScreen(t)}_onHold(t){this._snappingOperation.abort(),"click"===this.drawingMode&&"touch"===t.pointerType&&this._snappingEnabled&&(this.stagedVertex=t.mapPoint),t.stopPropagation()}_onImmediateClick(t){if("mouse"===t.pointerType&&2===t.button||this._manipulator.dragging)return;const e=this._activeComponent,n=this._closeOnClickVertexIndex(t.screenPoint);if((0,a.pC)(n))return t.stopPropagation(),void this.complete();const i=this._screenToMap(t.screenPoint);if((0,a.pC)(i))switch(this.drawingMode){case"freehand":"point"===this.geometryType&&((0,a.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),this.complete());break;case"click":case"hybrid":this._snappingOperation.abort(),(0,a.pC)(this.stagedVertex)?this.commitStagedVertex():this._editGeometryOperations.appendVertex(this.coordinateHelper.pointToVector(i)),("point"===this.geometryType||"segment"===this.geometryType&&2===e.vertices.length||"segment"===this.geometryType&&"hybrid"===this.drawingMode&&1===e.vertices.length)&&this.complete()}t.stopPropagation()}_onImmediateDoubleClick(t){this._manipulator.dragging||"point"===this.geometryType||(this.complete(),t.stopPropagation())}_onPointerMove(t){const e=(0,u.vW)(t.x,t.y);if(this._manipulator.dragging||this._pointerDownStates.has(t.pointerId)||this._manipulator.grabbing||!this._manipulator.interactive)return void this._snappingOperation.abort();t.stopPropagation();const n=this._closeOnClickVertexIndex(e);if((0,a.pC)(n))return this._closeOnVertex(n),void this._snappingOperation.abort();const i=this._screenToMap(e);if(this._manipulator.cursor=(0,a.pC)(i)?"crosshair":null,(0,a.Wi)(i))return void this._snappingOperation.abort();if((0,a.Wi)(this.snappingManager))return this.stagedVertex=i,void this._snappingOperation.abort();const r=this.snappingManager,o=new M.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:this.elevationInfo,pointer:t.pointerType,visualizer:this.snappingVisualizer});this.updatingHandles.addPromise((0,l.R8)(this._snappingOperation.snap(i,r,o)))}_closeOnVertex(t){this.stagedVertex=null;const e={componentIndex:0,vertexIndex:t,coordinates:this.coordinateHelper.vectorToArray(this._activeComponent.vertices[t].pos)};this.emit("cursor-update",{updated:null,vertices:[e],operation:"apply",type:"vertex-update"})}_screenToMap(t){return this._getDrawSurface().screenToMap(t)}_screenToMapDragEventStep(){let t=null;return e=>{if("start"===e.action&&(t=this._screenToMap(e.screenStart)),(0,a.Wi)(t))return null;const n=this._screenToMap(e.screenEnd);return(0,a.pC)(n)?{...e,mapStart:t,mapEnd:n}:null}}_vertexWithinPointerDistance(t,e){const n=this._mapToScreen(this.coordinateHelper.vectorToDehydratedPoint(t));return!!(0,a.pC)(n)&&function(t,e,n){const i=t.x-e.x,r=t.y-e.y;return i*i+r*r<=n}(n,e,25)}_calculateVertexTooltipElevation(t){const{tooltipOptions:e,view:n}=this;if((0,a.Wi)(t)||"2d"===n.type)return this._defaultElevation;const i=this.elevationInfo,r=e.elevation.mode,{spatialReference:o}=t,s=(0,h._R)(o),l=(0,f.vQ)(n,t,i,{mode:r,offset:0});return(0,c.yG)(l*s,"meters")}_getTooltipInfo(){const{tooltipOptions:t,stagedOrLastVertex:e}=this;if((0,a.Wi)(e))return null;this._tooltipContext.calculateElevation=t=>this._calculateVertexTooltipElevation(t);const n=this._elevationTooltipDetail(e);switch(this.geometryType){case"point":return new Z({tooltipOptions:t,elevation:n});case"polyline":return this._tooltipContext.calculateTotalLength=G(this._editGeometryOperations.data.geometry,this.isDraped?"on-the-ground":"absolute-height"),new V({tooltipOptions:t,elevation:n,totalLength:this._totalLengthTooltipDetail(e)});case"polygon":return this._tooltipContext.calculateArea=function(t,e){const n=(0,z.ln)(),i=t=>(0,D.M)(t,e,n);return e=>{if((0,a.Wi)(e)||t.rings.length<1||t.rings[0].length<2)return i(t);const n=t.clone();return n.rings[0].push([e.x,e.y]),i(n)}}(this._editGeometryOperations.data.geometry,this.isDraped),new I({tooltipOptions:t,elevation:n,area:this._areaTooltipDetail(e)});default:return null}}_elevationTooltipDetail(t){return{mode:this.elevationInfo.mode,...(0,a.Wg)(this._tooltipContext.calculateElevation)(t)}}_totalLengthTooltipDetail(t){return{...(0,a.Pt)((0,a.Wg)(this._tooltipContext.calculateTotalLength)(t),(0,c.yG)(0,"meters"))}}_areaTooltipDetail(t){return{...(0,a.Pt)((0,a.Wg)(this._tooltipContext.calculateArea)(t),(0,c.ne)(0,"square-meters"))}}_updateTooltipInfo(){const t=this._tooltip;if((0,a.Wi)(t))return;const{stagedOrLastVertex:e}=this,n=this._elevationTooltipDetail(e);switch(this.geometryType){case"point":t.info.elevation=n;break;case"polyline":{const i=t.info;i.elevation=n,i.totalLength=this._totalLengthTooltipDetail(e);break}case"polygon":{const i=t.info;i.elevation=n,i.area=this._areaTooltipDetail(e);break}}}get test(){return{tooltip:this._tooltip}}};(0,i._)([(0,d.Cb)()],F.prototype,"_defaultElevation",null),(0,i._)([(0,d.Cb)()],F.prototype,"defaultZ",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"isDraped",void 0),(0,i._)([(0,d.Cb)({value:x.n})],F.prototype,"drawingMode",null),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"elevationDrawSurface",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"elevationInfo",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0,type:T.Z})],F.prototype,"labelOptions",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0,type:S.Z})],F.prototype,"tooltipOptions",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"geometryType",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"hasM",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"hasZ",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"manipulators",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"drawSurface",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"segmentLabels",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"snappingManager",void 0),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"snappingVisualizer",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"snapToSceneEnabled",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"_snappingOperation",void 0),(0,i._)([(0,d.Cb)()],F.prototype,"stagedVertex",null),(0,i._)([(0,d.Cb)()],F.prototype,"updating",null),(0,i._)([(0,d.Cb)({constructOnly:!0})],F.prototype,"view",void 0),F=(0,i._)([(0,v.j)("esri.views.draw.DrawOperation")],F)},78005:(t,e,n)=>{n.d(e,{A:()=>i,n:()=>r});const i=["freehand","hybrid","click"],r="click"},54016:(t,e,n)=>{n.d(e,{aL:()=>a,hP:()=>c,iW:()=>l});var i=n(92026),r=n(17842),o=n(65618),s=n(74509);class a{constructor(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.elevationInfo=t,this.defaultZ=e,this.view=n,this.excludeGraphics=i}screenToMap(t){if((0,i.pC)(this.defaultZ))return this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,r.s1)(t.x,t.y),this.elevationInfo,this.defaultZ,this.excludeGraphics);const e=this.view.sceneIntersectionHelper.intersectElevationFromScreen((0,r.s1)(t.x,t.y),this.elevationInfo,0,this.excludeGraphics);return(0,i.pC)(e)&&(e.z=void 0),e}mapToScreen(t){const e=(0,o.Tx)(t.x,t.y,(0,s.vQ)(this.view,t,this.elevationInfo),t.spatialReference);return this.view.toScreen(e)}}class l{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this.view=t,this.elevationInfo=e,this.exclude=n}screenToMap(t){const e=this.view.toMap(t,{exclude:this.exclude});return(0,i.pC)(e)&&(e.z=(0,s.Ou)(e,this.view,this.elevationInfo)),e}mapToScreen(t){let e=t;return(0,i.pC)(this.elevationInfo)&&(e=(0,o.Tx)(t.x,t.y,(0,s.vQ)(this.view,t,this.elevationInfo),t.spatialReference)),this.view.toScreen(e)}}class c{constructor(t){this.view=t,this.screenToMap=e=>t.toMap(e),this.mapToScreen=e=>t.toScreen(e)}}},3826:(t,e,n)=>{n.d(e,{Gn:()=>m,Q8:()=>d});n(59486);var i=n(92026),r=n(22018),o=n(89494),s=n(48976),a=n(98131),l=n(11186),c=n(71353),p=n(14320),u=n(7882);function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,i.pC)(n)?[t,e,n]:[t,e]}function d(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return(0,i.pC)(n)?{x:t,y:e,z:n}:{x:t,y:e}}class v{constructor(t){this.spatialReference=t}mapToLocalMultiple(t){return(0,i.lV)(t.map((t=>this.mapToLocal(t))))}get doUnnormalization(){return!1}}class g extends v{constructor(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e),this.defaultZ=n,this.transform=(0,o.c)(),this.transformInv=(0,o.c)(),this.transform=(0,o.a)(t),(0,r.b)(this.transformInv,this.transform)}makeMapPoint(t,e){return h(t,e,this.defaultZ)}mapToLocal(t){return d(this.transform[0]*t[0]+this.transform[2]*t[1]+this.transform[4],this.transform[1]*t[0]+this.transform[3]*t[1]+this.transform[5])}localToMap(t){return h(this.transformInv[0]*t.x+this.transformInv[2]*t.y+this.transformInv[4],this.transformInv[1]*t.x+this.transformInv[3]*t.y+this.transformInv[5],this.defaultZ)}}class f extends v{constructor(t,e){super(t.spatialReference),this.view=t,this.defaultZ=null,this.pWS=(0,c.c)(),this.tangentFrameUpWS=(0,c.c)(),this.tangentFrameRightWS=(0,c.c)(),this.tangentFrameForwardWS=(0,c.c)(),this.localFrameRightWS=(0,c.c)(),this.localFrameUpWS=(0,c.c)(),this.worldToLocalTransform=(0,a.a)(),this.localToWorldTransform=(0,a.a)(),this.scale=1,this.scale=t.resolution,this.referenceMapPoint=e,this.defaultZ=e.hasZ?e.z:null;const n=t.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,p.R.X,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,p.R.Y,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,p.R.Z,this.tangentFrameForwardWS);const i=(0,c.c)();(0,l.g)(i,this.tangentFrameForwardWS,(0,l.e)(n,this.tangentFrameForwardWS)),(0,l.b)(this.localFrameRightWS,n,i),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.f)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,s.r)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,s.i)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(t,e){return h(t,e,this.defaultZ)}mapToLocal(t){const e=(0,c.c)();this.view.renderCoordsHelper.toRenderCoords(new u.Z({x:t[0],y:t[1],spatialReference:this.spatialReference}),e),(0,l.q)(e,e,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return(0,i.pC)(n)?d(n.x/this.scale,n.y/this.scale):null}localToMap(t){const e=(0,c.c)();this.view.renderCoordsHelper.toRenderCoords(new u.Z({x:t.x*this.scale,y:t.y*this.scale,spatialReference:this.spatialReference}),e),(0,l.q)(e,e,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(e,this.view.spatialReference);return(0,i.pC)(n)?h(n.x,n.y,this.defaultZ):null}}function m(t,e){if("2d"===t.type)return new g(t.state.transform,t.spatialReference,e.length>2?e[2]:null);if("3d"===t.type){const n=e.length>2?new u.Z({x:e[0],y:e[1],z:e[2],spatialReference:t.spatialReference}):new u.Z({x:e[0],y:e[1],spatialReference:t.spatialReference});return new f(t,n)}return null}},80151:(t,e,n)=>{n.d(e,{n:()=>c});var i=n(92026),r=n(66978),o=n(70178),s=n(74229),a=n(34019),l=n(99912);class c{constructor(){this.next=new s.hM}createSnapDragEventPipelineStep(t){let{predicate:e=(()=>!0),cancel:n,snappingManager:c,snappingContext:p,updatingHandles:u}=t;if((0,i.Wi)(c))return t=>t;let h=null,d=null;const v=()=>{h=(0,i.IM)(h),c.doneSnapping(),(0,i.pC)(d)&&d.frameTask.remove(),d=null};n.next((t=>(v(),t))),this.next=new s.hM;const g=(0,r.Ds)((async(t,e)=>{let{frameTask:n,point:i,context:r,event:s,dx:a,dy:l}=t;const p=await n.schedule((()=>c.snap(i,r,e)),e);if(p.valid){let t=await n.schedule((()=>p.apply()),e);i!==f&&(t=c.update(f,r)),(0,o.k)(t,m)||(s.mapEnd.x=t.x+a,s.mapEnd.y=t.y+l,this.next.execute(s))}}));let f,m;return t=>{if(!e(t))return t;if("start"===t.action){const e="3d"===c.view.type?c.view.resourceController.scheduler.registerTask(l.T8.SNAPPING):l.sq;d={context:new a.N({editGeometryOperations:p.editGeometryOperations,elevationInfo:p.elevationInfo,pointer:p.pointer,vertexHandle:(0,i.pC)(t.info)?t.info.handle:null,excludeFeature:p.excludeFeature,visualizer:p.visualizer}),originalPos:(0,i.pC)(t.snapOrigin)?p.coordinateHelper.vectorToDehydratedPoint(t.snapOrigin):t.mapStart,frameTask:e}}if((0,i.pC)(d)){const e=d.context.coordinateHelper.vectorToDehydratedPoint(d.context.coordinateHelper.arrayToVector([d.originalPos.x,d.originalPos.y,d.originalPos.z]));e.x+=t.mapEnd.x-t.mapStart.x,e.y+=t.mapEnd.y-t.mapStart.y;const n=t.mapStart.x-d.originalPos.x,o=t.mapStart.y-d.originalPos.y,s={...t,action:"update"},a=d.context,l=c.update(e,d.context);if(m=l,t.mapEnd.x=l.x+n,t.mapEnd.y=l.y+o,f=e,"end"!==t.action){const t=d.frameTask;(0,i.pC)(h)||(h=new AbortController),u.addPromise((0,r.R8)(g({frameTask:t,event:s,context:a,point:e,dx:n,dy:o},h.signal)))}}return"end"===t.action&&v(),t}}}},71040:(t,e,n)=>{n.d(e,{y:()=>p});var i=n(27366),r=n(85015),o=n(92026),s=n(66978),a=n(49861),l=(n(63780),n(93169),n(25243),n(69912)),c=n(99912);let p=class extends r.Z{constructor(t){super(t),this.stagedPoint=null,this._abortController=null,this._snap=(0,s.Ds)((async(t,e,n,i)=>{const r=await this._frameTask.schedule((()=>e.snap(t,n,i)),i);r.valid&&await this._frameTask.schedule((()=>{this.stagedPoint=r.apply(),t!==this._snapMapPoint&&(this.stagedPoint=e.update(this._snapMapPoint,n))}),i)}))}initialize(){const t="3d"===this.view.type?this.view?.resourceController?.scheduler:null;this._frameTask=(0,o.pC)(t)?t.registerTask(c.T8.SNAPPING):c.sq}destroy(){this._abortController=(0,o.IM)(this._abortController),this._frameTask=(0,o.hw)(this._frameTask)}async snap(t,e,n){return this.stagedPoint=e.update(t,n),this._snapMapPoint=t,(0,o.Wi)(this._abortController)&&(this._abortController=new AbortController),this._snap(t,e,n,this._abortController.signal)}abort(){this._abortController=(0,o.IM)(this._abortController)}};(0,i._)([(0,a.Cb)({constructOnly:!0})],p.prototype,"view",void 0),(0,i._)([(0,a.Cb)()],p.prototype,"stagedPoint",void 0),p=(0,i._)([(0,l.j)("esri.views.interactive.snapping.SnappingOperation")],p)},4943:(t,e,n)=>{n.d(e,{h:()=>a});var i=n(27366),r=n(85015),o=n(49861),s=(n(63780),n(93169),n(25243),n(69912));let a=class extends r.Z{constructor(t){super(t)}};(0,i._)([(0,o.Cb)()],a.prototype,"tooltipOptions",void 0),a=(0,i._)([(0,s.j)("esri.views.interactive.tooltip.SketchTooltipInfo")],a)},72189:(t,e,n)=>{n.d(e,{u:()=>Y});var i=n(27366),r=n(85015),o=n(92026),s=n(94172),a=n(49861),l=(n(63780),n(93169),n(25243),n(69912));const c="esri-tooltip",p=`${c}-content`;n(32718),n(75366),n(59166);var u=n(58935),h=n(68860),d=n(69407),v=n(80975),g=n(80532),f=n(6291);let m=class extends d.Z{constructor(){super(...arguments),this._messagesUnits=null,this._messagesTooltip=null}get _units(){const t=(0,h.RG)(this.tooltip.view);return{length:t,verticalLength:t,area:t}}_formatScale(t){return(0,f.uf)(t,{style:"percent",maximumFractionDigits:0})}_formatRelativeOrientation(t){return(0,f.uf)(t,{maximumFractionDigits:2,minimumFractionDigits:2,signDisplay:"exceptZero"})}_formatLength(t,e,n){return(0,u.N9)(this._messagesUnits,t,(0,o.Pt)(e,this._units.length),n)}_formatRelativeLength(t){return(0,u.i_)(this._messagesUnits,t,this._units.length)}_formatVerticalLength(t){return(0,u.ym)(this._messagesUnits,t,this._units.verticalLength)}_formatRelativeVerticalLength(t){return(0,u.Pr)(this._messagesUnits,t,this._units.verticalLength)}_formatTotalLength(t){return(0,u.N9)(this._messagesUnits,t,this._units.length)}_formatArea(t){return(0,u.Se)(this._messagesUnits,t,this._units.area)}_formatPercentage(t){return(0,f.uf)(t.value,{style:"percent"})}};(0,i._)([(0,a.Cb)()],m.prototype,"info",void 0),(0,i._)([(0,a.Cb)()],m.prototype,"tooltip",void 0),(0,i._)([(0,a.Cb)()],m.prototype,"_units",null),(0,i._)([(0,g.H)("esri/core/t9n/Units"),(0,a.Cb)()],m.prototype,"_messagesUnits",void 0),(0,i._)([(0,g.H)("esri/views/interactive/tooltip/t9n/Tooltip"),(0,a.Cb)()],m.prototype,"_messagesTooltip",void 0),m=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContent")],m);var x=n(67005);const y=`${c}-field`,_={base:y,title:`${y}__title`,value:`${y}__value`};let b=class extends d.Z{render(){return(0,x.u)("div",{class:_.base},(0,x.u)("div",{class:_.title},this.title),(0,x.u)("div",{class:_.value},this.value))}};(0,i._)([(0,a.Cb)()],b.prototype,"title",void 0),(0,i._)([(0,a.Cb)()],b.prototype,"value",void 0),b=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.support.TooltipField")],b);const w={base:`${p} ${p}--draw-point`};let C=class extends m{render(){const{elevation:t}=this.info,e=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:w.base},(0,x.u)(b,{title:e?.elevation,value:this._formatVerticalLength(t)}))}};C=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],C);const T={base:`${p} ${p}--draw-polygon`};let S=class extends m{render(){const{area:t,elevation:e}=this.info,n=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:T.base},(0,x.u)(b,{title:n?.elevation,value:this._formatVerticalLength(e)}),(0,x.u)(b,{title:n?.area,value:this._formatArea(t)}))}};S=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],S);const M={base:`${p} ${p}--draw-polyline`};let P=class extends m{render(){const{elevation:t,totalLength:e}=this.info,n=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:M.base},(0,x.u)(b,{title:n?.elevation,value:this._formatVerticalLength(t)}),(0,x.u)(b,{title:n?.totalLength,value:this._formatLength(e)}))}};P=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],P);const O={base:`${p} ${p}--extent-rotate`};let W=class extends m{render(){const{angle:t}=this.info,e=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:O.base},(0,x.u)(b,{title:e?.rotation,value:this._formatRelativeOrientation(t)}))}};W=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],W);const Z={base:`${c}-value-by-value`};let V=class extends d.Z{constructor(){super(...arguments),this.divider="\xd7"}render(){return(0,x.u)("div",{class:Z.base},(0,x.u)("span",null,this.left),(0,x.u)("span",null,this.divider),(0,x.u)("span",null,this.right))}};(0,i._)([(0,a.Cb)()],V.prototype,"left",void 0),(0,i._)([(0,a.Cb)()],V.prototype,"divider",void 0),(0,i._)([(0,a.Cb)()],V.prototype,"right",void 0),V=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.support.ValueByValue")],V);const I={base:`${p} ${p}--extent-scale`};let k=class extends m{render(){const{xScale:t,yScale:e,xSize:n,ySize:i}=this.info,r=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:I.base},(0,x.u)(b,{title:r?.size,value:(0,x.u)(V,{left:this._formatLength(n),right:this._formatLength(i)})}),(0,x.u)(b,{title:r?.scale,value:(0,x.u)(V,{left:this._formatScale(t),right:this._formatScale(e)})}))}};k=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],k);const R={base:`${p} ${p}--reshape-edge-offset`};let D=class extends m{render(){const{distance:t}=this.info,e=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:R.base},(0,x.u)(b,{title:e?.distance,value:this._formatRelativeLength(t)}))}};D=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],D);const L={base:`${p} ${p}--reshape-move-graphic`};let z=class extends m{render(){const{distance:t}=this.info,e=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:L.base},(0,x.u)(b,{title:e?.distance,value:this._formatLength(t)}))}};z=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentReshapeMoveGraphic")],z);const G={base:`${p} ${p}--transform-absolute`};let E=class extends m{render(){const{orientation:t,orientationEnabled:e,orientationPrecision:n,rotationType:i,size:r,sizeEnabled:o,sizeUnit:s,sizePrecision:a}=this.info,l=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:G.base},e&&(0,x.u)(b,{title:l?.orientation,value:(0,u.cy)(t,i,n)}),o&&(0,x.u)(b,{title:l?.size,value:this._formatLength(r,s,a)}))}};E=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],E);const F={base:`${p} ${p}--transform-rotate`};let H=class extends m{render(){const{rotation:t,rotationPrecision:e,orientation:n,orientationPrecision:i,rotationType:r}=this.info,o=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:F.base},(0,x.u)(b,{title:o?.rotation,value:(0,u.SP)(t,r,e)}),(0,x.u)(b,{title:o?.orientation,value:(0,u.cy)(n,r,i)}))}};H=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],H);const $={base:`${p} ${p}--transform-scale`};let U=class extends m{render(){const{scale:t,size:e,sizePrecision:n,sizeUnit:i}=this.info,r=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:$.base},(0,x.u)(b,{title:r?.scale,value:this._formatPercentage(t)}),(0,x.u)(b,{title:r?.size,value:this._formatLength(e,i,n)}))}};U=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],U);const j={base:`${p} ${p}--translate-vertex`};let A=class extends m{render(){const{area:t,distance:e,elevation:n,totalLength:i}=this.info,r=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:j.base},(0,x.u)(b,{title:r?.distance,value:this._formatLength(e)}),(0,o.pC)(n)&&(0,x.u)(b,{title:r?.elevation,value:this._formatVerticalLength(n)}),(0,o.pC)(t)&&(0,x.u)(b,{title:r?.area,value:this._formatArea(t)}),(0,o.pC)(i)&&(0,x.u)(b,{title:r?.totalLength,value:this._formatLength(i)}))}};A=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],A);const q={base:`${p} ${p}--extent-move-z`};let N=class extends m{render(){const{distance:t}=this.info,e=this._messagesTooltip?.sketch;return(0,x.u)("div",{class:q.base},(0,x.u)(b,{title:e?.distance,value:this._formatRelativeVerticalLength(t)}))}};N=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],N);const X={base:`${c}`};let Y=class extends r.Z{constructor(t){super(t),this.info=null,this._contentContainer=(()=>{const t=document.createElement("div");return t.classList.add(X.base),t})(),this._contentWidget=null}initialize(){const t=this._contentContainer;this.own([(0,s.YP)((()=>this.view.overlay?.surface),(e=>{t.remove(),(0,o.yw)(e,(e=>e.appendChild(t)))}),s.tX),(0,s.YP)((()=>this.info),((e,n)=>{(0,o.pC)(this._contentWidget)&&(0,o.pC)(e)&&(0,o.pC)(n)&&e.type===n.type?this._contentWidget.info=e:(this._contentWidget=(0,o.SC)(this._contentWidget),(0,o.yw)(function(t,e){if((0,o.Wi)(e))return null;const n=document.createElement("div");switch(e.type){case"draw-point":return new C({tooltip:t,info:e,container:n});case"draw-polygon":return new S({tooltip:t,info:e,container:n});case"draw-polyline":return new P({tooltip:t,info:e,container:n});case"extent-rotate":return new W({tooltip:t,info:e,container:n});case"extent-scale":return new k({tooltip:t,info:e,container:n});case"reshape-edge-offset":return new D({tooltip:t,info:e,container:n});case"transform-absolute":return new E({tooltip:t,info:e,container:n});case"transform-rotate":return new H({tooltip:t,info:e,container:n});case"transform-scale":return new U({tooltip:t,info:e,container:n});case"translate-graphic":return new z({tooltip:t,info:e,container:n});case"translate-vertex":return new A({tooltip:t,info:e,container:n});case"translate-z":return new N({tooltip:t,info:e,container:n})}}(this,e),(e=>{this._contentWidget=e,t.appendChild(e.container)})))}),s.tX),(0,s.YP)((()=>({container:this._contentContainer,contentWidget:this._contentWidget,screenPoint:this.view.inputManager?.latestPointerLocation})),B,s.tX)])}destroy(){this._contentWidget=(0,o.SC)(this._contentWidget),this._contentContainer.remove()}clear(){this.info=null}get test(){return{contentContainer:this._contentContainer}}};function B(t){let{container:e,contentWidget:n,screenPoint:i}=t;const{style:r}=e;if((0,o.pC)(i)&&(0,o.pC)(n)){r.display="block";const t=(0,v.dZ)(e),n=`translate(${Math.round(i.x)+Q[0]*(t?-1:1)}px, ${Math.round(i.y)+Q[1]}px)`;r.transform=t?`translate(-100%, 0) ${n}`:n}else r.display="none"}(0,i._)([(0,a.Cb)({nonNullable:!0})],Y.prototype,"view",void 0),(0,i._)([(0,a.Cb)()],Y.prototype,"info",void 0),(0,i._)([(0,a.Cb)()],Y.prototype,"_contentContainer",void 0),(0,i._)([(0,a.Cb)()],Y.prototype,"_contentWidget",void 0),Y=(0,i._)([(0,l.j)("esri.views.interactive.tooltip.Tooltip")],Y);const Q=[20,20]},21971:(t,e,n)=>{n.d(e,{M:()=>g});var i=n(92026),r=n(12611),o=(n(59486),n(47898)),s=n(2170),a=n(79803),l=n(15559),c=n(47072),p=n(78952);function u(t){const{spatialReference:e}=t;return(0,c.T)(e,h,d,v,t)}function h(t){return(0,o.ne)(Math.abs((0,l.p8)([t],"square-meters")[0]),"square-meters")}function d(t){try{return(0,o.ne)(Math.abs((0,s.geodesicArea)(t,"square-meters")),"square-meters")}catch(e){return null}}function v(t){const e=[];return(0,a.K2)(t,e)?(0,o.ne)(Math.abs((0,l.p8)([{type:"polygon",rings:e,spatialReference:p.Z.WGS84}],"square-meters")[0]),"square-meters"):null}function g(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,r.ln)();if(e){const e=u(t);return(0,i.pC)(e)?e:(0,r.X)(t,n)}return(0,r.oN)(t,n)}},59418:(t,e,n)=>{n.d(e,{GQ:()=>l,MU:()=>a,Ul:()=>s,bZ:()=>c});var i=n(92026),r=n(4914),o=n(13615);function s(t,e){return p(r.qS,o.kQ,r.Sx,e,t)}function a(t,e,n,i){return p(r.FN,o.FB,r.qj,i,t,e,n)}function l(t,e,n){return p(r.xI,o.RT,r.xI,n,t,e)}function c(t,e,n,i){return p(r.qj,o.FB,r.qj,i,t,e,n)}function p(t,e,n,r){for(var o=arguments.length,s=new Array(o>4?o-4:0),a=4;a<o;a++)s[a-4]=arguments[a];if("on-the-ground"===r){const t=e.apply(void 0,s);return(0,i.pC)(t)?t:n.apply(void 0,s)}return t.apply(void 0,s)}},12611:(t,e,n)=>{n.d(e,{X:()=>g,ln:()=>x,oN:()=>v});var i=n(92026),r=n(47898),o=n(68860),s=n(79347),a=n(11186),l=n(71353),c=n(79803),p=n(55652),u=n(74702),h=n(11185),d=n(25003);function v(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{positionsWorldCoords:[]};return f(t,e)}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{positionsWorldCoords:[]};return f(t,e,!1)}function f(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.hasZ;const s=(0,d.m)(t.spatialReference),v=(0,o.oq)(s);if((0,i.Wi)(v))return null;const g=(t,e)=>!(e.length<2)&&((0,a.s)(t,e[0],e[1],n&&e[2]||0),!0);let f=0;for(const i of t.rings){if(i.length<3)continue;const{positionsWorldCoords:n}=e;for(;n.length<i.length;)n.push((0,l.c)());const r=m;for(let e=0;e<3;e++){if(!g(r,i[e]))return null;if(!(0,c.SH)(r,t.spatialReference,n[e],s))return null}if((0,a.k)(n[0],n[1])||(0,a.k)(n[0],n[2])||(0,a.k)(n[1],n[2]))continue;const o=(0,p.zk)(n[0],n[1],n[2],(0,p.re)()),d=(0,a.c)(h.WM.get(),n[0]);for(let t=0;t<3;t++)(0,p.tx)(o,d,n[t],n[t]);for(let e=3;e<i.length;e++){if(!g(r,i[e]))return null;(0,c.SH)(r,t.spatialReference,n[e],s),(0,p.tx)(o,d,n[e],n[e])}const v=y(n);for(let t=0;t<v.length;t+=3)f+=(0,u.wu)(n[v[t]],n[v[t+1]],n[v[t+2]])}return(0,r.ne)(f,v)}const m=(0,l.c)();function x(){return{positionsWorldCoords:[]}}function y(t){return(0,s.e)(function(t){const e=new Float64Array(2*t.length);for(let n=0;n<t.length;++n){const i=t[n],r=2*n;e[r+0]=i[0],e[r+1]=i[1]}return e}(t),[],2)}},4914:(t,e,n)=>{n.d(e,{Cr:()=>y,FN:()=>m,Sx:()=>h,_e:()=>g,g1:()=>f,qS:()=>u,qj:()=>x,xI:()=>v});var i=n(92026),r=n(47898),o=n(68860),s=n(11186),a=n(71353),l=n(79803),c=n(92975),p=n(25003);function u(t){return d(t,"direct")}function h(t){return d(t,"horizontal")}function d(t,e){const{hasZ:n,spatialReference:s}=t,a=(0,p.m)(s);let l=0;const c=(0,o.j5)(a);if((0,i.Wi)(c))return null;const u="direct"===e?m:x;for(const r of t.paths){if(r.length<2)continue;const t=r.length-1;for(let e=0;e<t;++e){const t=r[e];b[0]=t[0],b[1]=t[1],b[2]=n?t[2]:0;const o=r[e+1];w[0]=o[0],w[1]=o[1],w[2]=n?o[2]:0;const a=u(b,w,s);if((0,i.Wi)(a))return null;l+=a.value}}return(0,r.yG)(l,c)}function v(t,e){const{spatialReference:n}=t;return(0,c.fS)(n,e.spatialReference)?(b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,x(b,w,n)):null}function g(t,e){const{spatialReference:n}=t;return(0,c.fS)(n,e.spatialReference)?(b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,w[0]=e.x,w[1]=e.y,w[2]=e.hasZ?e.z:0,y(b,w,n)):null}function f(t){return b[0]=t.x,b[1]=t.y,b[2]=t.hasZ?t.z:0,function(t,e){const n=(0,o.y)(e);return(0,i.pC)(n)?(0,r.yG)(t[2],n):null}(b,t.spatialReference)}function m(t,e,n){const o=_(t,e,n,"direct");return(0,i.pC)(o)?(0,r.yG)(o.direct,o.unit):null}function x(t,e,n){const o=_(t,e,n,"horizontal");return(0,i.pC)(o)?(0,r.yG)(o.horizontal,o.unit):null}function y(t,e,n){const o=_(t,e,n,"vertical");return(0,i.pC)(o)?(0,r.yG)(o.verticalSigned,o.unit):null}function _(t,e,n,r){const a=(0,p.m)(n),c=(0,o.j5)(a);if((0,i.Wi)(c))return null;const u=e[2]-t[2];if("vertical"===r)return{verticalSigned:u,unit:c};if(!(0,l.SH)(t,n,C,a)||!(0,l.SH)(e,n,T,a))return null;if("direct"===r)return{direct:(0,s.i)(T,C),unit:c};if((0,s.s)(S,t[0],t[1],e[2]),!(0,l.SH)(S,n,S,a))return null;const h=(0,s.i)(S,T);return"horizontal"===r?{horizontal:h,unit:c}:{direct:(0,s.i)(T,C),horizontal:h,vertical:Math.abs(u),unit:c}}const b=(0,a.c)(),w=(0,a.c)(),C=(0,a.c)(),T=(0,a.c)(),S=(0,a.c)()},13615:(t,e,n)=>{n.d(e,{FB:()=>h,RT:()=>u,kQ:()=>p});var i=n(47898),r=n(71353),o=n(2170),s=n(79803),a=n(15559),l=n(92975),c=n(47072);function p(t){const{spatialReference:e}=t;return(0,c.T)(e,f,m,x,t)}function u(t,e){if(!(0,l.fS)(t.spatialReference,e.spatialReference))return null;const{spatialReference:n}=t;return _[0]=t.x,_[1]=t.y,_[2]=t.hasZ?t.z:0,b[0]=e.x,b[1]=e.y,b[2]=e.hasZ?e.z:0,h(_,b,n)}function h(t,e,n){return(0,c.T)(n,d,v,g,t,e,n)}function d(t,e,n){return(0,i.yG)((0,a.cA)(y,t,e,n).distance,"meters")}function v(t,e,n){return(0,i.yG)((0,o.geodesicLength)(function(t,e,n){return{type:"polyline",spatialReference:n,paths:[[[...t],[...e]]]}}(t,e,n),"meters"),"meters")}function g(t,e,n){return(0,s.ke)(t,n,w)&&(0,s.ke)(e,n,C)?(0,i.yG)((0,a.cA)(y,w,C).distance,"meters"):null}function f(t){return(0,i.yG)((0,a.Jf)([t],"meters")[0],"meters")}function m(t){return(0,i.yG)((0,o.geodesicLength)(t,"meters"),"meters")}function x(t){const e=[];if(!(0,s.bi)(t,e))return null;let n=0;for(const i of e){let t=0;for(let e=1;e<i.length;++e)t+=(0,a.cA)(y,i[e-1],i[e]).distance;n+=t}return(0,i.yG)(n,"meters")}const y={distance:null},_=(0,r.c)(),b=(0,r.c)(),w=(0,r.c)(),C=(0,r.c)()},47072:(t,e,n)=>{n.d(e,{T:()=>o});var i=n(15559),r=n(92975);function o(t,e,n,o){for(var s=arguments.length,a=new Array(s>4?s-4:0),l=4;l<s;l++)a[l-4]=arguments[l];return(0,r.sT)(t)&&(0,i.Gb)(t)?e.apply(void 0,a):(0,r.sS)(t)?n.apply(void 0,a):o.apply(void 0,a)}},25003:(t,e,n)=>{n.d(e,{m:()=>o});var i=n(79803),r=n(92183);function o(t){const e=(0,r.rS)(t),n=e===r.GG?r.wY:e;return(0,i.Up)(t,n)?n:t}}}]);
//# sourceMappingURL=8431.793d9d45.chunk.js.map