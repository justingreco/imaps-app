/*! For license information please see 5036.6de82512.chunk.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[5036],{45946:(e,t,i)=>{var a=i(51554),s=i(30024),n=i(16435),o=i(66618),r=i(2333),l=i(74938),c=i(87776);const h="icon",p="icon--active",m="icon--custom",d="icon--dot",u="label--single",b="label",f="label--active",g="label--selected",v="title",x=(0,a.GH)(class extends a.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteComboboxItemChange=(0,a.yM)(this,"calciteComboboxItemChange",7),this.disabled=!1,this.selected=!1,this.active=!1,this.guid=(0,n.g)(),this.scale="m",this.itemClickHandler=e=>{e.preventDefault(),this.disabled||(this.selected=!this.selected)}}selectedWatchHandler(){this.calciteComboboxItemChange.emit(this.el)}connectedCallback(){this.ancestors=(0,o.d)(this.el),this.scale=(0,s.g)(this.el,"scale",this.scale),(0,r.c)(this)}disconnectedCallback(){(0,r.d)(this)}componentDidRender(){(0,l.u)(this)}async toggleSelected(e){this.disabled||(this.selected="boolean"===typeof e?e:!this.selected)}renderIcon(e){const{icon:t,disabled:i,selected:s}=this,n=`${h}--indent`,o=i?"circle-disallowed":e?"dot":"check";return e&&!t&&!i?(0,a.h)("span",{class:{[h]:!0,[d]:!0,[n]:!0}}):(0,a.h)("calcite-icon",{class:{[h]:!t,[m]:!!t,[p]:t&&s,[n]:!0},icon:t||o,scale:"s"})}renderChildren(){return(0,s.b)(this.el)?(0,a.h)("ul",{key:"default-slot-container"},(0,a.h)("slot",null)):null}render(){const e="single"===(0,s.g)(this.el,"selection-mode","multi"),t={[b]:!0,[g]:this.selected,[f]:this.active,[u]:e},i=(0,o.e)(this.el);return(0,a.h)(a.AA,{"aria-hidden":"true"},(0,a.h)("div",{class:`container scale--${this.scale}`,style:{"--calcite-combobox-item-spacing-indent-multiplier":`${i}`}},(0,a.h)("li",{class:t,id:this.guid,onClick:this.itemClickHandler},this.renderIcon(e),(0,a.h)("span",{class:v},this.textLabel)),this.renderChildren()))}get el(){return this}static get watchers(){return{selected:["selectedWatchHandler"]}}static get style(){return'@charset "UTF-8";@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}.scale--s{font-size:var(--calcite-font-size--2);line-height:1rem;--calcite-combobox-item-spacing-unit-l:0.5rem;--calcite-combobox-item-spacing-unit-s:0.25rem;--calcite-combobox-item-spacing-indent:0.5rem}.scale--m{font-size:var(--calcite-font-size--1);line-height:1rem;--calcite-combobox-item-spacing-unit-l:0.75rem;--calcite-combobox-item-spacing-unit-s:0.5rem;--calcite-combobox-item-spacing-indent:0.75rem}.scale--l{font-size:var(--calcite-font-size-0);line-height:1.25rem;--calcite-combobox-item-spacing-unit-l:1rem;--calcite-combobox-item-spacing-unit-s:0.75rem;--calcite-combobox-item-spacing-indent:1rem}.container{--calcite-combobox-item-indent-value:calc(\n    var(--calcite-combobox-item-spacing-indent) * var(--calcite-combobox-item-spacing-indent-multiplier)\n  )}:host(:focus){--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;-webkit-box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host,ul{margin:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding:0px;outline:2px solid transparent;outline-offset:2px}.label{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;width:100%;min-width:100%;cursor:pointer;-ms-flex-align:center;align-items:center;color:var(--calcite-ui-text-3);-webkit-text-decoration-line:none;text-decoration-line:none;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;padding:var(--calcite-combobox-item-spacing-unit-s) var(--calcite-combobox-item-spacing-unit-l)}:host([disabled]) .label{cursor:default}.label--selected{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-1)}.label--active{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.label:hover,.label:active{background-color:var(--calcite-ui-foreground-2);color:var(--calcite-ui-text-1);-webkit-text-decoration-line:none;text-decoration-line:none;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;-webkit-box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.title{padding:0 var(--calcite-combobox-item-spacing-unit-l)}.icon{display:-ms-inline-flexbox;display:inline-flex;opacity:0;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);color:var(--calcite-ui-border-1)}.icon--indent{-webkit-padding-start:var(--calcite-combobox-item-indent-value);padding-inline-start:var(--calcite-combobox-item-indent-value)}.icon--custom{margin-top:-1px;color:var(--calcite-ui-text-3)}.icon--active{color:var(--calcite-ui-text-1)}.icon--dot{display:-ms-flexbox;display:flex;-ms-flex-pack:end;justify-content:flex-end;min-width:var(--calcite-combobox-item-spacing-unit-l)}.icon--dot:before{text-align:start;content:"\u2022"}.label--active .icon{opacity:1}.label--selected .icon{opacity:1;color:var(--calcite-ui-brand)}:host(:hover[disabled]) .icon{opacity:1}'}},[1,"calcite-combobox-item",{disabled:[516],selected:[1540],active:[4],ancestors:[1040],guid:[1],icon:[1],textLabel:[513,"text-label"],value:[8],constant:[516],toggleSelected:[64]}]);function y(){if("undefined"===typeof customElements)return;["calcite-combobox-item","calcite-icon"].forEach((e=>{switch(e){case"calcite-combobox-item":customElements.get(e)||customElements.define(e,x);break;case"calcite-icon":customElements.get(e)||(0,c.d)()}}))}y()},78159:(e,t,i)=>{var a=i(51554),s=i(57218),n=i(79497),o=i(39114),r=i(16435),l=i(66618),c=i(69623),h=i(2536),p=i(75743),m=i(74938),d=i(30024),u=i(88305),b=i(87776);var f=s.S?s.S.prototype:void 0,g=f?f.toString:void 0;function v(e){if("string"==typeof e)return e;if((0,n.i)(e))return function(e,t){for(var i=-1,a=null==e?0:e.length,s=Array(a);++i<a;)s[i]=t(e[i],i,e);return s}(e,v)+"";if((0,s.a)(e))return g?g.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}var x=/[\\^$.*+?()[\]{}|]/g,y=RegExp(x.source);function w(e){var t;return(e=null==(t=e)?"":v(t))&&y.test(e)?e.replace(x,"\\$&"):e}const k=(0,a.GH)(class extends a.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteLookupChange=(0,a.yM)(this,"calciteLookupChange",7),this.calciteComboboxChange=(0,a.yM)(this,"calciteComboboxChange",7),this.calciteComboboxFilterChange=(0,a.yM)(this,"calciteComboboxFilterChange",7),this.calciteComboboxChipDismiss=(0,a.yM)(this,"calciteComboboxChipDismiss",7),this.calciteComboboxOpen=(0,a.yM)(this,"calciteComboboxOpen",7),this.calciteComboboxClose=(0,a.yM)(this,"calciteComboboxClose",7),this.active=!1,this.disabled=!1,this.maxItems=0,this.overlayPositioning="absolute",this.required=!1,this.selectionMode="multi",this.scale="m",this.value=null,this.intlRemoveTag=l.T.removeTag,this.internalValueChangeFlag=!1,this.items=[],this.groupItems=[],this.selectedItems=[],this.visibleItems=[],this.activeItemIndex=-1,this.activeChipIndex=-1,this.activeDescendant="",this.text="",this.textInput=null,this.mutationObserver=(0,p.c)("mutation",(()=>this.updateItems())),this.resizeObserver=(0,p.c)("resize",(()=>this.setMaxScrollerHeight())),this.guid=(0,r.g)(),this.inputHeight=0,this.ignoreSelectedEventsFlag=!1,this.activeTransitionProp="opacity",this.setFilteredPlacements=()=>{const{el:e,flipPlacements:t}=this;this.filteredFlipPlacements=t?(0,o.f)(t,e):null},this.getValue=()=>{const e=this.selectedItems.map((e=>{var t;return null===(t=null===e||void 0===e?void 0:e.value)||void 0===t?void 0:t.toString()}));return(null===e||void 0===e?void 0:e.length)?e.length>1?e:e[0]:""},this.onLabelClick=()=>{this.setFocus()},this.keydownHandler=e=>{const{key:t}=e;switch(t){case"Tab":this.activeChipIndex=-1,this.activeItemIndex=-1,this.allowCustomValues&&this.text?(this.addCustomChip(this.text,!0),e.preventDefault()):this.active&&(this.active=!1,e.preventDefault());break;case"ArrowLeft":this.previousChip();break;case"ArrowRight":this.nextChip();break;case"ArrowUp":this.shiftActiveItemIndex(-1),this.comboboxInViewport()||this.el.scrollIntoView();break;case"ArrowDown":this.active||(e.preventDefault(),this.active=!0),this.shiftActiveItemIndex(1),this.comboboxInViewport()||this.el.scrollIntoView();break;case" ":this.textInput.value||(e.preventDefault(),this.active=!0,this.shiftActiveItemIndex(1));break;case"Home":this.active&&e.preventDefault(),this.updateActiveItemIndex(0),this.scrollToActiveItem(),this.comboboxInViewport()||this.el.scrollIntoView();break;case"End":this.active&&e.preventDefault(),this.updateActiveItemIndex(this.visibleItems.length-1),this.scrollToActiveItem(),this.comboboxInViewport()||this.el.scrollIntoView();break;case"Escape":this.active=!1;break;case"Enter":this.activeItemIndex>-1?this.toggleSelection(this.visibleItems[this.activeItemIndex]):this.activeChipIndex>-1?this.removeActiveChip():this.allowCustomValues&&this.text?this.addCustomChip(this.text,!0):e.defaultPrevented||(0,h.s)(this);break;case"Delete":case"Backspace":this.activeChipIndex>-1?this.removeActiveChip():!this.text&&this.isMulti()&&this.removeLastChip()}},this.toggleCloseEnd=()=>{this.active=!1,this.el.removeEventListener("calciteComboboxClose",this.toggleCloseEnd)},this.toggleOpenEnd=()=>{this.active=!0,this.el.removeEventListener("calciteComboboxOpen",this.toggleOpenEnd)},this.transitionEnd=e=>{e.propertyName===this.activeTransitionProp&&(this.active?this.calciteComboboxOpen.emit():this.calciteComboboxClose.emit())},this.setMaxScrollerHeight=()=>{const{active:e,listContainerEl:t}=this;if(!t||!e)return;this.reposition();const i=this.getMaxScrollerHeight();t.style.maxHeight=i>0?`${i}px`:"",this.reposition()},this.calciteChipDismissHandler=(e,t)=>{this.active=!1;const i=this.items.find((e=>e===t));i&&this.toggleSelection(i,!1),this.calciteComboboxChipDismiss.emit(e.detail)},this.clickHandler=e=>{e.composedPath().some((e=>"CALCITE-CHIP"===e.tagName))||(this.active=!this.active,this.updateActiveItemIndex(0),this.setFocus())},this.setInactiveIfNotContained=e=>{const t=e.composedPath();!this.active||t.includes(this.el)||t.includes(this.referenceEl)||(this.allowCustomValues&&this.text.trim().length&&this.addCustomChip(this.text),"single"===this.selectionMode&&(this.textInput&&(this.textInput.value=""),this.text="",this.filterItems(""),this.updateActiveItemIndex(-1)),this.active=!1)},this.setMenuEl=e=>{this.menuEl=e},this.setListContainerEl=e=>{this.resizeObserver.observe(e),this.listContainerEl=e},this.setReferenceEl=e=>{this.referenceEl=e},this.inputHandler=e=>{const t=e.target.value;this.text=t,this.filterItems(t),t&&(this.activeChipIndex=-1)},this.filterItems=(()=>{const e=(e,t)=>e&&t.some((t=>{let{label:i,value:a}=t;return e.tagName===l.c?a===e.label:a===e.textLabel||a===e.value||i===e.textLabel||i===e.value}));return(0,s.d)((t=>{const i=((e,t)=>{const i=w(t),a=new RegExp(i,"i");0===e.length&&console.warn("No data was passed to the filter function.\n    The data argument should be an array of objects");const s=(e,t)=>{var i;if(null===(i=e)||void 0===i?void 0:i.constant)return!0;let a=!1;return(0,n.f)(e,(e=>{"function"!==typeof e&&null!=e&&(Array.isArray(e)||"object"===typeof e&&null!==e?s(e,t)&&(a=!0):t.test(e)&&(a=!0))})),a};return e.filter((e=>s(e,a)))})(this.data,t);this.getCombinedItems().forEach((t=>{const a=!e(t,i);t.hidden=a;const[s,n]=t.ancestors;(e(s,i)||e(n,i))&&(t.hidden=!1),a||t.ancestors.forEach((e=>e.hidden=!1))})),this.visibleItems=this.getVisibleItems(),this.calciteComboboxFilterChange.emit({visibleItems:[...this.visibleItems],text:t})}),100)})(),this.internalCalciteLookupChangeEvent=()=>{this.calciteLookupChange.emit(this.selectedItems)},this.emitCalciteLookupChange=(0,s.d)(this.internalCalciteLookupChangeEvent,0),this.internalComboboxChangeEvent=()=>{const{selectedItems:e}=this;this.calciteComboboxChange.emit({selectedItems:e})},this.emitComboboxChange=(0,s.d)(this.internalComboboxChangeEvent,0),this.updateItems=()=>{this.items=this.getItems(),this.groupItems=this.getGroupItems(),this.data=this.getData(),this.selectedItems=this.getSelectedItems(),this.visibleItems=this.getVisibleItems(),this.needsIcon=this.getNeedsIcon(),this.allowCustomValues||this.setMaxScrollerHeight()},this.scrollToActiveItem=()=>{const e=this.visibleItems[this.activeItemIndex],t=this.calculateSingleItemHeight(e),{offsetHeight:i,scrollTop:a}=this.listContainerEl;i+a<e.offsetTop+t?this.listContainerEl.scrollTop=e.offsetTop-i+t:e.offsetTop<a&&(this.listContainerEl.scrollTop=e.offsetTop)},this.comboboxFocusHandler=()=>{var e;null===(e=this.textInput)||void 0===e||e.focus()},this.comboboxBlurHandler=e=>{this.setInactiveIfNotContained(e)}}activeHandler(){this.disabled?this.active=!1:this.reposition()}handleDisabledChange(e){e||(this.active=!1)}maxItemsHandler(){this.setMaxScrollerHeight()}valueHandler(e){if(!this.internalValueChangeFlag){const t=this.getItems();Array.isArray(e)?t.forEach((t=>t.selected=e.includes(t.value))):e?t.forEach((t=>t.selected=e===t.value)):t.forEach((e=>e.selected=!1)),this.updateItems()}}flipPlacementsHandler(){this.setFilteredPlacements()}documentClickHandler(e){this.setInactiveIfNotContained(e)}calciteComboboxItemChangeHandler(e){if(this.ignoreSelectedEventsFlag)return;const t=e.target,i=this.visibleItems.indexOf(t);this.updateActiveItemIndex(i),this.toggleSelection(t,t.selected)}async reposition(){const{popper:e,menuEl:t}=this,i=this.getModifiers();e?await(0,o.u)({el:t,modifiers:i,placement:o.a,popper:e}):this.createPopper()}async setFocus(){var e;null===(e=this.textInput)||void 0===e||e.focus(),this.activeChipIndex=-1,this.activeItemIndex=-1}connectedCallback(){var e;this.internalValueChangeFlag=!0,this.value=this.getValue(),this.internalValueChangeFlag=!1,null===(e=this.mutationObserver)||void 0===e||e.observe(this.el,{childList:!0,subtree:!0}),this.createPopper(),(0,c.c)(this),(0,h.c)(this),this.setFilteredPlacements()}componentWillLoad(){this.updateItems()}componentDidLoad(){(0,h.a)(this,this.getValue())}componentDidRender(){this.el.offsetHeight!==this.inputHeight&&(this.reposition(),this.inputHeight=this.el.offsetHeight),(0,m.u)(this)}disconnectedCallback(){var e,t;null===(e=this.mutationObserver)||void 0===e||e.disconnect(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),this.destroyPopper(),(0,c.d)(this),(0,h.d)(this)}selectedItemsHandler(){this.internalValueChangeFlag=!0,this.value=this.getValue(),this.internalValueChangeFlag=!1}textHandler(){this.updateActiveItemIndex(-1)}comboboxInViewport(){const e=this.el.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)}getModifiers(){const e={name:"flip",enabled:!0};e.options={fallbackPlacements:this.filteredFlipPlacements||o.p};return[e,{name:"eventListeners",enabled:this.active}]}createPopper(){this.destroyPopper();const{menuEl:e,referenceEl:t,overlayPositioning:i}=this,a=this.getModifiers();this.popper=(0,o.c)({el:e,modifiers:a,overlayPositioning:i,placement:o.a,referenceEl:t})}destroyPopper(){const{popper:e}=this;e&&e.destroy(),this.popper=null}getMaxScrollerHeight(){const e=this.getCombinedItems().filter((e=>!e.hidden)),{maxItems:t}=this;let i=0,a=0;return e.length>t&&e.forEach((e=>{if(i<t&&t>0){const t=this.calculateSingleItemHeight(e);t>0&&(a+=t,i++)}})),a}calculateSingleItemHeight(e){let t=e.offsetHeight;return Array.from(e.querySelectorAll(l.C)).map((e=>null===e||void 0===e?void 0:e.offsetHeight)).forEach((e=>{t-=e})),t}getCombinedItems(){return[...this.groupItems,...this.items]}toggleSelection(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!e.selected;e&&(this.isMulti()?(e.selected=t,this.updateAncestors(e),this.selectedItems=this.getSelectedItems(),this.emitCalciteLookupChange(),this.emitComboboxChange(),this.resetText(),this.filterItems("")):(this.ignoreSelectedEventsFlag=!0,this.items.forEach((i=>i.selected=i===e&&t)),this.ignoreSelectedEventsFlag=!1,this.selectedItems=this.getSelectedItems(),this.emitComboboxChange(),this.textInput&&(this.textInput.value=e.textLabel),this.active=!1,this.updateActiveItemIndex(-1),this.resetText(),this.filterItems("")))}updateAncestors(e){if("ancestors"!==this.selectionMode)return;const t=(0,l.g)(e),i=(0,l.a)(e);e.selected?t.forEach((e=>{e.selected=!0})):(i.forEach((e=>e.selected=!1)),[...t].forEach((e=>{(0,l.h)(e)||(e.selected=!1)})))}getVisibleItems(){return this.items.filter((e=>!e.hidden))}getSelectedItems(){if(!this.isMulti()){const e=this.items.find((e=>{let{selected:t}=e;return t}));return e?[e]:[]}return this.items.filter((e=>e.selected&&("ancestors"!==this.selectionMode||!(0,l.h)(e)))).sort(((e,t)=>{const i=this.selectedItems.indexOf(e),a=this.selectedItems.indexOf(t);return i>-1&&a>-1?i-a:a-i}))}getData(){return this.items.map((e=>({constant:e.constant,value:e.value,label:e.textLabel})))}getNeedsIcon(){return"single"===this.selectionMode&&this.items.some((e=>e.icon))}resetText(){this.textInput&&(this.textInput.value=""),this.text=""}getItems(){return Array.from(this.el.querySelectorAll(l.b)).filter((e=>!e.disabled))}getGroupItems(){return Array.from(this.el.querySelectorAll(l.c))}addCustomChip(e,t){const i=this.items.find((t=>t.textLabel===e));if(i)this.toggleSelection(i,!0);else{this.isMulti()||this.toggleSelection(this.selectedItems[this.selectedItems.length-1],!1);const i=document.createElement(l.b);i.value=e,i.textLabel=e,i.selected=!0,this.el.appendChild(i),this.resetText(),t&&this.setFocus(),this.updateItems(),this.filterItems(""),this.emitCalciteLookupChange(),this.emitComboboxChange()}}removeActiveChip(){this.toggleSelection(this.selectedItems[this.activeChipIndex],!1),this.setFocus()}removeLastChip(){this.toggleSelection(this.selectedItems[this.selectedItems.length-1],!1),this.setFocus()}previousChip(){if(this.text)return;const e=this.selectedItems.length-1,t=this.activeChipIndex;this.activeChipIndex=-1===t?e:Math.max(t-1,0),this.updateActiveItemIndex(-1),this.focusChip()}nextChip(){if(this.text||-1===this.activeChipIndex)return;const e=this.selectedItems.length-1,t=this.activeChipIndex+1;t>e?(this.activeChipIndex=-1,this.setFocus()):(this.activeChipIndex=t,this.focusChip()),this.updateActiveItemIndex(-1)}focusChip(){var e;const t=null===(e=this.selectedItems[this.activeChipIndex])||void 0===e?void 0:e.guid,i=t?this.referenceEl.querySelector(`#combobox-chip-${t}`):null;null===i||void 0===i||i.setFocus()}shiftActiveItemIndex(e){const{length:t}=this.visibleItems,i=(this.activeItemIndex+t+e)%t;this.updateActiveItemIndex(i),this.scrollToActiveItem()}updateActiveItemIndex(e){var t;this.activeItemIndex=e;let i=null;this.visibleItems.forEach(((t,a)=>{a===e?(t.active=!0,i=t.guid):t.active=!1})),this.activeDescendant=i,this.activeItemIndex>-1&&(this.activeChipIndex=-1,null===(t=this.textInput)||void 0===t||t.focus())}isMulti(){return"single"!==this.selectionMode}renderChips(){const{activeChipIndex:e,scale:t,selectionMode:i,intlRemoveTag:s}=this;return this.selectedItems.map(((n,o)=>{const r={chip:!0,"chip--active":e===o},c=[...[...(0,l.g)(n)].reverse(),n].map((e=>e.textLabel)),h="ancestors"!==i?n.textLabel:c.join(" / ");return(0,a.h)("calcite-chip",{class:r,dismissLabel:s,dismissible:!0,icon:n.icon,id:n.guid?`combobox-chip-${n.guid}`:null,key:n.textLabel,onCalciteChipDismiss:e=>this.calciteChipDismissHandler(e,n),scale:t,title:h,value:n.value},h)}))}renderInput(){const{guid:e,active:t,disabled:i,placeholder:s,selectionMode:n,needsIcon:o,selectedItems:r}=this,l="single"===n,h=r[0],p=!t&&l&&!!h;return(0,a.h)("span",{class:{"input-wrap":!0,"input-wrap--single":l}},p&&(0,a.h)("span",{class:{label:!0,"label--spaced":o},key:"label"},h.textLabel),(0,a.h)("input",{"aria-activedescendant":this.activeDescendant,"aria-autocomplete":"list","aria-controls":`combobox-listbox-${e}`,"aria-label":(0,c.g)(this),class:{input:!0,"input--single":!0,"input--transparent":this.activeChipIndex>-1,"input--hidden":p,"input--icon":l&&o},disabled:i,id:`combobox-input-${e}`,key:"input",onBlur:this.comboboxBlurHandler,onFocus:this.comboboxFocusHandler,onInput:this.inputHandler,placeholder:s,ref:e=>this.textInput=e,type:"text"}))}renderListBoxOptions(){return this.visibleItems.map((e=>(0,a.h)("li",{"aria-selected":(0,d.t)(e.selected),id:e.guid?`combobox-item-${e.guid}`:null,role:"option",tabindex:"-1"},e.textLabel)))}renderPopperContainer(){const{active:e,setMenuEl:t,setListContainerEl:i}=this,s={"list-container":!0,[o.C.animation]:!0,[o.C.animationActive]:e};return(0,a.h)("div",{"aria-hidden":"true",class:{"popper-container":!0,"popper-container--active":e},ref:t},(0,a.h)("div",{class:s,onTransitionEnd:this.transitionEnd,ref:i},(0,a.h)("ul",{class:{list:!0,"list--hide":!e}},(0,a.h)("slot",null))))}renderIconStart(){const{selectionMode:e,needsIcon:t,selectedItems:i}=this,s=i[0];return"single"===e&&t&&(0,a.h)("span",{class:"icon-start"},(null===s||void 0===s?void 0:s.icon)&&(0,a.h)("calcite-icon",{class:"selected-icon",icon:s.icon,scale:"s"}))}renderIconEnd(){const{active:e}=this;return(0,a.h)("span",{class:"icon-end"},(0,a.h)("calcite-icon",{icon:e?"chevron-up":"chevron-down",scale:"s"}))}render(){const{active:e,guid:t,label:i}=this,s="single"===this.selectionMode;return(0,a.h)(a.AA,{onKeyDown:this.keydownHandler},(0,a.h)("div",{"aria-autocomplete":"list","aria-expanded":(0,d.t)(e),"aria-haspopup":"listbox","aria-labelledby":`combobox-label-${t}`,"aria-owns":`combobox-listbox-${t}`,class:{wrapper:!0,"wrapper--single":s||!this.selectedItems.length,"wrapper--active":e},onClick:this.clickHandler,ref:this.setReferenceEl,role:"combobox"},(0,a.h)("div",{class:"grid-input"},this.renderIconStart(),!s&&this.renderChips(),(0,a.h)("label",{class:"screen-readers-only",htmlFor:`combobox-input-${t}`,id:`combobox-label-${t}`},i),this.renderInput()),this.renderIconEnd()),(0,a.h)("ul",{"aria-labelledby":`combobox-label-${t}`,"aria-multiselectable":"true",class:"screen-readers-only",id:`combobox-listbox-${t}`,role:"listbox",tabIndex:-1},this.renderListBoxOptions()),this.renderPopperContainer(),(0,a.h)(h.H,{component:this}))}get el(){return this}static get watchers(){return{active:["activeHandler"],disabled:["handleDisabledChange"],maxItems:["maxItemsHandler"],value:["valueHandler"],flipPlacements:["flipPlacementsHandler"],selectedItems:["selectedItemsHandler"],text:["textHandler"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{position:relative;display:block}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([scale=s]){font-size:var(--calcite-font-size--2);--calcite-combobox-item-spacing-unit-l:0.5rem;--calcite-combobox-item-spacing-unit-s:0.25rem;--calcite-combobox-input-height:1.5rem}:host([scale=m]){font-size:var(--calcite-font-size--1);--calcite-combobox-item-spacing-unit-l:0.75rem;--calcite-combobox-item-spacing-unit-s:0.5rem;--calcite-combobox-input-height:2rem}:host([scale=l]){font-size:var(--calcite-font-size-0);--calcite-combobox-item-spacing-unit-l:1rem;--calcite-combobox-item-spacing-unit-s:0.75rem;--calcite-combobox-input-height:2.75rem}.wrapper{display:-ms-flexbox;display:flex;background-color:var(--calcite-ui-foreground-1);color:var(--calcite-ui-text-1);outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;-webkit-box-shadow:inset 0 0 0 1px var(--calcite-ui-border-input);box-shadow:inset 0 0 0 1px var(--calcite-ui-border-input);padding:calc(var(--calcite-combobox-item-spacing-unit-s) / 4) var(--calcite-combobox-item-spacing-unit-l)}:host(:focus-within) .wrapper,.wrapper--active{outline:2px solid var(--calcite-ui-brand);outline-offset:-2px}.wrapper--single{padding:0 var(--calcite-combobox-item-spacing-unit-l);cursor:pointer;-ms-flex-wrap:nowrap;flex-wrap:nowrap}.grid-input{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px}.input{-ms-flex-positive:1;flex-grow:1;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-style:none;background-color:transparent;padding:0px;font-family:inherit;color:var(--calcite-ui-text-1);font-size:inherit;height:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height);min-width:120px;margin-bottom:var(--calcite-combobox-item-spacing-unit-s)}.input:focus{outline:2px solid transparent;outline-offset:2px}.input--transparent{opacity:0}.input--single{margin-bottom:0px;margin-top:0px;padding:0px}.wrapper--active .input-single{cursor:text}.input--hidden{pointer-events:none;width:0px;min-width:0px;opacity:0}.input--icon{padding:0 var(--calcite-combobox-item-spacing-unit-l)}.input-wrap{display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1}.input-wrap--single{-ms-flex:1 1 0%;flex:1 1 0%;overflow:hidden}.label{pointer-events:none;display:-ms-flexbox;display:flex;max-width:100%;-ms-flex:1 1 auto;flex:1 1 auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding:0px;font-weight:var(--calcite-font-weight-normal);height:var(--calcite-combobox-input-height);line-height:var(--calcite-combobox-input-height)}.label--spaced{padding-top:0px;padding-bottom:0px;padding-left:var(--calcite-combobox-item-spacing-unit-l);padding-right:var(--calcite-combobox-item-spacing-unit-l)}.icon-end,.icon-start{display:-ms-flexbox;display:flex;width:1rem;cursor:pointer;-ms-flex-align:center;align-items:center}.icon-end{-ms-flex:none;flex:none}.popper-container{width:100%;display:block;position:absolute;z-index:900;-webkit-transform:scale(0);transform:scale(0);visibility:hidden;pointer-events:none}.popper-container .calcite-popper-anim{position:relative;z-index:1;-webkit-transition:var(--calcite-popper-transition);transition:var(--calcite-popper-transition);visibility:hidden;-webkit-transition-property:visibility, opacity, -webkit-transform;transition-property:visibility, opacity, -webkit-transform;transition-property:transform, visibility, opacity;transition-property:transform, visibility, opacity, -webkit-transform;opacity:0;-webkit-box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);box-shadow:0 0 16px 0 rgba(0, 0, 0, 0.16);border-radius:0.25rem}.popper-container[data-popper-placement^=bottom] .calcite-popper-anim{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.popper-container[data-popper-placement^=top] .calcite-popper-anim{-webkit-transform:translateY(5px);transform:translateY(5px)}.popper-container[data-popper-placement^=left] .calcite-popper-anim{-webkit-transform:translateX(5px);transform:translateX(5px)}.popper-container[data-popper-placement^=right] .calcite-popper-anim{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.popper-container[data-popper-placement] .calcite-popper-anim--active{opacity:1;visibility:visible;-webkit-transform:translate(0);transform:translate(0)}.popper-container--active{pointer-events:initial;visibility:visible}.screen-readers-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.list-container{max-height:100vh;overflow-y:auto;background-color:var(--calcite-ui-foreground-1);width:var(--calcite-dropdown-width)}.list{margin:0px;display:block;padding:0px}.list--hide{height:0px;overflow:hidden}.chip{margin-block:calc(var(--calcite-combobox-item-spacing-unit-s) / 4);margin-inline:0 var(--calcite-combobox-item-spacing-unit-s);max-width:100%}.chip--active{background-color:var(--calcite-ui-foreground-3)}.item{display:block}::slotted(input[slot=hidden-form-input]){bottom:0 !important;left:0 !important;margin:0 !important;opacity:0 !important;outline:none !important;padding:0 !important;position:absolute !important;right:0 !important;top:0 !important;-webkit-transform:none !important;transform:none !important;-webkit-appearance:none !important;z-index:-1 !important}"}},[1,"calcite-combobox",{active:[1540],disabled:[516],label:[1],placeholder:[1],maxItems:[2,"max-items"],name:[513],allowCustomValues:[4,"allow-custom-values"],overlayPositioning:[1,"overlay-positioning"],required:[4],selectionMode:[513,"selection-mode"],scale:[513],value:[1025],intlRemoveTag:[1,"intl-remove-tag"],flipPlacements:[16],items:[32],groupItems:[32],selectedItems:[32],visibleItems:[32],needsIcon:[32],activeItemIndex:[32],activeChipIndex:[32],activeDescendant:[32],text:[32],reposition:[64],setFocus:[64]},[[4,"click","documentClickHandler"],[0,"calciteComboboxItemChange","calciteComboboxItemChangeHandler"]]]);function I(){if("undefined"===typeof customElements)return;["calcite-combobox","calcite-chip","calcite-icon"].forEach((e=>{switch(e){case"calcite-combobox":customElements.get(e)||customElements.define(e,k);break;case"calcite-chip":customElements.get(e)||(0,u.d)();break;case"calcite-icon":customElements.get(e)||(0,b.d)()}}))}I()},29134:(e,t,i)=>{var a=i(51554),s=i(30024),n=i(74938),o=i(87776);const r=(0,a.GH)(class extends a.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteStepperItemKeyEvent=(0,a.yM)(this,"calciteStepperItemKeyEvent",7),this.calciteStepperItemSelect=(0,a.yM)(this,"calciteStepperItemSelect",7),this.calciteStepperItemRegister=(0,a.yM)(this,"calciteStepperItemRegister",7),this.active=!1,this.complete=!1,this.error=!1,this.disabled=!1,this.icon=!1,this.numbered=!1,this.scale="m",this.keyDownHandler=e=>{if(!this.disabled&&e.target===this.el)switch(e.key){case" ":case"Enter":this.emitRequestedItem(),e.preventDefault();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Home":case"End":this.calciteStepperItemKeyEvent.emit({item:e}),e.preventDefault()}},this.emitRequestedItem=()=>{this.disabled||this.calciteStepperItemSelect.emit({position:this.itemPosition,content:this.itemContent})},this.setItemContent=e=>{this.itemPosition=this.getItemPosition();const t=e.target.assignedNodes({flatten:!0});t.length&&(this.itemContent=t),this.registerStepperItem(),this.active&&this.emitRequestedItem()}}disabledWatcher(){this.registerStepperItem()}componentWillLoad(){this.icon=(0,s.g)(this.el,"icon",!1),this.numbered=(0,s.g)(this.el,"numbered",!1),this.layout=(0,s.g)(this.el,"layout",!1),this.scale=(0,s.g)(this.el,"scale","m"),this.parentStepperEl=this.el.parentElement}componentDidRender(){(0,n.u)(this,!0)}render(){return(0,a.h)(a.AA,{"aria-expanded":(0,s.t)(this.active),onClick:this.emitRequestedItem,onKeyDown:this.keyDownHandler},(0,a.h)("div",{class:"container"},(0,a.h)("div",{class:"stepper-item-header"},this.icon?this.renderIcon():null,this.numbered?(0,a.h)("div",{class:"stepper-item-number"},this.getItemPosition()+1,"."):null,(0,a.h)("div",{class:"stepper-item-header-text"},(0,a.h)("span",{class:"stepper-item-title"},this.itemTitle),(0,a.h)("span",{class:"stepper-item-subtitle"},this.itemSubtitle))),(0,a.h)("div",{class:"stepper-item-content"},(0,a.h)("slot",{onSlotchange:this.setItemContent}))))}updateActiveItemOnChange(e){(e.target===this.parentStepperEl||e.composedPath().includes(this.parentStepperEl))&&(this.activePosition=e.detail.position,this.determineActiveItem())}renderIcon(){const e=this.active?"circleF":this.error?"exclamationMarkCircleF":this.complete?"checkCircleF":"circle";return(0,a.h)("calcite-icon",{class:"stepper-item-icon",icon:e,scale:"s"})}determineActiveItem(){this.active=!this.disabled&&this.itemPosition===this.activePosition}registerStepperItem(){this.calciteStepperItemRegister.emit({position:this.itemPosition,content:this.itemContent})}getItemPosition(){return Array.prototype.indexOf.call(this.parentStepperEl.querySelectorAll("calcite-stepper-item"),this.el)}get el(){return this}static get watchers(){return{disabled:["disabledWatcher"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host([scale=s]){--calcite-stepper-item-spacing-unit-s:0.25rem;--calcite-stepper-item-spacing-unit-m:0.75rem;--calcite-stepper-item-spacing-unit-l:1rem;font-size:var(--calcite-font-size--1);line-height:1rem;-webkit-margin-end:0.25rem;margin-inline-end:0.25rem}:host([scale=s]) .stepper-item-subtitle{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-stepper-item-spacing-unit-s:0.5rem;--calcite-stepper-item-spacing-unit-m:1rem;--calcite-stepper-item-spacing-unit-l:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;-webkit-margin-end:0.5rem;margin-inline-end:0.5rem}:host([scale=m]) .stepper-item-subtitle{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-stepper-item-spacing-unit-s:0.75rem;--calcite-stepper-item-spacing-unit-m:1.25rem;--calcite-stepper-item-spacing-unit-l:1.5rem;font-size:var(--calcite-font-size-1);line-height:1.5rem;-webkit-margin-end:0.75rem;margin-inline-end:0.75rem}:host([scale=l]) .stepper-item-subtitle{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host{position:relative;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;margin-bottom:var(--calcite-stepper-item-spacing-unit-s)}:host .container{position:relative;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;cursor:pointer;-ms-flex-direction:column;flex-direction:column;border-width:0px;border-top-width:2px;border-style:solid;border-color:var(--calcite-ui-border-3);color:var(--calcite-ui-text-3);-webkit-text-decoration-line:none;text-decoration-line:none;outline:2px solid transparent;outline-offset:2px;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host{outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}:host(:focus){outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host .stepper-item-header{display:-ms-flexbox;display:flex;cursor:pointer;-ms-flex-align:start;align-items:flex-start}:host .stepper-item-content,:host .stepper-item-header{-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);padding-block:var(--calcite-stepper-item-spacing-unit-l);-webkit-padding-end:var(--calcite-stepper-item-spacing-unit-m);padding-inline-end:var(--calcite-stepper-item-spacing-unit-m);text-align:start}:host .stepper-item-header *{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-content{display:none;width:100%;-ms-flex-direction:column;flex-direction:column;font-size:var(--calcite-font-size--2);line-height:1.375}:host .stepper-item-icon{-webkit-margin-end:var(--calcite-stepper-item-spacing-unit-m);margin-inline-end:var(--calcite-stepper-item-spacing-unit-m);margin-top:1px;display:-ms-inline-flexbox;display:inline-flex;height:0.75rem;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:flex-start;color:var(--calcite-ui-text-3);opacity:var(--calcite-ui-opacity-disabled);-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-header-text{-ms-flex-direction:column;flex-direction:column;text-align:initial;-webkit-margin-end:auto;margin-inline-end:auto}:host .stepper-item-title,:host .stepper-item-subtitle{display:-ms-flexbox;display:flex;width:100%}:host .stepper-item-title{margin-bottom:0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}:host .stepper-item-subtitle{color:var(--calcite-ui-text-3)}:host .stepper-item-number{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-3);-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-margin-end:var(--calcite-stepper-item-spacing-unit-m);margin-inline-end:var(--calcite-stepper-item-spacing-unit-m)}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([complete]) .container .stepper-item-icon{color:var(--calcite-ui-brand)}:host([error]) .container{border-top-color:var(--calcite-ui-danger)}:host([error]) .container .stepper-item-number{color:var(--calcite-ui-danger)}:host([error]) .container .stepper-item-icon{opacity:1;color:var(--calcite-ui-danger)}:host(:hover:not([disabled]):not([active])) .container,:host(:focus:not([disabled]):not([active])) .container{border-top-color:var(--calcite-ui-brand)}:host(:hover:not([disabled]):not([active])) .container .stepper-item-title,:host(:focus:not([disabled]):not([active])) .container .stepper-item-title{color:var(--calcite-ui-text-1)}:host(:hover:not([disabled]):not([active])) .container .stepper-item-subtitle,:host(:focus:not([disabled]):not([active])) .container .stepper-item-subtitle{color:var(--calcite-ui-text-2)}:host([error]:hover:not([disabled]):not([active])) .container,:host([error]:focus:not([disabled]):not([active])) .container{border-top-color:var(--calcite-ui-danger-hover)}:host([active]) .container{border-top-color:var(--calcite-ui-brand)}:host([active]) .container .stepper-item-title{color:var(--calcite-ui-text-1)}:host([active]) .container .stepper-item-subtitle{color:var(--calcite-ui-text-2)}:host([active]) .container .stepper-item-number{color:var(--calcite-ui-brand)}:host([active]) .container .stepper-item-icon{color:var(--calcite-ui-brand);opacity:1}:host([layout=vertical]) .container{margin-left:0px;margin-right:0px;margin-top:0px;-ms-flex:1 1 auto;flex:1 1 auto;border-top-width:0px;border-style:solid;border-color:var(--calcite-ui-border-3);padding-top:0px;padding-bottom:0px;border-inline-start-width:2px;-webkit-padding-start:var(--calcite-stepper-item-spacing-unit-l);padding-inline-start:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical]) .container .stepper-item-icon{-ms-flex-order:3;order:3;margin-top:1px;margin-bottom:0px;-webkit-padding-start:var(--calcite-stepper-item-spacing-unit-s);padding-inline-start:var(--calcite-stepper-item-spacing-unit-s);-webkit-margin-start:auto;margin-inline-start:auto}:host([layout=vertical]) .container .stepper-item-header{-webkit-padding-end:0px;padding-inline-end:0px}:host([layout=vertical]) .container .stepper-item-content{padding:0px}:host([layout=vertical][active]) .container .stepper-item-content{display:-ms-flexbox;display:flex}:host([layout=vertical][active]) .container .stepper-item-content ::slotted(:last-child){margin-bottom:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical][complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][complete]:hover:not([disabled]):not([active])) .container,:host([layout=vertical][complete]:focus:not([disabled]):not([active])) .container{border-color:var(--calcite-ui-brand)}:host([layout=vertical][error]) .container{border-color:var(--calcite-ui-danger)}:host([layout=vertical][active]) .container{border-color:var(--calcite-ui-brand)}:host([layout=vertical]:hover:not([disabled]):not([active])) .container,:host([layout=vertical]:focus:not([disabled]):not([active])) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][error]:hover:not([disabled]):not([active])) .container,:host([layout=vertical][error]:focus:not([disabled]):not([active])) .container{border-color:var(--calcite-ui-danger-hover)}"}},[1,"calcite-stepper-item",{active:[1540],complete:[516],error:[4],disabled:[516],itemTitle:[1,"item-title"],itemSubtitle:[1,"item-subtitle"],layout:[1537],icon:[1028],numbered:[1028],scale:[1537]},[[16,"calciteStepperItemChange","updateActiveItemOnChange"]]]);function l(){if("undefined"===typeof customElements)return;["calcite-stepper-item","calcite-icon"].forEach((e=>{switch(e){case"calcite-stepper-item":customElements.get(e)||customElements.define(e,r);break;case"calcite-icon":customElements.get(e)||(0,o.d)()}}))}l()},74037:(e,t,i)=>{var a=i(51554);const s=(0,a.GH)(class extends a.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteStepperItemChange=(0,a.yM)(this,"calciteStepperItemChange",7),this.icon=!1,this.layout="horizontal",this.numbered=!1,this.scale="m",this.itemMap=new Map,this.items=[],this.enabledItems=[]}contentWatcher(){"horizontal"===this.layout&&(!this.stepperContentContainer&&this.requestedContent&&this.addHorizontalContentContainer(),this.updateContent(this.requestedContent))}componentDidLoad(){this.currentPosition||this.calciteStepperItemChange.emit({position:0})}componentWillLoad(){"horizontal"!==this.layout||this.stepperContentContainer||this.addHorizontalContentContainer()}render(){return(0,a.h)("slot",null)}calciteStepperItemKeyEvent(e){const t=e.detail.item,i=e.target,a=0===this.itemIndex(i),s=this.itemIndex(i)===this.enabledItems.length-1;switch(t.key){case"ArrowDown":case"ArrowRight":s?this.focusFirstItem():this.focusNextItem(i);break;case"ArrowUp":case"ArrowLeft":a?this.focusLastItem():this.focusPrevItem(i);break;case"Home":this.focusFirstItem();break;case"End":this.focusLastItem()}}registerItem(e){const t=e.target,{content:i,position:a}=e.detail;i&&t.active&&(this.requestedContent=i),this.itemMap.set(t,a),this.items=this.sortItems(),this.enabledItems=this.filterItems()}updateItem(e){e.detail.content&&(this.requestedContent=e.detail.content),this.currentPosition=e.detail.position,this.calciteStepperItemChange.emit({position:this.currentPosition})}async nextStep(){const e=this.getEnabledStepIndex(this.currentPosition+1,"next");"number"===typeof e&&this.emitChangedItem(e)}async prevStep(){const e=this.getEnabledStepIndex(this.currentPosition-1,"previous");"number"===typeof e&&this.emitChangedItem(e)}async goToStep(e){const t=e-1;this.currentPosition!==t&&this.emitChangedItem(t)}async startStep(){const e=this.getEnabledStepIndex(0,"next");"number"===typeof e&&this.emitChangedItem(e)}async endStep(){const e=this.getEnabledStepIndex(this.items.length-1,"previous");"number"===typeof e&&this.emitChangedItem(e)}getEnabledStepIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next";var i;const{items:a,currentPosition:s}=this;let n=e;for(;null===(i=a[n])||void 0===i?void 0:i.disabled;)n+="previous"===t?-1:1;return n!==s&&n<a.length&&n>=0?n:null}addHorizontalContentContainer(){this.stepperContentContainer=document.createElement("div"),this.stepperContentContainer.classList.add("calcite-stepper-content"),this.el.insertAdjacentElement("beforeend",this.stepperContentContainer)}emitChangedItem(e){this.currentPosition=e,this.calciteStepperItemChange.emit({position:e})}focusFirstItem(){const e=this.enabledItems[0];this.focusElement(e)}focusLastItem(){const e=this.enabledItems[this.enabledItems.length-1];this.focusElement(e)}focusNextItem(e){const t=this.itemIndex(e),i=this.enabledItems[t+1]||this.enabledItems[0];this.focusElement(i)}focusPrevItem(e){const t=this.itemIndex(e),i=this.enabledItems[t-1]||this.enabledItems[this.enabledItems.length-1];this.focusElement(i)}itemIndex(e){return this.enabledItems.indexOf(e)}focusElement(e){e.focus()}sortItems(){const{itemMap:e}=this;return Array.from(e.keys()).sort(((t,i)=>e.get(t)-e.get(i)))}filterItems(){return this.items.filter((e=>!e.disabled))}updateContent(e){this.stepperContentContainer.innerHTML="",this.stepperContentContainer.append(...e)}get el(){return this}static get watchers(){return{requestedContent:["contentWatcher"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{position:relative;display:-ms-flexbox;display:flex;width:100%;min-width:100%;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:justify;justify-content:space-between}:host([layout=vertical]){-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column}:host ::slotted(.calcite-stepper-content){display:-ms-flexbox;display:flex;width:100%;min-width:100%;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:wrap;flex-wrap:wrap}"}},[1,"calcite-stepper",{icon:[516],layout:[513],numbered:[516],scale:[513],requestedContent:[1040],nextStep:[64],prevStep:[64],goToStep:[64],startStep:[64],endStep:[64]},[[0,"calciteStepperItemKeyEvent","calciteStepperItemKeyEvent"],[0,"calciteStepperItemRegister","registerItem"],[0,"calciteStepperItemSelect","updateItem"]]]);function n(){if("undefined"===typeof customElements)return;["calcite-stepper"].forEach((e=>{if("calcite-stepper"===e)customElements.get(e)||customElements.define(e,s)}))}n()},79497:(e,t,i)=>{i.d(t,{f:()=>z,i:()=>s});var a=i(57218);e=i.hmd(e);var s=Array.isArray;function n(e){return e}var o=/^(?:0|[1-9]\d*)$/;function r(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&o.test(e))&&e>-1&&e%1==0&&e<t}function l(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function c(e){return null!=e&&l(e.length)&&!function(e){if(!(0,a.i)(e))return!1;var t=(0,a.b)(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)}var h=Object.prototype;function p(e){return(0,a.c)(e)&&"[object Arguments]"==(0,a.b)(e)}var m=Object.prototype,d=m.hasOwnProperty,u=m.propertyIsEnumerable,b=p(function(){return arguments}())?p:function(e){return(0,a.c)(e)&&d.call(e,"callee")&&!u.call(e,"callee")};var f="object"==typeof exports&&exports&&!exports.nodeType&&exports,g=f&&e&&!e.nodeType&&e,v=g&&g.exports===f?a.r.Buffer:void 0,x=(v?v.isBuffer:void 0)||function(){return!1},y={};y["[object Float32Array]"]=y["[object Float64Array]"]=y["[object Int8Array]"]=y["[object Int16Array]"]=y["[object Int32Array]"]=y["[object Uint8Array]"]=y["[object Uint8ClampedArray]"]=y["[object Uint16Array]"]=y["[object Uint32Array]"]=!0,y["[object Arguments]"]=y["[object Array]"]=y["[object ArrayBuffer]"]=y["[object Boolean]"]=y["[object DataView]"]=y["[object Date]"]=y["[object Error]"]=y["[object Function]"]=y["[object Map]"]=y["[object Number]"]=y["[object Object]"]=y["[object RegExp]"]=y["[object Set]"]=y["[object String]"]=y["[object WeakMap]"]=!1;var w,k="object"==typeof exports&&exports&&!exports.nodeType&&exports,I=k&&e&&!e.nodeType&&e,C=I&&I.exports===k&&a.f.process,_=function(){try{var e=I&&I.require&&I.require("util").types;return e||C&&C.binding&&C.binding("util")}catch(t){}}(),S=_&&_.isTypedArray,E=S?(w=S,function(e){return w(e)}):function(e){return(0,a.c)(e)&&l(e.length)&&!!y[(0,a.b)(e)]},D=Object.prototype.hasOwnProperty;function T(e,t){var i=s(e),a=!i&&b(e),n=!i&&!a&&x(e),o=!i&&!a&&!n&&E(e),l=i||a||n||o,c=l?function(e,t){for(var i=-1,a=Array(e);++i<e;)a[i]=t(i);return a}(e.length,String):[],h=c.length;for(var p in e)!t&&!D.call(e,p)||l&&("length"==p||n&&("offset"==p||"parent"==p)||o&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||r(p,h))||c.push(p);return c}var A=Object.prototype.hasOwnProperty;function M(e){if(!(0,a.i)(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||h)}(e),i=[];for(var s in e)("constructor"!=s||!t&&A.call(e,s))&&i.push(s);return i}function L(e){return c(e)?T(e,!0):M(e)}var O,R=function(e,t,i){for(var a=-1,s=Object(e),n=i(e),o=n.length;o--;){var r=n[O?o:++a];if(!1===t(s[r],r,s))break}return e};function z(e,t){return null==e?e:R(e,"function"==typeof(i=t)?i:n,L);var i}},66618:(e,t,i)=>{i.d(t,{C:()=>r,T:()=>l,a:()=>p,b:()=>n,c:()=>o,d:()=>c,e:()=>d,g:()=>h,h:()=>m});var a=i(30024),s=i(51554);const n="CALCITE-COMBOBOX-ITEM",o="CALCITE-COMBOBOX-ITEM-GROUP",r=`${n}, ${o}`,l={removeTag:"Remove tag"};function c(e){var t,i;const a=null===(t=e.parentElement)||void 0===t?void 0:t.closest(r);return[a,null===(i=null===a||void 0===a?void 0:a.parentElement)||void 0===i?void 0:i.closest(r)].filter((e=>e))}function h(e){var t;return(null===(t=e.ancestors)||void 0===t?void 0:t.filter((e=>"CALCITE-COMBOBOX-ITEM"===e.nodeName)))||[]}function p(e){return(0,a.n)(e.querySelectorAll("calcite-combobox-item"))}function m(e){return(0,a.n)(e.querySelectorAll("calcite-combobox-item")).filter((e=>e.selected)).length>0}function d(e){if(!s.Z5.isBrowser)return 0;return document.evaluate("ancestor::calcite-combobox-item | ancestor::calcite-combobox-item-group",e,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength}},54134:(e,t,i)=>{var a,s,n,o,r,l;i.d(t,{NH:()=>r,Xo:()=>n,fu:()=>a}),function(e){e[e.INNER=0]="INNER",e[e.OUTER=1]="OUTER"}(a||(a={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",e[e.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",e[e.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(s||(s={})),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(n||(n={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(o||(o={})),function(e){e[e.Color=0]="Color",e[e.ColorNoRasterImage=1]="ColorNoRasterImage",e[e.Highlight=2]="Highlight",e[e.Water=3]="Water",e[e.Occluded=4]="Occluded"}(r||(r={})),function(e){e[e.FADING=0]="FADING",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.UNFADED=2]="UNFADED"}(l||(l={}))},97731:(e,t,i)=>{i.d(t,{E6:()=>c,Kj:()=>m,RQ:()=>b,T:()=>o,ep:()=>l,hu:()=>n,kG:()=>p,tM:()=>u,u_:()=>h,yK:()=>r,zF:()=>d});var a=i(6394);i(90045);(0,i(67077).c)();class s{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}}function n(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new s(t)}function o(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))}function r(e,t,i,a){let s,n=(i[0]-e[0])/t[0],o=(a[0]-e[0])/t[0];n>o&&(s=n,n=o,o=s);let r=(i[1]-e[1])/t[1],l=(a[1]-e[1])/t[1];if(r>l&&(s=r,r=l,l=s),n>l||r>o)return!1;r>n&&(n=r),l<o&&(o=l);let c=(i[2]-e[2])/t[2],h=(a[2]-e[2])/t[2];return c>h&&(s=c,c=h,h=s),!(n>h||c>o)&&(h<o&&(o=h),!(o<0))}function l(e,t,i,s,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,a.a)();const r=(s[n]-i[n])*(t[0]-e[0])-(s[0]-i[0])*(t[n]-e[n]),l=(s[0]-i[0])*(e[n]-i[n])-(s[n]-i[n])*(e[0]-i[0]);if(0===r)return!1;const c=l/r;return o[0]=e[0]+c*(t[0]-e[0]),o[1]=e[n]+c*(t[n]-e[n]),!0}function c(e,t){return Math.log(e)/Math.log(t)}function h(e,t,i,a){e[12]=t,e[13]=i,e[14]=a}function p(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}function m(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/t)}function d(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/i)}function u(e,t,i){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}function b(e,t,i){return 2*Math.atan(i*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}},92028:(e,t,i)=>{i.d(t,{D:()=>n});var a=i(72619),s=i(50951);function n(e,t){return null!=e&&(null==t||(t===s.JY.Local?!e.isGeographic||e.isWGS84||e.wkid===a.W.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===a.W.CGCS2000||e.wkid===a.W.GCSMARS2000||e.wkid===a.W.GCSMARS2000_SPHERE||e.wkid===a.W.GCSMOON2000))}},6934:(e,t,i)=>{i.d(t,{Z:()=>Fe});var a=i(27366),s=i(65905),n=i(100),o=i(94172),r=i(8025),l=i(63780),c=(i(93169),i(25243),i(49861)),h=i(69912),p=i(69407),m=i(29479),d=i(40281),u=i(41691),b=i(54472),f=i(92026),g=i(89125),v=i(79803),x=i(92975),y=i(23037),w=i(10064),k=i(66978),I=i(37933),C=i(50951),_=(i(41644),i(76200)),S=i(85015),E=i(84652),D=i(97731);class T{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new A}}class A{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class M{constructor(e,t,i,a){this._workerFunc=e,this._callbackFunc=t,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=a.map((e=>new T(e)))}hasQuota(e){const t=this._clients[e];return!!t&&(this._totalNumWorkers<this._maxTotalNumWorkers||t.numWorkers+t.tasks.length<t.typeWorkerQuota)}push(e){const t=this._clients[e.client];t&&(this._totalNumWorkers<this._maxTotalNumWorkers?(t.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,((e,t)=>this._taskCallback(e,t)))):t.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(e){const t=this._clients[e.client];this._totalNumWorkers--,t.numWorkers--,t.statistics.requests++,t.statistics.size+=e.size||0,t.statistics.duration+=e.duration||0,t.statistics.speed=t.statistics.duration>0?t.statistics.size/t.statistics.duration:0,(0,D.hu)(t.numWorkers>=0),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),((e,t)=>this._taskCallback(e,t))))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,t){e._cancelled||(this._callbackFunc(e,t),this._taskFinished(e))}getStatsForType(e){const t=this._clients[e];return t?{quota:t.typeWorkerQuota,workers:t.numWorkers,queueSize:t.tasks.length,requestStats:t.statistics}:null}get test(){const e=this;return{set workerFunc(t){e._workerFunc=t}}}}var L=i(99912);let O=class extends S.Z{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,i){this._loadQueue=new M(((e,t)=>this._startLoading(e,t)),((e,t)=>this._doneLoadingCB(e,t)),e,t),i&&(this._frameTask=i.registerTask(L.T8.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=(0,f.hw)(this._frameTask),this._tasks.forEach((e=>(0,f.IM)(e.abortController))),this._loadQueue=(0,f.SC)(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const s=(0,k.hh)();s.__signal=(0,f.pC)(a)?a.signal:null;const n=this._createOrUpdateTask(e,t,i,a,s);return(0,k.fu)(a,(()=>this._cancelRequest(n,s))),s.promise}_createTask(e,t,i,a,s,n){const o=new H(e,t,i,a,s);return this._updateTask(o,n),this._tasks.set(s,o),1===this._tasks.size&&this._set("updating",!0),this._loadQueue.push(o),o}_cancelRequest(e,t){(0,l.e$)(e.resolvers,t),t.reject((0,k.zE)()),0===e.resolvers.length&&(e.status===W.DOWNLOADING&&(e.status=W.CANCELLED,this._loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=W.CANCELLED,this._tasks.delete(e.key),0===this._tasks.size&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,i,a,s){const n=function(e,t,i){return`${e}:${t}:${i}`}((0,f.pC)(a)&&a.uid||e,t,i),o=this._tasks.get(n);return o?(this._updateTask(o,s),o):this._createTask(e,a,t,i,n,s)}_doneLoadingCB(e,t){this._loadQueue&&((0,D.hu)(e.status===W.DOWNLOADING),e.status=W.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();(0,k.k_)(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==W.DOWNLOADED&&(t.err=t.err||(0,k.zE)()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!(0,k.D_)(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let i=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const a of e.resolvers)if(t)(0,k.D_)(t)?a.reject(t):a.reject(new w.Z("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--i;const t=i<=0?e.result:(0,E.d9)(e.result);a.resolve(t)}this._tasks.delete(e.key),0===this._tasks.size&&this._set("updating",!1)}_startLoading(e,t){if(e.status===W.CANCELLED)return!1;let i,a;switch(e.startTime=performance.now(),e.status=W.DOWNLOADING,e.docType){case"binary":a="array-buffer",i=0;break;case"image":a="image";break;case"image+type":a="array-buffer";break;default:a="json"}e.abortController=new AbortController;const s=e.abortController.signal;e.request=(0,_.default)(e.url,{...e.options,responseType:a,timeout:i,signal:s});let n=()=>{};const o=i=>{e.duration=performance.now()-e.startTime,e.size=i instanceof ArrayBuffer?i.byteLength:e.size||0,e.result=i,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},r=i=>{e.status===W.DOWNLOADING&&t(e,i),n()};return"image+type"!==e.docType?(e.request.then((e=>o(e.data)),r),!0):(e.request.then((t=>{const l=t.data,c=function(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return 137===t[0]&&80===t[1]?"image/png":71===t[0]&&73===t[1]?"image/gif":66===t[0]&&77===t[1]?"image/bmp":255===t[0]&&216===t[1]?"image/jpeg":"unknown"}(l);if(a="image",e.size=l.byteLength,"unknown"===c)return e.request=(0,_.default)(e.url,{responseType:a,timeout:i,signal:s}),void e.request.then((e=>o(e.data)),r);const h=new Blob([l],{type:c}),p=window.URL.createObjectURL(h);n=()=>window.URL.revokeObjectURL(p),e.request=(0,_.default)(p,{responseType:a,timeout:i,signal:s}),e.request.then((e=>o(new z(e.data,c,n))),r)}),r),!0)}get test(){return{loadQueue:this._loadQueue}}};(0,a._)([(0,c.Cb)({readOnly:!0})],O.prototype,"updating",void 0),O=(0,a._)([(0,h.j)("esri.views.3d.support.StreamDataLoader")],O);const R=0;class z{constructor(e,t,i){this.image=e,this.type=t,this.release=i}get isOpaque(){return"image/jpeg"===this.type}}class H extends class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}}{constructor(e,t,i,a,s){super(a),this.url=e,this.options=t,this.docType=i,this.key=s,this.result=null,this.status=W.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=R}}var W;!function(e){e[e.QUEUED=1]="QUEUED",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.DOWNLOADED=3]="DOWNLOADED",e[e.CANCELLED=4]="CANCELLED"}(W||(W={}));var F=i(54134),P=i(11186),B=i(71353),N=i(65156),j=i(16889),q=i(68860),Z=i(53866),G=i(78952),U=i(81753),V=i(22824);class Q{constructor(e){const t=Q.checkUnsupported(e);if((0,f.pC)(t))throw t;const i=(0,f.Wg)(e);this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=(0,v.jF)(this.spatialReference)||(0,x.BZ)(this.spatialReference)||(0,x.V2)(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const a=i.lods.reduce(((e,t,i)=>(t.level<e.min&&(e.min=t.level,e.minIndex=i),e.max=Math.max(e.max,t.level),e)),{min:1/0,minIndex:0,max:-1/0}),s=i.lods[a.minIndex],n=2**s.level;let o=s.resolution*n,r=s.scale*n;this.levels=new Array(a.max+1);for(let l=0;l<this.levels.length;l++)this.levels[l]={resolution:o,scale:r,tileSize:[o*i.size[0],o*i.size[1]]},o/=2,r/=2}clone(){return new Q(this.toTileInfo())}toTileInfo(){return new V.Z({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((e,t)=>({level:t,scale:e.scale,resolution:e.resolution})))})}getExtent(e,t,i,a){const s=this.levels[e],n=s.tileSize[0],o=s.tileSize[1];a[0]=this.origin[0]+i*n,a[2]=this.origin[0]+(i+1)*n,a[3]=this.origin[1]-t*o,a[1]=this.origin[1]-(t+1)*o}convertExtentToRadians(e,t){this._isWebMercator?(t[0]=(0,U.tp)(e[0]),t[1]=(0,U.mZ)(e[1]),t[2]=(0,U.tp)(e[2]),t[3]=(0,U.mZ)(e[3])):this._isGCS&&(t[0]=(0,j.Vl)(e[0]),t[1]=(0,j.Vl)(e[1]),t[2]=(0,j.Vl)(e[2]),t[3]=(0,j.Vl)(e[3]))}getExtentGeometry(e,t,i){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Z.Z;return this.getExtent(e,t,i,X),a.spatialReference=this.spatialReference,a.xmin=X[0],a.ymin=X[1],a.xmax=X[2],a.ymax=X[3],a.zmin=void 0,a.zmax=void 0,a}ensureMaxLod(e){if(null==e)return!1;let t=!1;for(;this.levels.length<=e;){const e=this.levels[this.levels.length-1],i=e.resolution/2;this.levels.push({resolution:i,scale:e.scale/2,tileSize:[i*this.pixelSize,i*this.pixelSize]}),t=!0}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof Q)){if(Q.checkUnsupported(e))return!1;e=new Q(e)}if(!e.spatialReference.equals(this.spatialReference))return!1;if(e.pixelSize!==this.pixelSize)return!1;const t=Math.min(this.levels.length,e.levels.length)-1,i=this.levels[t].resolution;let a=.5*i;return!(!(0,j.W8)(e.origin[0],this.origin[0],a)||!(0,j.W8)(e.origin[1],this.origin[1],a))&&(a=.5*i/2**t/this.pixelSize*12,(0,j.W8)(i,e.levels[t].resolution,a))}rootTilesInExtent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const a=new Array,s=this.levels[0].tileSize;if((0,f.Wi)(e)||0===s[0]||0===s[1])return a;Q.computeRowColExtent(e,s,this.origin,X);let n=X[1],o=X[3],r=X[0],l=X[2];const c=l-r,h=o-n;if(c*h>i){const e=Math.floor(Math.sqrt(i));h>e&&(n=n+Math.floor(.5*h)-Math.floor(.5*e),o=n+e),c>e&&(r=r+Math.floor(.5*c)-Math.floor(.5*e),l=r+e)}for(let p=n;p<o;p++)for(let e=r;e<l;e++)a.push([0,p,e]);return(0,f.pC)(t)&&(t[0]=this.origin[0]+r*s[0],t[1]=this.origin[1]-o*s[1],t[2]=this.origin[0]+l*s[0],t[3]=this.origin[1]-n*s[1]),a}static computeRowColExtent(e,t,i,a){const s=.001*(e[2]-e[0]+(e[3]-e[1]));a[0]=Math.max(0,Math.floor((e[0]+s-i[0])/t[0])),a[2]=Math.max(0,Math.ceil((e[2]-s-i[0])/t[0])),a[1]=Math.max(0,Math.floor((i[1]-e[3]+s)/t[1])),a[3]=Math.max(0,Math.ceil((i[1]-e[1]-s)/t[1]))}static isPowerOfTwo(e){const t=e.lods,i=t[0].resolution*2**t[0].level;return!t.some((e=>!(0,j.Y8)(e.resolution,i/2**e.level)))}static hasGapInLevels(e){const t=e.lods.map((e=>e.level));t.sort(((e,t)=>e-t));for(let i=1;i<t.length;i++)if(t[i]!==t[0]+i)return!0;return!1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512}static hasOriginPerLODs(e){const t=e.origin;return e.lods.some((e=>null!=e.origin&&(e.origin[0]!==t.x||e.origin[1]!==t.y)))}static getMissingTileInfoError(){return new w.Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return(0,f.Wi)(e)?$():e.lods.length<1?new w.Z("tilingscheme:generic","Tiling scheme must have at least one level"):Q.isPowerOfTwo(e)?Q.hasGapInLevels(e)?new w.Z("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Q.tileSizeSupported(e)?Q.hasOriginPerLODs(e)?new w.Z("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new w.Z("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new w.Z("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,t){const i=e[2]-e[0],a=e[3]-e[1],s=(0,q.c9)(t),n=1.2*Math.max(i,a),o=256,r=new Q(new V.Z({size:[o,o],origin:{x:e[0]-.5*(n-i),y:e[3]+.5*(n-a)},lods:[{level:0,resolution:n/o,scale:1/(o/96*.0254/(n*s))}],spatialReference:t}));return r.ensureMaxLod(20),r}static makeWebMercatorAuxiliarySphere(e){const t=new Q(Q.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const a=256/t,s=new Q(new V.Z({size:[t,t],origin:{x:-180,y:90,spatialReference:e},spatialReference:e,lods:[{level:0,resolution:.703125*a,scale:295497598.570834*a}]}));return s.ensureMaxLod(i),s}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function $(){return new w.Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Q.WebMercatorAuxiliarySphereTileInfo=new V.Z({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:G.Z.WebMercator},spatialReference:G.Z.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),Q.WebMercatorAuxiliarySphere=Q.makeWebMercatorAuxiliarySphere(19);const X=(0,N.Ue)(),Y=((0,j.oK)(j._3/10),(0,N.Ue)());Q.WebMercatorAuxiliarySphere.getExtent(0,0,0,Y);(0,N.Ue)([-180,-90,180,90]);const K=(0,B.c)(),J=(0,B.c)(),ee=(0,B.c)(),te=(0,B.c)();function ie(e,t,i,a){(0,P.c)(K,i),K[a]=t[a];const s=(0,P.b)(K,K,t),n=(0,P.b)(J,e,t),o=(0,P.e)(n,s),r=(0,P.e)(s,s);let l;l=o<=0?t:r<=o?i:(0,P.a)(K,t,(0,P.g)(s,s,o/r));const c=(0,P.b)(K,e,l);return Math.PI/2-Math.atan(c[2]/Math.sqrt(c[0]*c[0]+c[1]*c[1]))}const ae=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=e.extent;if((0,f.Wi)(a))return!1;if(0===i)return(0,N.BD)(a,t);const s=Math.min(a[2]-a[0],a[3]-a[1]);return(0,N.Zm)(a,t,i*s)},tiltToExtentEdge:function(e,t,i){const a=e.extent;if((0,f.Wi)(a))return 0;ee[0]=a[0],ee[1]=a[1],ee[2]=i,te[0]=a[2],te[1]=a[3],te[2]=i;let s=1/0,n=1/0;return t[0]<ee[0]?s=ie(t,ee,te,0):t[0]>te[0]&&(s=ie(t,te,ee,0)),t[1]<ee[1]?n=ie(t,ee,te,1):t[1]>te[1]&&(n=ie(t,te,ee,1)),Math.min(s,n)},checkIfTileInfoSupportedForViewSR:function(e,t,i){if((0,f.Wi)(e))return $();if(e.spatialReference.isGeographic&&!(0,v.jF)(e.spatialReference))return new w.Z("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const a=Q.checkUnsupported(e);if((0,f.pC)(a))return a;if((0,f.Wi)(i))return new w.Z("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const s=function(e,t){const i=e.lods,a=i[0].resolution*2**i[0].level,s=[a*e.size[0],a*e.size[1]],n=[e.origin.x,e.origin.y],o=(0,N.oJ)(t),r=(0,N.Ue)();Q.computeRowColExtent(o,s,n,r);const l=(r[2]-r[0])*(r[3]-r[1]);if(l>64){const t=i[0].scale*2**i[0].level;let s=Math.max((o[3]-o[1])/e.size[1],(o[2]-o[0])/e.size[0])*t/a;const n=Math.floor(Math.log(s)/Math.log(10));return s=Math.ceil(s/10**n)*10**n,new w.Z("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(t).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+s.toLocaleString()+".",{level0Scale:t,suggestedLevel0Scale:s,requiredNumRootTiles:l,allowedNumRootTiles:64})}return null}(e,i);if(s)return s;const n=e.spatialReference;return(0,f.pC)(t)&&!(n.equals(t)||t.isWGS84&&n.isWebMercator)?new w.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}},Symbol.toStringTag,{value:"Module"}));const se=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:function(){return!0},tiltToExtentEdge:function(){return 0},checkIfTileInfoSupportedForViewSR:function(e,t){if((0,f.Wi)(e))return $();const i=e.lods.length-1,a=e.spatialReference,s=(0,v.jF)(a)||(0,x.BZ)(a)||(0,x.V2)(a);if(a.isWebMercator){if(!Q.makeWebMercatorAuxiliarySphere(i).compatibleWith(e))return new w.Z("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!s)return new w.Z("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Q.makeGCSWithTileSize(e.spatialReference,e.size[0],i).compatibleWith(e))return e.spatialReference.isWGS84?new w.Z("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new w.Z("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return(0,f.pC)(t)&&!e.spatialReference.equals(t)?new w.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}},Symbol.toStringTag,{value:"Module"})),ne={[C.JY.Global]:se,[C.JY.Local]:ae};function oe(e,t,i,a){return ne[a].checkIfTileInfoSupportedForViewSR(e,i,t)}function re(e,t,i){const a=(0,I.mt)(e);if((0,f.pC)(a)){if(!d.Z.isCollection(a))return{tileInfo:a.tileInfo,fullExtent:a.fullExtent};{const e=a.find((e=>null==oe(e.tileInfo,e.fullExtent,t,i)));if(e)return{tileInfo:e.tileInfo,fullExtent:e.fullExtent}}}return{tileInfo:null,fullExtent:null}}F.Xo.NORTH,F.Xo.EAST,F.Xo.SOUTH,F.Xo.WEST,F.Xo.NORTH_EAST,F.Xo.SOUTH_EAST,F.Xo.SOUTH_WEST,F.Xo.NORTH_WEST;var le=i(92028);async function ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await me(e,t),(0,k.k_)(t)}async function he(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{basemap:i,view:a}=e;if((0,k.k_)(t),"spatialReferenceLocked"in a&&!a.spatialReferenceLocked)return;if(await i.load(t),(0,k.k_)(t),0===i.baseLayers.length)return;const s=i.baseLayers.getItemAt(0);if(!(0,I.iC)(s))return;if(i.spatialReference){if(a.spatialReference.equals(i.spatialReference))return;pe()}await s.load(t),(0,k.k_)(t);const n=(("supportedSpatialReferences"in s?s.supportedSpatialReferences:null)||["tileInfo"in s?s.tileInfo.spatialReference:null]).filter(Boolean);0!==n.length&&n.every((e=>!a.spatialReference.equals(e)))&&pe()}function pe(){throw new w.Z("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function me(e,t){const{basemap:i,view:a}=e;if(await i.load(t),0===i.baseLayers.length)return;const s=i.baseLayers.concat(i.referenceLayers).toArray().filter((e=>!(0,I.qq)(e))).map((e=>new w.Z("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})));if(s.length)throw s[0];const n=i.baseLayers.getItemAt(0);if((0,I.qq)(n)){try{await n.load(t)}catch(o){const e="basemap-compatibility:unknown-error",t="Unknown basemap compatibility error",{name:i=e,message:a=t,details:s}=o;throw new w.Z(i,a,s)}!function(e,t){const i=t.state.viewingMode;if(!i)return;let a,s;if("wmts"===e?.type){const n=re(e,t.spatialReference,i);if((0,f.Wi)(n.tileInfo))throw new w.Z("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");a=n.tileInfo,s=n.fullExtent}else a=e.tileInfo,s=e.fullExtent;if((0,f.Wi)(a))return;if(!(0,le.D)(a.spatialReference,i))throw new w.Z(`basemapgalleryitem:spatial-reference-unsupported-${(0,C.M7)(i)}`,`Basemap spatial reference is unsupported in ${(0,C.M7)(i)} mode`);const n=a.spatialReference.isGeographic,o="vector-tile"===e?.type?a.getOrCreateCompatible(256,n?1:2):null;if(i===C.JY.Global){let t=oe(a,s,null,i);if(t&&"vector-tile"===e?.type&&(0,f.pC)(s)&&o&&!oe(o,s,null,i)&&(t=null),t){const e=a.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new w.Z(`basemapgalleryitem:tiling-scheme-unsupported-${e}-global`,"Basemap tiling scheme is unsupported in global mode",{error:t})}}else if(Q.checkUnsupported(a))throw new w.Z("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const r=t.get("basemapTerrain.tilingScheme");if(r&&!r.compatibleWith(a)&&("vector-tile"!==e?.type||!o||!r.compatibleWith(o)))throw new w.Z("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}(n,a)}}let de=class extends((0,u.p)(S.Z)){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([(0,o.YP)((()=>this.basemap?.loadStatus),e),(0,o.YP)((()=>this.compatibilityFunction),e),(0,o.YP)((()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme),e),(0,o.YP)((()=>this.view?.ready),e),(0,o.YP)((()=>this.view?.spatialReference),e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return(0,y.Us)(this.view,this.basemap)}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch((()=>{})),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if("loaded"!==e&&"failed"!==e)return;if(!this.compatibilityFunction)return void("loaded"===e?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then((()=>(0,o.N1)((()=>!this._spatialReferenceTask.updating),i))).then((()=>{this._set("state","ready"),this._set("error",null)})).catch((e=>{(0,k.D_)(e)||(this._set("state","error"),this._set("error",e))})),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};(0,a._)([(0,c.Cb)({readOnly:!0})],de.prototype,"_spatialReferenceTask",null),(0,a._)([(0,c.Cb)()],de.prototype,"basemap",null),(0,a._)([(0,c.Cb)()],de.prototype,"compatibilityFunction",void 0),(0,a._)([(0,c.Cb)({readOnly:!0})],de.prototype,"error",void 0),(0,a._)([(0,c.Cb)({readOnly:!0})],de.prototype,"spatialReference",null),(0,a._)([(0,c.Cb)({readOnly:!0})],de.prototype,"state",void 0),(0,a._)([(0,c.Cb)()],de.prototype,"view",void 0),de=(0,a._)([(0,h.j)("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],de);const ue=de;var be=i(76243),fe=i(97862);const ge=d.Z.ofType(ue);let ve=class extends((0,u.p)(b.Z)){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new ge,this.source=new fe.Z,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([(0,o.YP)((()=>"ready"===this.state?this.compatibilityFunction:null),(()=>this._updateItems())),(0,o.on)((()=>this.source?.basemaps),"change",e,{onListenerAdd:e})])}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){if(!this.view.map)return;const t="string"==typeof e?m.default.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const i=t.spatialReference||this.items?.find((e=>this.basemapEquals(t,e.basemap)))?.spatialReference;if(i&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const a=this.view.spatialReference;if((0,f.pC)(i)&&!(0,x.fS)(a,i)&&!(0,v.Up)(this.view.spatialReference,i)&&!(0,v.kR)())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void(0,v.zD)().then((()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=i,this._clearOverride("activeBasemap"))}),(()=>{})).then((()=>{this._loadingProjectionEngine=!1}));this.view.map.basemap=t,this._clearOverride("activeBasemap"),(0,f.pC)(i)&&!(0,x.fS)(this.view.spatialReference,i)&&(this.view.spatialReference=i)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get compatibilityFunction(){return"3d"===this.view?.type?ce:he}set compatibilityFunction(e){(0,f.pC)(e)?this._override("compatibilityFunction",e):this._clearOverride("compatibilityFunction")}castSource(e){return Array.isArray(e)||d.Z.isCollection(e)?new be.Z({basemaps:e}):function(e){return e&&"esri.portal.Portal"===e.declaredClass}(e)?new fe.Z({portal:e}):function(e){return e&&!(e instanceof fe.Z)&&(!!e.portal||!!e.query)}(e)?new fe.Z(e):function(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}(e)?e:null}get state(){return this.view?.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return(0,y.Bj)(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(b.Z.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){const e=this.source?.basemaps,{view:t,compatibilityFunction:i}=this;this.items.removeAll().forEach((e=>e.destroy())),e&&this.items.addMany(e.map((e=>new ue({basemap:e,compatibilityFunction:i,view:t}))))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};(0,a._)([(0,c.Cb)()],ve.prototype,"_loadingProjectionEngine",void 0),(0,a._)([(0,c.Cb)()],ve.prototype,"activeBasemap",null),(0,a._)([(0,c.Cb)()],ve.prototype,"compatibilityFunction",null),(0,a._)([(0,c.Cb)({readOnly:!0,type:ge})],ve.prototype,"items",void 0),(0,a._)([(0,c.Cb)()],ve.prototype,"source",void 0),(0,a._)([(0,g.p)("source")],ve.prototype,"castSource",null),(0,a._)([(0,c.Cb)({readOnly:!0})],ve.prototype,"state",null),(0,a._)([(0,c.Cb)()],ve.prototype,"view",void 0),ve=(0,a._)([(0,h.j)("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],ve);const xe=ve;var ye=i(96919),we=i(78088),ke=i(80532),Ie=i(67005);i(80975);const Ce="esri-basemap-gallery esri-widget esri-widget--panel-height-only",_e="esri-basemap-gallery--source-loading",Se="esri-basemap-gallery__loader",Ee="esri-basemap-gallery__item",De="esri-basemap-gallery__item-container",Te="esri-basemap-gallery__item-title",Ae="esri-basemap-gallery__item-thumbnail",Me="esri-basemap-gallery__item--selected",Le="esri-basemap-gallery__item--error",Oe="esri-widget__content--empty",Re="esri-icon-basemap",ze="esri-disabled",He="esri-widget__loader-animation";let We=class extends p.Z{constructor(e,t){super(e,t),this._handles=new n.Z,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=Re,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new xe}initialize(){const e=this._handles;this.own([(0,o.on)((()=>this.viewModel.items),"change",(t=>{const i="basemap-gallery-item-changes",{added:a,moved:s}=t;e.remove(i),e.add([...a,...s].map((e=>(0,o.YP)((()=>e.state),(()=>this.scheduleRender())))),i),this.scheduleRender()})),e,(0,o.gx)((()=>this.source),(()=>this.viewModel.load()),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return Promise.resolve().then(i.bind(i,89794))}render(){const e="loading"===this.get("source.state"),t=this.disabled||"disabled"===this.get("viewModel.state"),i=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),a={[_e]:e,[ze]:t},s=e?(0,Ie.u)("div",{class:Se,key:"esri-basemap-gallery__loader"}):null,n=e?null:i.length>0?(0,Ie.u)("ul",{class:De,key:"esri-basemap-gallery__item-container",role:"menu"},i):(0,Ie.u)("div",{class:Oe,key:"esri-basemap-gallery__empty-message"},(0,Ie.u)(ye.X6,{level:this.headingLevel},this.messages.noBasemaps));return(0,Ie.u)("div",{class:this.classes(Ce,a)},s,n)}_handleClick(e){const t=e.currentTarget["data-item"];"ready"===t.state&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||(0,s.V)("esri/themes/base/images/basemap-toggle-64.svg"),i=e.get("basemap.title"),a=e.get("basemap.portalItem.snippet"),n=e.get("error.message")||a||i,{viewModel:o}=this,r=this.disabled||"disabled"===o.state||"ready"!==e.state?-1:0,l=o.basemapEquals(e.basemap,this.activeBasemap),c="loading"===o.state,h={[Me]:l,[Le]:"error"===e.state};return(0,Ie.u)("li",{"aria-selected":l.toString(),bind:this,class:this.classes(Ee,h),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:r,title:n},(0,Ie.u)("img",{alt:"",class:Ae,src:t}),(0,Ie.u)("div",{class:Te},i),"loading"===e.state||l&&c?(0,Ie.u)("calcite-scrim",null,(0,Ie.u)("span",{"aria-hidden":"true",role:"presentation",class:He})):null)}};(0,a._)([(0,r.B)("viewModel.activeBasemap")],We.prototype,"activeBasemap",void 0),(0,a._)([(0,c.Cb)()],We.prototype,"disabled",void 0),(0,a._)([(0,c.Cb)()],We.prototype,"headingLevel",void 0),(0,a._)([(0,c.Cb)()],We.prototype,"iconClass",void 0),(0,a._)([(0,c.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],We.prototype,"label",void 0),(0,a._)([(0,c.Cb)(),(0,ke.H)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],We.prototype,"messages",void 0),(0,a._)([(0,r.B)("viewModel.source")],We.prototype,"source",void 0),(0,a._)([(0,r.B)("viewModel.view")],We.prototype,"view",void 0),(0,a._)([(0,c.Cb)()],We.prototype,"viewModel",void 0),(0,a._)([(0,we.h)()],We.prototype,"_handleClick",null),We=(0,a._)([(0,h.j)("esri.widgets.BasemapGallery")],We);const Fe=We},76243:(e,t,i)=>{i.d(t,{Z:()=>p});var a=i(27366),s=i(29479),n=i(85015),o=i(40281),r=i(49861),l=(i(63780),i(93169),i(25243),i(69912));const c=o.Z.ofType(s.default);let h=class extends n.Z{constructor(e){super(e),this.basemaps=new c}get state(){return"ready"}refresh(){}};(0,a._)([(0,r.Cb)({type:c})],h.prototype,"basemaps",void 0),(0,a._)([(0,r.Cb)({readOnly:!0})],h.prototype,"state",null),h=(0,a._)([(0,l.j)("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],h);const p=h},97862:(e,t,i)=>{i.d(t,{Z:()=>w});var a=i(27366),s=i(29479),n=i(40281),o=i(10064),r=i(100),l=i(54472),c=i(32718),h=i(67426),p=i(66978),m=i(94172),d=i(49861),u=(i(63780),i(93169),i(25243),i(69912)),b=i(70032),f=i(76243);const g=n.Z.ofType(s.default),v="esri.widgets.BasemapGallery.support.PortalBasemapsSource",x=c.Z.getLogger(v);let y=class extends(l.Z.LoadableMixin((0,h.v)(f.Z))){constructor(e){super(e),this._handles=new r.Z,this.basemaps=new g,this.filterFunction=null,this.portal=b.Z.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([(0,m.YP)((()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.user,this.query,this.updateBasemapsCallback]),(()=>this.refresh()),m.nn)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return"not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if("ready"!==this.state)return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(i)}catch(i){if((0,p.D_)(i))throw i;x.warn(new o.Z("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&"string"!=typeof e?Object.keys(e).map((t=>`${t}:${e[t]}`)).join(" AND "):e}_updateBasemaps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};(0,a._)([(0,d.Cb)({readOnly:!0,type:g})],y.prototype,"basemaps",void 0),(0,a._)([(0,d.Cb)()],y.prototype,"filterFunction",void 0),(0,a._)([(0,d.Cb)({type:b.Z})],y.prototype,"portal",void 0),(0,a._)([(0,d.Cb)()],y.prototype,"query",void 0),(0,a._)([(0,d.Cb)({readOnly:!0})],y.prototype,"state",null),(0,a._)([(0,d.Cb)()],y.prototype,"updateBasemapsCallback",void 0),y=(0,a._)([(0,u.j)(v)],y);const w=y}}]);
//# sourceMappingURL=5036.6de82512.chunk.js.map