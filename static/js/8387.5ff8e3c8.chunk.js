"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[8387,2463,2170],{28387:(e,t,n)=>{n.r(t),n.d(t,{Select:()=>b,default:()=>P});var r=n(85580),i=n(72791),o=n(9283),a=n(93655),c=n(97426),l=n(52639),s=n(2170);let d,u,f,p,h=0;function y(){u.cancel(),f&&f.remove(),p.removeAll()}function m(e,t,n){p=new a.Z({listMode:"hide"}),e.map.add(p),u=new c.Z({view:e,layer:p,defaultCreateOptions:{mode:"hybrid"}}),d=e.allLayerViews.find((e=>e.layer.title.includes("Property")&&"feature"===e.layer.type));const r=e.map.allLayers.find((e=>e.title.includes("Property")&&"feature"===e.type));return e.whenLayerView(r).then((e=>{d=e})),u.watch("activeTool",(e=>{n(e)})),u.on("create",(n=>{if("start"===n.state&&(p.graphics.removeAll(),f&&f.remove()),"complete"===n.state&&(t(h>0?g(h,n.graphic):n.graphic.geometry),u.create(n.tool),f&&f.remove(),p.graphics.removeAll()),"active"===n.state)if(0===h)x(e,n.graphic.geometry).then((e=>{f&&f.remove(),f=e}));else{const t=g(h,n.graphic);u.layer.removeAll();const r={type:"simple-fill",color:[255,255,0,.2],style:"solid"};u.layer.add(new l.Z({geometry:t,symbol:r})),x(e,t).then((e=>{f&&f.remove(),f=e}))}})),u}function g(e,t){return s.buffer(t.geometry,e,"feet")}function x(e,t){return new Promise(((n,r)=>{d.queryFeatures({geometry:t,outSpatialReference:e.spatialReference}).then((e=>{const t=d.highlight(e.features);n(t)}))}))}function v(e,t){h=""===e.target.value?0:parseInt(e.target.value),t(h)}function A(e,t){e.create(t)}const G={title:"Property Select Tips",tips:[{title:"Long Press to Select",text:"You can now select a property by long pressing on a property on the map.  This can be done at any time, even without having the property select tool active."}]},S=e=>{const t=(0,i.useRef)(!1),[n,r]=(0,i.useState)(!1),[o,a]=(0,i.useState)(""),[c,l]=(0,i.useState)(0),[s,d]=(0,i.useState)(),[u,f]=(0,i.useState)(void 0);(0,i.useEffect)((()=>(t.current||(t.current=!0,d(m(e.view,e.geometrySet,a))),()=>{s&&s.destroy()})),[]),(0,i.useEffect)((()=>{e.selectedProperty&&f(e.selectedProperty)}),[e.selectedProperty]),(0,i.useEffect)((()=>{s&&e.selectDismissed&&(s.cancel(),a(""))}),[e.selectDismissed]),(0,i.useEffect)((()=>{r(e.isActive),e.isActive||y()}),[e.isActive]);const p=(0,i.useCallback)((t=>{e.toolDismissed(),y()}),[]),h=(0,i.useCallback)((t=>{e.showTips(G)}),[]);return{isActive:n,selectedTool:o,setSelectedTool:a,sketchVm:s,distance:c,setDistance:l,selectedProperty:u,toolDismissed:p,tipsClicked:h}};var w=n(80184);const b=e=>{const{isActive:t,selectedTool:n,setSelectedTool:i,sketchVm:a,distance:c,setDistance:l,selectedProperty:d,toolDismissed:u,tipsClicked:f}=S(e);return(0,w.jsxs)(r.N$,{id:"select-panel",heading:"Select","data-panel":"select",hidden:!t,closed:!t||void 0,closable:!0,onCalcitePanelClose:u,children:[(0,w.jsx)(r.G1,{id:"tip",icon:"lightbulb",text:"Tips",slot:"header-actions-end",onClick:f}),(0,w.jsx)(r.G1,{id:"collapseTool",icon:"chevron-up",text:"",slot:"header-actions-end",onClick:o.F$}),(0,w.jsx)(r.$A,{label:"Show Tip",referenceElement:"tip",children:"Show Tip"}),(0,w.jsx)(r.$A,{label:"Collapse",referenceElement:"collapseTool",children:"Collapse"}),(0,w.jsxs)("div",{id:"select-tools",children:[(0,w.jsxs)("div",{className:"select-container",children:[(0,w.jsx)(r.G1,{id:"selectPoint",icon:"pin",text:"Point",active:"point"===n||void 0,onClick:()=>{i("point"),a&&A(a,"point")}}),(0,w.jsx)(r.$A,{label:"Select by Point",referenceElement:"selectPoint",children:"Select by Point"}),(0,w.jsx)(r.G1,{id:"selectLine",icon:"line",text:"Line",active:"line"===n||void 0,onClick:()=>{i("line"),a&&A(a,"polyline")}}),(0,w.jsx)(r.$A,{label:"Select by Line",referenceElement:"selectLine",children:"Select by Line"}),(0,w.jsx)(r.G1,{id:"selectPolygon",icon:"polygon",text:"Polygon",active:"polygon"===n||void 0,onClick:()=>{i("polygon"),a&&A(a,"polygon")}}),(0,w.jsx)(r.$A,{label:"Select by Polygon",referenceElement:"selectPolygon",children:"Select by Polygon"}),(0,w.jsx)(r.G1,{id:"selectMultipoint",icon:"pins",text:"Multi-Point",active:"multipoint"===n||void 0,onClick:()=>{i("multipoint"),a&&A(a,"multipoint")}}),(0,w.jsx)(r.$A,{label:"Select by Multi-Point",referenceElement:"selectMultipoint",children:"Select by Multi-point"}),(0,w.jsx)(r.G1,{id:"clearSelection",icon:"trash",text:"Clear",onClick:()=>{e.geometrySet(void 0)}}),(0,w.jsx)(r.$A,{label:"Clear Selection",referenceElement:"clearSelection",children:"Clear selection"})]}),(0,w.jsxs)("div",{className:"buffer-container",children:[(0,w.jsxs)(r.ZK,{children:["Buffer Distance",(0,w.jsx)(r.e,{type:"number",suffixText:"feet",step:50,min:0,max:5280,value:c.toString(),clearable:!0,onCalciteInputChange:e=>v(e,l)})]}),(0,w.jsx)(r.ln,{disabled:void 0===d||void 0,hidden:c<=0,width:"full",onClick:()=>function(e,t,n){n(s.buffer(e.geometry,t,"feet"))}(d,c,e.geometrySet),children:"Buffer Property"})]})]})]})},P=i.memo(b)},92463:(e,t,n)=>{n.r(t),n.d(t,{hydratedAdapter:()=>l});var r=n(53866),i=n(77577),o=n(585),a=n(80885),c=n(29909);const l={convertToGEGeometry:function(e,t){if(null==t)return null;let n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),a=new o.Z({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return r&&(a.z=e.getPointZ(t)),i&&(a.m=e.getPointM(t)),a.cache._geVersion=t,a},exportPolygon:function(e,t,n){const r=new a.Z({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportPolyline:function(e,t,n){const r=new c.Z({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,n){const r=new i.Z({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return r.cache._geVersion=t,r},exportExtent:function(e,t,n){const i=e.hasZ(t),o=e.hasM(t),a=new r.Z({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(i){const n=e.getZExtent(t);a.zmin=n.vmin,a.zmax=n.vmax}if(o){const n=e.getMExtent(t);a.mmin=n.vmin,a.mmax=n.vmax}return a.cache._geVersion=t,a}}},2170:(e,t,n)=>{n.r(t),n.d(t,{buffer:()=>T,changeDefaultSpatialReferenceTolerance:()=>H,clearDefaultSpatialReferenceTolerance:()=>J,clip:()=>c,contains:()=>s,convexHull:()=>G,crosses:()=>d,cut:()=>l,densify:()=>$,difference:()=>S,disjoint:()=>m,distance:()=>u,equals:()=>f,extendedSpatialReferenceInfo:()=>a,flipHorizontal:()=>V,flipVertical:()=>D,generalize:()=>L,geodesicArea:()=>I,geodesicBuffer:()=>j,geodesicDensify:()=>_,geodesicLength:()=>O,intersect:()=>b,intersectLinesToPoints:()=>B,intersects:()=>p,isSimple:()=>v,nearestCoordinate:()=>R,nearestVertex:()=>M,nearestVertices:()=>Z,offset:()=>C,overlaps:()=>g,planarArea:()=>z,planarLength:()=>N,relate:()=>x,rotate:()=>E,simplify:()=>A,symmetricDifference:()=>w,touches:()=>h,union:()=>P,within:()=>y});var r=n(99058),i=n(92463);function o(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function a(e){return r.G.extendedSpatialReferenceInfo(e)}function c(e,t){return r.G.clip(i.hydratedAdapter,o(e),e,t)}function l(e,t){return r.G.cut(i.hydratedAdapter,o(e),e,t)}function s(e,t){return r.G.contains(i.hydratedAdapter,o(e),e,t)}function d(e,t){return r.G.crosses(i.hydratedAdapter,o(e),e,t)}function u(e,t,n){return r.G.distance(i.hydratedAdapter,o(e),e,t,n)}function f(e,t){return r.G.equals(i.hydratedAdapter,o(e),e,t)}function p(e,t){return r.G.intersects(i.hydratedAdapter,o(e),e,t)}function h(e,t){return r.G.touches(i.hydratedAdapter,o(e),e,t)}function y(e,t){return r.G.within(i.hydratedAdapter,o(e),e,t)}function m(e,t){return r.G.disjoint(i.hydratedAdapter,o(e),e,t)}function g(e,t){return r.G.overlaps(i.hydratedAdapter,o(e),e,t)}function x(e,t,n){return r.G.relate(i.hydratedAdapter,o(e),e,t,n)}function v(e){return r.G.isSimple(i.hydratedAdapter,o(e),e)}function A(e){return r.G.simplify(i.hydratedAdapter,o(e),e)}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.G.convexHull(i.hydratedAdapter,o(e),e,t)}function S(e,t){return r.G.difference(i.hydratedAdapter,o(e),e,t)}function w(e,t){return r.G.symmetricDifference(i.hydratedAdapter,o(e),e,t)}function b(e,t){return r.G.intersect(i.hydratedAdapter,o(e),e,t)}function P(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.G.union(i.hydratedAdapter,o(e),e,t)}function C(e,t,n,a,c,l){return r.G.offset(i.hydratedAdapter,o(e),e,t,n,a,c,l)}function T(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.G.buffer(i.hydratedAdapter,o(e),e,t,n,a)}function j(e,t,n,a,c,l){return r.G.geodesicBuffer(i.hydratedAdapter,o(e),e,t,n,a,c,l)}function R(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r.G.nearestCoordinate(i.hydratedAdapter,o(e),e,t,n)}function M(e,t){return r.G.nearestVertex(i.hydratedAdapter,o(e),e,t)}function Z(e,t,n,a){return r.G.nearestVertices(i.hydratedAdapter,o(e),e,t,n,a)}function k(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent?.center??null:null}function E(e,t,n){if(null==e)throw new Y;const i=e.spatialReference;if(null==(n=n??k(e)))throw new Y;const o=e.constructor.fromJSON(r.G.rotate(e,t,n));return o.spatialReference=i,o}function V(e,t){if(null==e)throw new Y;const n=e.spatialReference;if(null==(t=t??k(e)))throw new Y;const i=e.constructor.fromJSON(r.G.flipHorizontal(e,t));return i.spatialReference=n,i}function D(e,t){if(null==e)throw new Y;const n=e.spatialReference;if(null==(t=t??k(e)))throw new Y;const i=e.constructor.fromJSON(r.G.flipVertical(e,t));return i.spatialReference=n,i}function L(e,t,n,a){return r.G.generalize(i.hydratedAdapter,o(e),e,t,n,a)}function $(e,t,n){return r.G.densify(i.hydratedAdapter,o(e),e,t,n)}function _(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r.G.geodesicDensify(i.hydratedAdapter,o(e),e,t,n,a)}function z(e,t){return r.G.planarArea(i.hydratedAdapter,o(e),e,t)}function N(e,t){return r.G.planarLength(i.hydratedAdapter,o(e),e,t)}function I(e,t,n){return r.G.geodesicArea(i.hydratedAdapter,o(e),e,t,n)}function O(e,t,n){return r.G.geodesicLength(i.hydratedAdapter,o(e),e,t,n)}function B(e,t){return r.G.intersectLinesToPoints(i.hydratedAdapter,o(e),e,t)}function H(e,t){r.G.changeDefaultSpatialReferenceTolerance(e,t)}function J(e){r.G.clearDefaultSpatialReferenceTolerance(e)}class Y extends Error{constructor(){super("Illegal Argument Exception")}}}}]);
//# sourceMappingURL=8387.5ff8e3c8.chunk.js.map