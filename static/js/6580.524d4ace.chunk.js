"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[6580,2463,2170],{46580:(e,t,n)=>{n.r(t),n.d(t,{Select:()=>P,default:()=>S});var r=n(85580),i=n(72791),a=n(9283),o=n(93655),c=n(97426),s=n(52639),l=n(2170);let d,u,f,p,h=0;function y(){u.cancel(),f&&f.remove(),p.removeAll()}function m(e,t,n){p=new o.Z({listMode:"hide"}),e.map.add(p),u=new c.Z({view:e,layer:p,defaultCreateOptions:{mode:"hybrid"}}),d=e.allLayerViews.find((e=>e.layer.title.includes("Property")&&"feature"===e.layer.type));const r=e.map.allLayers.find((e=>e.title.includes("Property")&&"feature"===e.type));return e.whenLayerView(r).then((e=>{d=e})),u.watch("activeTool",(e=>{n(e)})),u.on("create",(n=>{if("start"===n.state&&(p.graphics.removeAll(),f&&f.remove()),"complete"===n.state&&(t(h>0?g(h,n.graphic):n.graphic.geometry),u.create(n.tool),f&&f.remove(),p.graphics.removeAll()),"active"===n.state)if(0===h)v(e,n.graphic.geometry).then((e=>{f&&f.remove(),f=e}));else{const t=g(h,n.graphic);u.layer.removeAll();const r={type:"simple-fill",color:[255,255,0,.2],style:"solid"};u.layer.add(new s.Z({geometry:t,symbol:r})),v(e,t).then((e=>{f&&f.remove(),f=e}))}})),u}function g(e,t){return l.buffer(t.geometry,e,"feet")}function v(e,t){return new Promise(((n,r)=>{d.queryFeatures({geometry:t,outSpatialReference:e.spatialReference}).then((e=>{const t=d.highlight(e.features);n(t)}))}))}function x(e,t){h=""===e.target.value?0:parseInt(e.target.value),t(h)}function A(e,t){e.create(t)}const G=e=>{const t=(0,i.useRef)(!1),[n,r]=(0,i.useState)(!1),[a,o]=(0,i.useState)(""),[c,s]=(0,i.useState)(0),[l,d]=(0,i.useState)(),[u,f]=(0,i.useState)(void 0);(0,i.useEffect)((()=>(t.current||(t.current=!0,d(m(e.view,e.geometrySet,o))),()=>{l&&l.destroy()})),[]),(0,i.useEffect)((()=>{e.selectedProperty&&f(e.selectedProperty)}),[e.selectedProperty]),(0,i.useEffect)((()=>{l&&e.selectDismissed&&(l.cancel(),o(""))}),[e.selectDismissed]),(0,i.useEffect)((()=>{r(e.isActive)}),[e.isActive]);const p=(0,i.useCallback)((t=>{e.toolDismissed(),y()}),[]);return{isActive:n,selectedTool:a,setSelectedTool:o,sketchVm:l,distance:c,setDistance:s,selectedProperty:u,toolDismissed:p}};var w=n(80184);const P=e=>{const{isActive:t,selectedTool:n,setSelectedTool:i,sketchVm:o,distance:c,setDistance:s,selectedProperty:d,toolDismissed:u}=G(e);return(0,w.jsxs)(r.N$,{id:"select-panel",heading:"Select","data-panel":"select",hidden:!t,closed:!t||void 0,dismissed:!t||void 0,dismissible:!0,onCalcitePanelDismiss:u,children:[(0,w.jsx)(r.G1,{icon:"chevron-up",text:"",slot:"header-actions-end",onClick:a.F$}),(0,w.jsxs)("div",{id:"select-tools",children:[(0,w.jsxs)("div",{className:"select-container",children:[(0,w.jsx)(r.G1,{icon:"pin",text:"Point",active:"point"===n||void 0,onClick:()=>{i("point"),o&&A(o,"point")}}),(0,w.jsx)(r.G1,{icon:"line",text:"Line",active:"line"===n||void 0,onClick:()=>{i("line"),o&&A(o,"polyline")}}),(0,w.jsx)(r.G1,{icon:"polygon",text:"Polygon",active:"polygon"===n||void 0,onClick:()=>{i("polygon"),o&&A(o,"polygon")}}),(0,w.jsx)(r.G1,{icon:"pins",text:"Multi-Point",active:"multipoint"===n||void 0,onClick:()=>{i("multipoint"),o&&A(o,"multipoint")}}),(0,w.jsx)(r.G1,{icon:"trash",text:"Clear"})]}),(0,w.jsxs)("div",{className:"buffer-container",children:[(0,w.jsxs)(r.ZK,{children:["Buffer Distance",(0,w.jsx)(r.e,{type:"number",suffixText:"feet",step:50,min:0,max:5280,value:c.toString(),clearable:!0,onCalciteInputChange:e=>x(e,s)})]}),(0,w.jsx)(r.ln,{disabled:void 0===d||void 0,hidden:c<=0,width:"full",onClick:()=>function(e,t,n){n(l.buffer(e.geometry,t,"feet"))}(d,c,e.geometrySet),children:"Buffer Property"})]})]})]})},S=i.memo(P)},92463:(e,t,n)=>{n.r(t),n.d(t,{hydratedAdapter:()=>s});var r=n(53866),i=n(77577),a=n(585),o=n(80885),c=n(29909);const s={convertToGEGeometry:function(e,t){if(null==t)return null;let n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),o=new a.Z({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return r&&(o.z=e.getPointZ(t)),i&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,n){const r=new o.Z({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportPolyline:function(e,t,n){const r=new c.Z({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,n){const r=new i.Z({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return r.cache._geVersion=t,r},exportExtent:function(e,t,n){const i=e.hasZ(t),a=e.hasM(t),o=new r.Z({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(i){const n=e.getZExtent(t);o.zmin=n.vmin,o.zmax=n.vmax}if(a){const n=e.getMExtent(t);o.mmin=n.vmin,o.mmax=n.vmax}return o.cache._geVersion=t,o}}},2170:(e,t,n)=>{n.r(t),n.d(t,{buffer:()=>D,changeDefaultSpatialReferenceTolerance:()=>J,clearDefaultSpatialReferenceTolerance:()=>q,clip:()=>c,contains:()=>l,convexHull:()=>G,crosses:()=>d,cut:()=>s,densify:()=>_,difference:()=>w,disjoint:()=>m,distance:()=>u,equals:()=>f,extendedSpatialReferenceInfo:()=>o,flipHorizontal:()=>k,flipVertical:()=>E,generalize:()=>L,geodesicArea:()=>O,geodesicBuffer:()=>M,geodesicDensify:()=>z,geodesicLength:()=>B,intersect:()=>S,intersectLinesToPoints:()=>H,intersects:()=>p,isSimple:()=>x,nearestCoordinate:()=>V,nearestVertex:()=>b,nearestVertices:()=>C,offset:()=>Z,overlaps:()=>g,planarArea:()=>N,planarLength:()=>I,relate:()=>v,rotate:()=>j,simplify:()=>A,symmetricDifference:()=>P,touches:()=>h,union:()=>R,within:()=>y});var r=n(99058),i=n(92463);function a(e){return Array.isArray(e)?e[0].spatialReference:e&&e.spatialReference}function o(e){return r.G.extendedSpatialReferenceInfo(e)}function c(e,t){return r.G.clip(i.hydratedAdapter,a(e),e,t)}function s(e,t){return r.G.cut(i.hydratedAdapter,a(e),e,t)}function l(e,t){return r.G.contains(i.hydratedAdapter,a(e),e,t)}function d(e,t){return r.G.crosses(i.hydratedAdapter,a(e),e,t)}function u(e,t,n){return r.G.distance(i.hydratedAdapter,a(e),e,t,n)}function f(e,t){return r.G.equals(i.hydratedAdapter,a(e),e,t)}function p(e,t){return r.G.intersects(i.hydratedAdapter,a(e),e,t)}function h(e,t){return r.G.touches(i.hydratedAdapter,a(e),e,t)}function y(e,t){return r.G.within(i.hydratedAdapter,a(e),e,t)}function m(e,t){return r.G.disjoint(i.hydratedAdapter,a(e),e,t)}function g(e,t){return r.G.overlaps(i.hydratedAdapter,a(e),e,t)}function v(e,t,n){return r.G.relate(i.hydratedAdapter,a(e),e,t,n)}function x(e){return r.G.isSimple(i.hydratedAdapter,a(e),e)}function A(e){return r.G.simplify(i.hydratedAdapter,a(e),e)}function G(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.G.convexHull(i.hydratedAdapter,a(e),e,t)}function w(e,t){return r.G.difference(i.hydratedAdapter,a(e),e,t)}function P(e,t){return r.G.symmetricDifference(i.hydratedAdapter,a(e),e,t)}function S(e,t){return r.G.intersect(i.hydratedAdapter,a(e),e,t)}function R(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return r.G.union(i.hydratedAdapter,a(e),e,t)}function Z(e,t,n,o,c,s){return r.G.offset(i.hydratedAdapter,a(e),e,t,n,o,c,s)}function D(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return r.G.buffer(i.hydratedAdapter,a(e),e,t,n,o)}function M(e,t,n,o,c,s){return r.G.geodesicBuffer(i.hydratedAdapter,a(e),e,t,n,o,c,s)}function V(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r.G.nearestCoordinate(i.hydratedAdapter,a(e),e,t,n)}function b(e,t){return r.G.nearestVertex(i.hydratedAdapter,a(e),e,t)}function C(e,t,n,o){return r.G.nearestVertices(i.hydratedAdapter,a(e),e,t,n,o)}function T(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent?.center??null:null}function j(e,t,n){if(null==e)throw new X;const i=e.spatialReference;if(null==(n=n??T(e)))throw new X;const a=e.constructor.fromJSON(r.G.rotate(e,t,n));return a.spatialReference=i,a}function k(e,t){if(null==e)throw new X;const n=e.spatialReference;if(null==(t=t??T(e)))throw new X;const i=e.constructor.fromJSON(r.G.flipHorizontal(e,t));return i.spatialReference=n,i}function E(e,t){if(null==e)throw new X;const n=e.spatialReference;if(null==(t=t??T(e)))throw new X;const i=e.constructor.fromJSON(r.G.flipVertical(e,t));return i.spatialReference=n,i}function L(e,t,n,o){return r.G.generalize(i.hydratedAdapter,a(e),e,t,n,o)}function _(e,t,n){return r.G.densify(i.hydratedAdapter,a(e),e,t,n)}function z(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return r.G.geodesicDensify(i.hydratedAdapter,a(e),e,t,n,o)}function N(e,t){return r.G.planarArea(i.hydratedAdapter,a(e),e,t)}function I(e,t){return r.G.planarLength(i.hydratedAdapter,a(e),e,t)}function O(e,t,n){return r.G.geodesicArea(i.hydratedAdapter,a(e),e,t,n)}function B(e,t,n){return r.G.geodesicLength(i.hydratedAdapter,a(e),e,t,n)}function H(e,t){return r.G.intersectLinesToPoints(i.hydratedAdapter,a(e),e,t)}function J(e,t){r.G.changeDefaultSpatialReferenceTolerance(e,t)}function q(e){r.G.clearDefaultSpatialReferenceTolerance(e)}class X extends Error{constructor(){super("Illegal Argument Exception")}}}}]);
//# sourceMappingURL=6580.524d4ace.chunk.js.map