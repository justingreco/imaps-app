"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[1608],{31608:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var l=a(85580),s=a(72791),i=a(76200),o=a(78952),n=a(97913),r=a(6764),c=a(79422),p=a(97064),u=a(22824);const x={results:[{paramName:"Output_JSON",dataType:"GPString",value:[{layoutTemplate:"85x11_landscape",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[10,6.7],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"85x11_landscape_attributes",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"85x11_landscape_attributes_legend",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"85x11_landscape_legend",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[10,6.7],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"85x11_portrait",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"85x11_portrait_attributes",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"},{PropertyInfo:""}]}},{layoutTemplate:"85x11_portrait_attributes_legend",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"},{PropertyInfo:""}]}},{layoutTemplate:"85x11_portrait_legend",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"11x17_landscape",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[16,9],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_landscape_attributes",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[13,10],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_landscape_attributes_legend",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[13,10],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_landscape_legend",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[16,9],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_portrait",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_portrait_attributes",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"},{PropertyInfo:" "}]}},{layoutTemplate:"11x17_portrait_attributes_legend",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"},{PropertyInfo:" "}]}},{layoutTemplate:"11x17_portrait_legend",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"24x36_landscape",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[35,21],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_landscape_attributes",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[28,23],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:"Text"},{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_landscape_attributes_legend",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[28,23],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:"Text"},{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_landscape_legend",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[35,21],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_portrait",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_portrait_attributes",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"24x36_portrait_attributes_legend",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"24x36_portrait_legend",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[47,32.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape_attributes",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[38,35],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape_attributes_legend",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[38,35],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape_legend",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[47,32.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_portrait",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_portrait_attributes",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!1,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"36x48_portrait_attributes_legend",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!1,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"36x48_portrait_legend",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}}]}],messages:[]},h=e=>{const t=Math.round(600*e/564.248588);return t<=75?75:t>75&&t<=150?150:t>150&&t<=300?300:t>300&&t<=600?600:t>600&&t<=1200?1200:t>1200&&t<=2400?2400:t>2400&&t<=4800?4800:t>4800&&t<=9600?9600:t>9600&&t<=19200?19200:t>19200&&t<=38400?38400:t>38400&&t<=76800?76800:t>76800&&t<=153600?153600:t>153600&&t<=307200?307200:t>307200&&t<=614400?614400:t>614400&&t<=1228800?1228800:0},T=e=>{var t;const a=null===(t=u.Z.create().lods.filter((e=>e.scale>=300&&e.scale<614400)).map((e=>{const t=h(e.scale);return{scale:t,label:`1" = ${(t/12).toLocaleString("en")}'`}})))||void 0===t?void 0:t.reverse();return a.push({scale:"custom",label:"User Defined"}),a};const S=(e,t,a,l)=>{const s=[];if(s.push({Scale:(t/12).toString()}),e<24?(s.push({HalfScale:(t/12/2).toString()}),s.push({"2xScale":t/12*2+" ft"})):e<36?(s.push({"2xScale":t/12*2}),s.push({"4xScale":t/12*4+" ft"})):(s.push({"2xScale":t/12*2}),s.push({"4xScale":t/12*4}),s.push({"6xScale":t/12*6+" ft"})),a){const e=(e=>{let t="";return e.layer.popupTemplate.fieldInfos.forEach((a=>{if(!["OBJECTID","PARCEL_PK","PARCEL_STATUS"].includes(a.fieldName)&&e.getAttribute(a.fieldName)&&null!==e.getAttribute(a.fieldName))if(a.fieldName.includes("DATE")){const l=new Date(e.getAttribute(a.fieldName));t+=`${a.label}: ${l.getUTCMonth()+1}/${l.getUTCDate()}/${l.getUTCFullYear()}\n`}else a.fieldName.includes("PRICE")||a.fieldName.includes("VAL")?t+=`${a.label}: $${e.getAttribute(a.fieldName)}\n`:t+=`${a.label}: ${e.getAttribute(a.fieldName)}\n`})),t})(l);s.push({PropertyInfo:e})}return s},d=(e,t,a,l,s,i,o,n,r,p,u,x,T,d)=>{if(e){const g=function(e,t,a,l){let s="current"===e?t:a;return"custom"===a&&l&&(s=12*l),h(s)}(a,null===e||void 0===e?void 0:e.scale,l,s?parseInt(s.value):void 0),y=S(i.size,g,p,n),f=function(e,t,a){let l=e.template?e.template.replace(".",""):JSON.parse(e).template.replace(".","");return t&&(l+="_attributes"),a&&(l+="_legend"),l}(i,p,u),b=((e,t,a,l,s,i)=>new c.Z({attributionVisible:!0,outScale:e,showLabels:!0,format:t,scalePreserved:!0,exportOptions:{dpi:200},layoutOptions:{titleText:a,scalebarUnit:"Feet",customTextElements:l,legendLayers:[]},layout:i}))(g,o,r,y,0,f),C={title:r,loading:!0,submitted:(new Date).getTime().toString(),href:null};d([...T,C]),x.current=[...x.current,C];const _=e.scale;setTimeout((()=>{m(t,b,e,_,o).then((e=>{setTimeout((()=>{const t=x.current.indexOf(C);x.current[t]={...x.current[t],url:e.url,loading:!1},d([...x.current])}))})).catch((e=>{console.log(e);const t=x.current.indexOf(C);x.current[t]={...x.current[t],error:!0,loading:!1},d([...x.current])}))}),1e3)}},m=(e,t,a,l,s)=>(t.format=s,new Promise(((l,s)=>{n.ht(e,new r.Z({template:t,view:a,outSpatialReference:new o.Z({wkid:3632})}),{timeout:12e4,headers:{"Content-Type":"application/json;charset=UTF-8"}}).then((e=>{l(e)})).catch((e=>{s(e)}))})));var g=a(9283);const y={title:"Print Tips",tips:[]},f=e=>{const t=(0,s.useRef)(!1),[a,l]=(0,s.useState)(!1),o=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(null),h=(0,s.useRef)([]),[T,S]=(0,s.useState)([]),[d,m]=(0,s.useState)([]),[g,f]=(0,s.useState)("current"),[b,C]=(0,s.useState)(),[_,z]=(0,s.useState)(),[v,w]=(0,s.useState)(),[I,j]=(0,s.useState)(),[E,H]=(0,s.useState)([]),A=(0,s.useRef)(null);(0,s.useEffect)((()=>{var a,l,s;t.current||(t.current=!0,a=e.view,l=null===A||void 0===A?void 0:A.current,s=e.exportUrl,new p.Z({printServiceUrl:s,container:l,view:a}),new Promise((e=>{const t=[],a=[];x.results[0].value.forEach((e=>{const l=e.pageSize[0],s=e.pageSize[1];let i=`${l}"x${s}"`,o="Portrait",n=l,r=`${l}x${s}_${o.toLowerCase()}`;l>s&&(i=`${s}"x${l}"`,o="Landscape",r=`${s}x${l}_${o.toLowerCase()}`,n=s),i+=` ${o}`;const c={label:i,template:r,size:n};a.includes(c.template)||(t.push(c),a.push(c.template))})),t.sort(((e,t)=>e.size-t.size)),e(t)})).then((e=>{S(e),w(e[0])})),(e=>new Promise(((t,a)=>(0,i.default)(e,{query:{f:"json"}}).then((e=>{e.data.parameters.forEach((e=>{"Format"===e.name&&t(e.choiceList)}))})).catch((e=>{a(e)})))))(e.exportUrl).then((e=>{m(e),j(e[0])})))}),[]);const L=(0,s.useCallback)((t=>{e.showTips(y)}),[]);return(0,s.useEffect)((()=>{z(e.selectedProperty)}),[e.selectedProperty]),(0,s.useEffect)((()=>{l(e.isActive)}),[e.isActive]),{isActive:a,title:u,setSelectedLayout:w,layouts:T,selectedFormat:I,setSelectedFormat:j,formats:d,setScaleType:f,scaleType:g,customScaleSelect:o,setCustomScale:C,customScale:b,userDefined:c,selectedProperty:_,selectedLayout:v,attributes:n,legend:r,setJobs:H,jobs:E,jobRef:h,tipsClicked:L,printRef:A}};var b=a(80184);function C(e){const{isActive:t,title:a,setSelectedLayout:i,layouts:o,selectedFormat:n,setSelectedFormat:r,formats:c,setScaleType:p,scaleType:u,customScaleSelect:x,setCustomScale:h,customScale:S,userDefined:m,selectedProperty:y,selectedLayout:C,attributes:_,legend:z,setJobs:v,jobs:w,jobRef:I,tipsClicked:j,printRef:E}=f(e),H=(0,s.useCallback)((t=>{e.toolDismissed()}),[]);return(0,b.jsxs)(l.N$,{id:"print-panel",heading:"Print","data-panel":"print",hidden:!t,closed:!t||void 0,dismissed:!t||void 0,dismissible:!0,onCalcitePanelDismiss:H,children:[(0,b.jsx)(l.G1,{id:"tip",icon:"lightbulb",text:"Tips",slot:"header-actions-end",onClick:j}),(0,b.jsx)(l.G1,{id:"collapseTool",icon:"chevron-up",text:"",slot:"header-actions-end",onClick:g.F$}),(0,b.jsx)(l.$A,{label:"Show Tip",referenceElement:"tip",children:"Show Tip"}),(0,b.jsx)(l.$A,{label:"Collapse",referenceElement:"collapseTool",children:"Collapse"}),(0,b.jsx)("div",{ref:E}),(0,b.jsxs)("div",{id:"print-container",children:[(0,b.jsxs)(l.ZK,{children:["Title",(0,b.jsx)(l.e,{ref:a,maxLength:50})]}),(0,b.jsxs)(l.ZK,{children:["Page size",(0,b.jsx)(l.ko,{label:"",onCalciteSelectChange:e=>i(e.target.selectedOption.value),children:o.map(((e,t)=>(0,b.jsx)(l.GB,{label:e.label,value:JSON.stringify(e)},t)))})]}),(0,b.jsxs)(l.ZK,{children:["File format",(0,b.jsx)(l.ko,{label:"",onCalciteSelectChange:e=>r(e.target.selectedOption.value),children:c.map(((e,t)=>(0,b.jsx)(l.GB,{label:e,value:e},t)))})]}),(0,b.jsxs)(l.vb,{name:"scale-radio",onCalciteRadioButtonGroupChange:e=>{p(e.detail)},children:[(0,b.jsxs)(l.ZK,{layout:"inline",children:[(0,b.jsx)(l.xG,{checked:"current"===u||void 0,value:"current"}),"Current Scale"]}),(0,b.jsxs)(l.ZK,{layout:"inline",children:[(0,b.jsx)(l.xG,{checked:"custom"===u||void 0,value:"custom"}),"Custom Scale"]})]}),"custom"===u&&(0,b.jsxs)(l.ZK,{children:["Scale",(0,b.jsx)(l.ko,{ref:x,label:"",onCalciteSelectChange:e=>h(e.target.selectedOption.value),children:(null===e||void 0===e?void 0:e.view)&&T(null===e||void 0===e||e.view).map(((e,t)=>(0,b.jsx)(l.GB,{label:e.label,value:e.scale},t)))})]}),"custom"===u&&"custom"===S&&(0,b.jsx)(l.e,{ref:m,type:"number",prefixText:'1" = ',suffixText:"'",min:1,max:5e4}),(0,b.jsx)("br",{}),y&&(0,b.jsxs)(l.ZK,{layout:"inline",children:[(0,b.jsx)(l.xV,{ref:_,value:"attributes"}),"Include attributes?"]}),(0,b.jsxs)(l.ZK,{layout:"inline",children:[(0,b.jsx)(l.xV,{ref:z,value:"legend"}),"Include Legend?"]}),(0,b.jsxs)(l.ZK,{layout:"inline",children:[(0,b.jsx)(l.xV,{value:"showFrame"}),"Show map frame?"]}),(0,b.jsx)(l.ln,{width:"full",onClick:()=>{var t,l,s,i;d(e.view,e.exportUrl,u,S,null===m||void 0===m||null===(t=m.current)||void 0===t?void 0:t.value,C,n,y,null===(l=a.current)||void 0===l?void 0:l.value,null===(s=_.current)||void 0===s?void 0:s.checked,null===(i=z.current)||void 0===i?void 0:i.checked,I,w,v)},children:"Export"}),(0,b.jsx)("hr",{}),(0,b.jsx)("h4",{children:"Exported files"}),w.length<=0&&(0,b.jsx)("p",{children:"Your exported files will appear here"}),(0,b.jsx)("div",{id:"printJobs",children:w.map((e=>(0,b.jsxs)("div",{className:"print-job",children:[e.loading&&(0,b.jsxs)("div",{children:[(0,b.jsx)(l.Eg,{scale:"s",inline:!0,active:!0,label:""}),(0,b.jsx)("span",{className:"loader-text",children:`${""!==e.title?e.title:"untitled"}`})]}),e.url&&!e.loading&&(0,b.jsxs)("div",{children:[(0,b.jsx)(l.g$,{target:"_blank","icon-start":"download",href:e.url,children:`${""!==e.title?e.title:"untitled"}`}),(0,b.jsx)(l.ln,{appearance:"transparent","icon-start":"x",scale:"s",onClick:()=>{I.current=w.filter((t=>t.title!==e.title)),v(w.filter((t=>t!==e)))}})]})]},`printjob_${e.submitted}`)))})]})]})}const _=s.memo(C)}}]);
//# sourceMappingURL=1608.95cbd09b.chunk.js.map