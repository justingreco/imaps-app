"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[8682],{78682:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var l=a(85580),s=a(72791),i=a(76200),o=a(78952),n=a(29686),r=a(62920),c=a(6764),u=a(79422),p=a(22824);const x={results:[{paramName:"Output_JSON",dataType:"GPString",value:[{layoutTemplate:"85x11_landscape",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[10,6.7],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"85x11_landscape_attributes",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"85x11_landscape_attributes_legend",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"85x11_landscape_legend",pageSize:[11,8.5],pageUnits:"INCH",webMapFrameSize:[10,6.7],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"85x11_portrait",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"85x11_portrait_attributes",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"},{PropertyInfo:""}]}},{layoutTemplate:"85x11_portrait_attributes_legend",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"},{PropertyInfo:""}]}},{layoutTemplate:"85x11_portrait_legend",pageSize:[8.5,11],pageUnits:"INCH",webMapFrameSize:[7.5,7.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"100"},{"2xScale":"200"},{HalfScale:"50"}]}},{layoutTemplate:"11x17_landscape",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[16,9],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_landscape_attributes",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[13,10],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_landscape_attributes_legend",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[13,10],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_landscape_legend",pageSize:[17,11],pageUnits:"INCH",webMapFrameSize:[16,9],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_portrait",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"11x17_portrait_attributes",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"},{PropertyInfo:" "}]}},{layoutTemplate:"11x17_portrait_attributes_legend",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"},{PropertyInfo:" "}]}},{layoutTemplate:"11x17_portrait_legend",pageSize:[11,17],pageUnits:"INCH",webMapFrameSize:[10,13],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{Scale:"800"},{"2xScale":"1,600"},{HalfScale:"400"}]}},{layoutTemplate:"24x36_landscape",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[35,21],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_landscape_attributes",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[28,23],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:"Text"},{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_landscape_attributes_legend",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[28,23],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:"Text"},{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_landscape_legend",pageSize:[36,24],pageUnits:"INCH",webMapFrameSize:[35,21],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_portrait",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"24x36_portrait_attributes",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"24x36_portrait_attributes_legend",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"24x36_portrait_legend",pageSize:[24,36],pageUnits:"INCH",webMapFrameSize:[23,29],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[47,32.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape_attributes",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[38,35],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape_attributes_legend",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[38,35],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{PropertyInfo:" "},{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_landscape_legend",pageSize:[48,36],pageUnits:"INCH",webMapFrameSize:[47,32.5],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_portrait",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}},{layoutTemplate:"36x48_portrait_attributes",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!1,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"36x48_portrait_attributes_legend",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!1,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!1,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"},{PropertyInfo:" "}]}},{layoutTemplate:"36x48_portrait_legend",pageSize:[36,48],pageUnits:"INCH",webMapFrameSize:[35,39],layoutOptions:{hasTitleText:!0,hasAuthorText:!1,hasCopyrightText:!1,hasLegend:!0,customTextElements:[{"2xScale":"200"},{"4xScale":"400"},{"6xScale":"600"},{Scale:"100"}]}}]}],messages:[]},h=e=>{const t=Math.round(600*e/564.248588);return t<=75?75:t>75&&t<=150?150:t>150&&t<=300?300:t>300&&t<=600?600:t>600&&t<=1200?1200:t>1200&&t<=2400?2400:t>2400&&t<=4800?4800:t>4800&&t<=9600?9600:t>9600&&t<=19200?19200:t>19200&&t<=38400?38400:t>38400&&t<=76800?76800:t>76800&&t<=153600?153600:t>153600&&t<=307200?307200:t>307200&&t<=614400?614400:t>614400&&t<=1228800?1228800:0},S=e=>{var t;const a=null===(t=p.Z.create().lods.filter((e=>e.scale>=300&&e.scale<614400)).map((e=>{const t=h(e.scale);return{scale:t,label:`1" = ${(t/12).toLocaleString("en")}'`}})))||void 0===t?void 0:t.reverse();return a.push({scale:"custom",label:"User Defined"}),a};const T=(e,t,a,l)=>{const s=[];if(s.push({Scale:(t/12).toString()}),e<24?(s.push({HalfScale:(t/12/2).toString()}),s.push({"2xScale":t/12*2+" ft"})):e<36?(s.push({"2xScale":t/12*2}),s.push({"4xScale":t/12*4+" ft"})):(s.push({"2xScale":t/12*2}),s.push({"4xScale":t/12*4}),s.push({"6xScale":t/12*6+" ft"})),a){const e=(e=>{let t="";return e.layer.fields.forEach((a=>{if(!["OBJECTID"].includes(a.name)&&e.getAttribute(a.name))if("date"===a.type){const l=new Date(e.getAttribute(a.name));t+=`${a.alias}: ${l.getUTCMonth()+1}/${l.getUTCDate()}/${l.getUTCFullYear()}\n`}else t+=`${a.alias}: ${e.getAttribute(a.name)}\n`})),t})(l);s.push({PropertyInfo:e})}return s};var d=a(9283);const m=e=>{const t=(0,s.useRef)(!1),[a,l]=(0,s.useState)(!1),o=(0,s.useRef)(null),n=(0,s.useRef)(null),r=(0,s.useRef)(null),c=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)([]),[h,S]=(0,s.useState)([]),[T,d]=(0,s.useState)([]),[m,g]=(0,s.useState)("current"),[y,f]=(0,s.useState)(),[b,C]=(0,s.useState)(),[v,_]=(0,s.useState)(),[z,w]=(0,s.useState)(),[I,H]=(0,s.useState)([]);return(0,s.useEffect)((()=>{var a;t.current||(t.current=!0,new Promise((e=>{const t=[],a=[];x.results[0].value.forEach((e=>{const l=e.pageSize[0],s=e.pageSize[1];let i=`${l}"x${s}"`,o="Portrait",n=l,r=`${l}x${s}_${o.toLowerCase()}`;l>s&&(i=`${s}"x${l}"`,o="Landscape",r=`${s}x${l}_${o.toLowerCase()}`,n=s),i+=` ${o}`;const c={label:i,template:r,size:n};a.includes(c.template)||(t.push(c),a.push(c.template))})),t.sort(((e,t)=>e.size-t.size)),e(t)})).then((e=>{S(e),_(e[0])})),(a=e.exportUrl,new Promise(((e,t)=>(0,i.default)(a,{query:{f:"json"}}).then((t=>{t.data.parameters.forEach((t=>{"Format"===t.name&&e(t.choiceList)}))})).catch((e=>{t(e)}))))).then((e=>{d(e),w(e[0])})))}),[]),(0,s.useEffect)((()=>{C(e.selectedProperty)}),[e.selectedProperty]),(0,s.useEffect)((()=>{l(e.isActive)}),[e.isActive]),{isActive:a,title:u,setSelectedLayout:_,layouts:h,selectedFormat:z,setSelectedFormat:w,formats:T,setScaleType:g,scaleType:m,customScaleSelect:o,setCustomScale:f,customScale:y,userDefined:c,selectedProperty:b,selectedLayout:v,attributes:n,legend:r,setJobs:H,jobs:I,jobRef:p}};var g=a(80184);function y(e){const{isActive:t,title:a,setSelectedLayout:i,layouts:p,selectedFormat:x,setSelectedFormat:y,formats:f,setScaleType:b,scaleType:C,customScaleSelect:v,setCustomScale:_,customScale:z,userDefined:w,selectedProperty:I,selectedLayout:H,attributes:j,legend:L,setJobs:O,jobs:E,jobRef:F}=m(e),A=(0,s.useCallback)((t=>{e.toolDismissed()}),[]);return(0,g.jsxs)(l.N$,{id:"print-panel",heading:"Print","data-panel":"print",hidden:!t,closed:!t||void 0,dismissed:!t||void 0,dismissible:!0,onCalcitePanelDismiss:A,children:[(0,g.jsx)(l.G1,{icon:"chevron-up",text:"",slot:"header-actions-end",onClick:d.F$}),(0,g.jsxs)("div",{id:"print-container",children:[(0,g.jsxs)(l.ZK,{children:["Title",(0,g.jsx)(l.e,{ref:a,maxLength:50})]}),(0,g.jsxs)(l.ZK,{children:["Page size",(0,g.jsx)(l.ko,{label:"",onCalciteSelectChange:e=>i(e.target.selectedOption.value),children:p.map(((e,t)=>(0,g.jsx)(l.GB,{label:e.label,value:JSON.stringify(e)},t)))})]}),(0,g.jsxs)(l.ZK,{children:["File format",(0,g.jsx)(l.ko,{label:"",onCalciteSelectChange:e=>y(e.target.selectedOption.value),children:f.map(((e,t)=>(0,g.jsx)(l.GB,{label:e,value:e},t)))})]}),(0,g.jsxs)(l.vb,{name:"scale-radio",onCalciteRadioButtonGroupChange:e=>{b(e.detail)},children:[(0,g.jsxs)(l.ZK,{layout:"inline",children:[(0,g.jsx)(l.xG,{checked:"current"===C||void 0,value:"current"}),"Current Scale"]}),(0,g.jsxs)(l.ZK,{layout:"inline",children:[(0,g.jsx)(l.xG,{checked:"custom"===C||void 0,value:"custom"}),"Custom Scale"]})]}),"custom"===C&&(0,g.jsxs)(l.ZK,{children:["Scale",(0,g.jsx)(l.ko,{ref:v,label:"",onCalciteSelectChange:e=>_(e.target.selectedOption.value),children:(null===e||void 0===e?void 0:e.view)&&S(null===e||void 0===e||e.view).map(((e,t)=>(0,g.jsx)(l.GB,{label:e.label,value:e.scale},t)))})]}),"custom"===C&&"custom"===z&&(0,g.jsx)(l.e,{ref:w,type:"number",prefixText:'1" = ',suffixText:"'",min:1,max:5e4}),(0,g.jsx)("br",{}),I&&(0,g.jsxs)(l.ZK,{layout:"inline",children:[(0,g.jsx)(l.xV,{ref:j,value:"attributes"}),"Include attributes?"]}),(0,g.jsxs)(l.ZK,{layout:"inline",children:[(0,g.jsx)(l.xV,{ref:L,value:"legend"}),"Include Legend?"]}),(0,g.jsxs)(l.ZK,{layout:"inline",children:[(0,g.jsx)(l.xV,{value:"showFrame"}),"Show map frame?"]}),(0,g.jsx)(l.ln,{width:"full",onClick:()=>{if(null!==e&&void 0!==e&&e.view){var t,l,s,i,p,S;const d=function(e,t,a,l){let s="current"===e?t:a;return"custom"===a&&l&&(s=12*l),h(s)}(C,null===e||void 0===e||null===(t=e.view)||void 0===t?void 0:t.scale,z,null!==w&&void 0!==w&&w.current?parseInt(w.current.value):void 0),m=T(H.size,d,null===j||void 0===j||null===(l=j.current)||void 0===l?void 0:l.checked,I),g=function(e,t,a){let l=e.template?e.template.replace(".",""):JSON.parse(e).template.replace(".","");return t&&(l+="_attributes"),a&&(l+="_legend"),l}(H,null===j||void 0===j||null===(s=j.current)||void 0===s?void 0:s.checked,null===L||void 0===L||null===(i=L.current)||void 0===i?void 0:i.checked),y=((e,t,a,l,s,i)=>new u.Z({attributionVisible:!1,outScale:e,showLabels:!0,format:t,scalePreserved:!0,exportOptions:{dpi:200},layoutOptions:{titleText:a,scalebarUnit:"Feet",customTextElements:l,legendLayers:s.map.allLayers.filter((e=>"imagery"!==e.type&&"imagery-tile"!==e.type&&"selection-layer"!==e.id)).map((e=>new r.Z({layerId:e.id,title:e.title})))},layout:i}))(d,x,null===a||void 0===a||null===(p=a.current)||void 0===p?void 0:p.value,m,null===e||void 0===e?void 0:e.view,g),f={title:null===(S=a.current)||void 0===S?void 0:S.value,loading:!0,submitted:(new Date).getTime().toString(),href:null};O([...E,f]),F.current=[...F.current,f];const b=null===e||void 0===e?void 0:e.view.scale;y.outScale!==(null===e||void 0===e?void 0:e.view.scale)&&(e.view.scale=y.outScale),setTimeout((()=>{((e,t,a,l,s)=>(t.format=s,new Promise(((s,i)=>{n.ht(e,new c.Z({template:t,view:a,outSpatialReference:new o.Z({wkid:3632})})).then((e=>{s(e)})).catch((e=>{i(e)})),setTimeout((()=>{a.scale=l}),1e3)}))))(e.exportUrl,y,null===e||void 0===e?void 0:e.view,b,x).then((e=>{setTimeout((()=>{const t=F.current.indexOf(f);F.current[t]={...F.current[t],url:e.url,loading:!1},O([...F.current])}))})).catch((e=>{console.log(e);const t=F.current.indexOf(f);F.current[t]={...F.current[t],error:!0,loading:!1},O([...F.current])}))}),1e3)}},children:"Export"}),(0,g.jsx)("hr",{}),(0,g.jsx)("h4",{children:"Exported files"}),E.length<=0&&(0,g.jsx)("p",{children:"Your exported files will appear here"}),(0,g.jsx)("div",{id:"printJobs",children:E.map((e=>(0,g.jsxs)("div",{className:"print-job",children:[e.loading&&(0,g.jsxs)("div",{children:[(0,g.jsx)(l.Eg,{scale:"s",inline:!0,active:!0,label:""}),(0,g.jsx)("span",{className:"loader-text",children:`${""!==e.title?e.title:"untitled"}`})]}),e.url&&!e.loading&&(0,g.jsxs)("div",{children:[(0,g.jsx)(l.g$,{target:"_blank","icon-start":"download",href:e.url,children:`${""!==e.title?e.title:"untitled"}`}),(0,g.jsx)(l.ln,{appearance:"transparent","icon-start":"x",scale:"s",onClick:()=>{F.current=E.filter((t=>t.title!==e.title)),O(E.filter((t=>t!==e)))}})]})]},`printjob_${e.submitted}`)))})]})]})}const f=s.memo(y)}}]);
//# sourceMappingURL=8682.65b51ec7.chunk.js.map