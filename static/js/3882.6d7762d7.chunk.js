"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[3882],{80573:(e,t,i)=>{i.d(t,{Z:()=>d});var s=i(27366),n=i(85015),r=i(11582),o=i(79056),a=i(46784),l=i(92026),c=i(49861),u=(i(63780),i(93169),i(25243),i(69912));let h=0,_=class extends((0,a.eC)((0,r.J)((0,o.IG)(n.Z)))){constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${h++}`,this.title=null}get parent(){return this._get("parent")}set parent(e){const t=this.parent;if((0,l.pC)(t))switch(t.type){case"line-of-sight":t.removeAnalysis(this);break;case"2d":case"3d":t.analyses.includes(this)&&t.analyses.remove(this)}this._set("parent",e)}get isEditable(){return this.requiredPropertiesForEditing.every(l.pC)}};(0,s._)([(0,c.Cb)({type:String,constructOnly:!0,clonable:!1})],_.prototype,"id",void 0),(0,s._)([(0,c.Cb)({type:String})],_.prototype,"title",void 0),(0,s._)([(0,c.Cb)({constructOnly:!0})],_.prototype,"type",void 0),(0,s._)([(0,c.Cb)({clonable:!1,value:null})],_.prototype,"parent",null),(0,s._)([(0,c.Cb)({readOnly:!0})],_.prototype,"extent",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],_.prototype,"isEditable",null),(0,s._)([(0,c.Cb)({readOnly:!0})],_.prototype,"requiredPropertiesForEditing",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],_.prototype,"nonEditableMessage",void 0),_=(0,s._)([(0,u.j)("esri.analysis.Analysis")],_);const d=_},58971:(e,t,i)=>{i.d(t,{G6:()=>x,Ie:()=>A,J9:()=>R,RF:()=>y,U1:()=>w,vY:()=>l,ym:()=>E});var s=i(92026),n=i(77981);const r=(e,t,i)=>[t,i],o=(e,t,i)=>[t,i,e[2]],a=(e,t,i)=>[t,i,e[2],e[3]];function l(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,s.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c(e,t){let{scale:i,translate:s}=e;return Math.round((t-s[0])/i[0])}function u(e,t){let{scale:i,translate:s}=e;return Math.round((s[1]-t)/i[1])}function h(e,t,i){const s=[];let n,r,o,a;for(let l=0;l<i.length;l++){const h=i[l];l>0?(o=c(e,h[0]),a=u(e,h[1]),o===n&&a===r||(s.push(t(h,o-n,a-r)),n=o,r=a)):(n=c(e,h[0]),r=u(e,h[1]),s.push(t(h,n,r)))}return s.length>0?s:null}function _(e,t){let{scale:i,translate:s}=e;return t*i[0]+s[0]}function d(e,t){let{scale:i,translate:s}=e;return s[1]-t*i[1]}function f(e,t,i){const s=new Array(i.length);if(!i.length)return s;const[n,r]=e.scale;let o=_(e,i[0][0]),a=d(e,i[0][1]);s[0]=t(i[0],o,a);for(let l=1;l<i.length;l++){const e=i[l];o+=e[0]*n,a-=e[1]*r,s[l]=t(e,o,a)}return s}function p(e,t,i){const s=new Array(i.length);for(let n=0;n<i.length;n++)s[n]=f(e,t,i[n]);return s}function g(e,t,i,s,n){return t.points=function(e,t,i,s){return h(e,i?s?a:o:s?o:r,t)}(e,i.points,s,n),t}function y(e,t,i,s,n){return t.x=c(e,i.x),t.y=u(e,i.y),t!==i&&(s&&(t.z=i.z),n&&(t.m=i.m)),t}function b(e,t,i,s,n){const l=function(e,t,i,s){const n=[],l=i?s?a:o:s?o:r;for(let r=0;r<t.length;r++){const i=h(e,l,t[r]);i&&i.length>=3&&n.push(i)}return n.length?n:null}(e,i.rings,s,n);return l?(t.rings=l,t):null}function v(e,t,i,s,n){const l=function(e,t,i,s){const n=[],l=i?s?a:o:s?o:r;for(let r=0;r<t.length;r++){const i=h(e,l,t[r]);i&&i.length>=2&&n.push(i)}return n.length?n:null}(e,i.paths,s,n);return l?(t.paths=l,t):null}function E(e,t){return e&&t?(0,n.wp)(t)?y(e,{},t,!1,!1):(0,n.l9)(t)?v(e,{},t,!1,!1):(0,n.oU)(t)?b(e,{},t,!1,!1):(0,n.aW)(t)?g(e,{},t,!1,!1):(0,n.YX)(t)?function(e,t,i,s,n){return t.xmin=c(e,i.xmin),t.ymin=u(e,i.ymin),t.xmax=c(e,i.xmax),t.ymax=u(e,i.ymax),t!==i&&(s&&(t.zmin=i.zmin,t.zmax=i.zmax),n&&(t.mmin=i.mmin,t.mmax=i.mmax)),t}(e,{},t,!1,!1):null:null}function R(e,t,i,n,l){return(0,s.pC)(i)&&(t.points=function(e,t,i,s){return f(e,i?s?a:o:s?o:r,t)}(e,i.points,n,l)),t}function w(e,t,i,n,r){return(0,s.Wi)(i)||(t.x=_(e,i.x),t.y=d(e,i.y),t!==i&&(n&&(t.z=i.z),r&&(t.m=i.m))),t}function A(e,t,i,n,l){return(0,s.pC)(i)&&(t.rings=function(e,t,i,s){return p(e,i?s?a:o:s?o:r,t)}(e,i.rings,n,l)),t}function x(e,t,i,n,l){return(0,s.pC)(i)&&(t.paths=function(e,t,i,s){return p(e,i?s?a:o:s?o:r,t)}(e,i.paths,n,l)),t}},74509:(e,t,i)=>{i.d(t,{Lt:()=>c,Ou:()=>h,RL:()=>l,VW:()=>o,Zz:()=>r,vQ:()=>_,vu:()=>a,zx:()=>d});var s=i(92026),n=i(88152);function r(e,t){return(0,s.Wi)(t)||!t.mode?e?"absolute-height":"on-the-ground":t.mode}function o(e,t){return r(!!(0,s.pC)(e)&&e.hasZ,t)}function a(e){const t=u(e);return o(e.geometry,t)}function l(e){const t=u(e),i=o(e.geometry,t);return{mode:i,offset:(0,s.pC)(t)&&"on-the-ground"!==i?(0,s.Pt)(t.offset,0)*(0,n.Z7)((0,s.Pt)(t.unit,"meters")):0}}function c(e){if("on-the-ground"===a(e))return!1;const t=u(e),i=(0,s.pC)(t)&&t.featureExpressionInfo?t.featureExpressionInfo.expression:null;return!(!i||"0"===i)}function u(e){return e.layer&&"elevationInfo"in e.layer?e.layer.elevationInfo:null}function h(e,t,i){if((0,s.Wi)(i)||!i.mode)return;const n=e.hasZ?e.z:0,r=(0,s.pC)(i.offset)?i.offset:0;switch(i.mode){case"absolute-height":return n-r;case"on-the-ground":return 0;case"relative-to-ground":return n-((0,s.Pt)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"ground"),0)+r);case"relative-to-scene":return n-((0,s.Pt)(t.elevationProvider.getElevation(e.x,e.y,e.z,e.spatialReference,"scene"),0)+r)}}function _(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return f(e,t.x,t.y,t.hasZ?t.z:0,t.spatialReference,i,s)}function d(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return f(e,t[0],t[1],t.length>2?t[2]:0,i,s,n)}function f(e,t,i,n,r,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if((0,s.Wi)(o))return;const l=(0,s.pC)(a)?a.mode:"absolute-height";if("on-the-ground"===l)return 0;const{absoluteZ:c}=p(t,i,n,r,e,o);return g(c,t,i,n,r,e,a,l)}function p(e,t,i,n,r,o){const a=(0,s.pC)(o.offset)?o.offset:0;switch(o.mode){case"absolute-height":return{absoluteZ:i+a,elevation:0};case"on-the-ground":{const i=(0,s.Pt)(r.elevationProvider.getElevation(e,t,0,n,"ground"),0);return{absoluteZ:i,elevation:i}}case"relative-to-ground":{const o=(0,s.Pt)(r.elevationProvider.getElevation(e,t,i,n,"ground"),0);return{absoluteZ:i+o+a,elevation:o}}case"relative-to-scene":{const o=(0,s.Pt)(r.elevationProvider.getElevation(e,t,i,n,"scene"),0);return{absoluteZ:i+o+a,elevation:o}}}}function g(e,t,i,n,r,o,a,l){const c=(0,s.pC)(a)&&(0,s.pC)(a.offset)?a.offset:0;switch(l){case"absolute-height":return e-c;case"relative-to-ground":return e-((0,s.Pt)(o.elevationProvider.getElevation(t,i,n,r,"ground"),0)+c);case"relative-to-scene":return e-((0,s.Pt)(o.elevationProvider.getElevation(t,i,n,r,"scene"),0)+c)}}},48681:(e,t,i)=>{i.d(t,{y1:()=>o});i(11186);var s=i(71353),n=(i(2170),i(80885)),r=(i(79803),i(78952));i(15559),i(80064);function o(e){return"mouse"!==e.pointerType||0===e.button}const a=(0,s.c)(),l=(0,s.c)(),c=(0,s.c)();new n.Z({rings:[[a,l,c]],spatialReference:r.Z.WGS84}),(0,s.c)()},92382:(e,t,i)=>{i.d(t,{G:()=>n,e:()=>s});class s{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.screenPoint=e,this.result=t}}class n{constructor(e,t){this.scenePoint=e,this.mapPoint=t}}},86509:(e,t,i)=>{i.d(t,{f:()=>l});var s=i(27366),n=i(94172),r=i(49861),o=(i(63780),i(93169),i(25243),i(69912)),a=i(45900);let l=class extends a.m{constructor(e){super(e)}initialize(){this.own((0,n.YP)((()=>this.analysisViewData.visible),(e=>this.visible=e),n.tX))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};(0,s._)([(0,r.Cb)({constructOnly:!0})],l.prototype,"analysis",void 0),(0,s._)([(0,r.Cb)()],l.prototype,"analysisViewData",void 0),l=(0,s._)([(0,o.j)("esri.views.interactive.AnalysisToolBase")],l)},44070:(e,t,i)=>{i.d(t,{f:()=>h});var s=i(63780),n=i(32718),r=i(92026),o=i(18722),a=i(37825),l=i(49800),c=i(8548);const u=n.Z.getLogger("esri.views.webgl.BufferObject");class h{constructor(e,t,i,s){this._context=e,this.bufferType=t,this.usage=i,this._glName=null,this._size=-1,this._indexType=void 0,e.instanceCounter.increment(c._g.BufferObject,this),this._glName=this._context.gl.createBuffer(),(0,a.zu)(this._context.gl),s&&this.setData(s)}static createIndex(e,t,i){return new h(e,c.w0.ELEMENT_ARRAY_BUFFER,t,i)}static createVertex(e,t,i){return new h(e,c.w0.ARRAY_BUFFER,t,i)}static createUniform(e,t,i){if(e.type!==l.zO.WEBGL2)throw new Error("Uniform buffers are supported in WebGL2 only!");return new h(e,c.w0.UNIFORM_BUFFER,t,i)}static createPixelPack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.l1.STREAM_READ,i=arguments.length>2?arguments[2]:void 0;if(e.type!==l.zO.WEBGL2)throw new Error("Pixel pack buffers are supported in WebGL2 only!");const s=new h(e,c.w0.PIXEL_PACK_BUFFER,t);return i&&s.setSize(i),s}static createPixelUnpack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.l1.STREAM_DRAW,i=arguments.length>2?arguments[2]:void 0;if(e.type!==l.zO.WEBGL2)throw new Error("Pixel unpack buffers are supported in WebGL2 only!");return new h(e,c.w0.PIXEL_UNPACK_BUFFER,t,i)}get glName(){return this._glName}get size(){return this._size}get indexType(){return this._indexType}get byteSize(){return this.bufferType===c.w0.ELEMENT_ARRAY_BUFFER?this._indexType===c.g.UNSIGNED_INT?4*this._size:2*this._size:this._size}get _isVAOAware(){return this.bufferType===c.w0.ELEMENT_ARRAY_BUFFER||this.bufferType===c.w0.ARRAY_BUFFER}dispose(){this._context?.gl?(this._glName&&(this._context.gl.deleteBuffer(this._glName),this._glName=null),this._context.instanceCounter.decrement(c._g.BufferObject,this),this._context=null):this._glName&&u.warn("Leaked WebGL buffer object")}setSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e<=0&&u.error("Buffer size needs to be positive!"),this.bufferType===c.w0.ELEMENT_ARRAY_BUFFER&&(0,r.pC)(t))switch(this._indexType=t,t){case c.g.UNSIGNED_SHORT:e*=2;break;case c.g.UNSIGNED_INT:e*=4}this._setBufferData(e)}setData(e){if(!e)return;let t=e.byteLength;this.bufferType===c.w0.ELEMENT_ARRAY_BUFFER&&((0,o.Uc)(e)&&(t/=2,this._indexType=c.g.UNSIGNED_SHORT),(0,o.ZY)(e)&&(t/=4,this._indexType=c.g.UNSIGNED_INT)),this._setBufferData(t,e)}_setBufferData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._size=e;const i=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const s=this._context.gl;(0,r.pC)(t)?s.bufferData(this.bufferType,t,this.usage):s.bufferData(this.bufferType,e,this.usage),(0,a.zu)(s),this._isVAOAware&&this._context.bindVAO(i)}setSubData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.byteLength;if(!e)return;(t<0||t>=this._size)&&u.error("offset is out of range!");let n=t,r=i,l=s,h=e.byteLength;this.bufferType===c.w0.ELEMENT_ARRAY_BUFFER&&((0,o.Uc)(e)?(h/=2,n*=2,r*=2,l*=2):(0,o.ZY)(e)&&(h/=4,n*=4,r*=4,l*=4)),void 0===s&&(s=h-1),i>=s&&u.error("end must be bigger than start!"),t+i-s>this._size&&u.error("An attempt to write beyond the end of the buffer!");const _=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const d=this._context.gl,f=ArrayBuffer.isView(e)?e.buffer:e,p=0===r&&l===e.byteLength?f:f.slice(r,l);d.bufferSubData(this.bufferType,n,p),(0,a.zu)(d),this._isVAOAware&&this._context.bindVAO(_)}setSubDataFromView(e,t,i,s){if(!e)return;(t<0||t>=this._size)&&u.error("offset is out of range!"),i>=s&&u.error("end must be bigger than start!"),t+i-s>this._size&&u.error("An attempt to write beyond the end of the buffer!");const n=this._context.getBoundVAO();this._isVAOAware&&this._context.bindVAO(null),this._context.bindBuffer(this);const r=this._context.gl;if(this._context.type===l.zO.WEBGL2)r.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,e,i,s-i);else{const n=0===i&&s===e.length?e:e.subarray(i,s);r.bufferSubData(this.bufferType,t*e.BYTES_PER_ELEMENT,n)}(0,a.zu)(r),this._isVAOAware&&this._context.bindVAO(n)}getSubData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(this._context.type!==l.zO.WEBGL2)return void u.error("Get buffer subdata is supported in WebGL2 only!");if(i<0||n<0)return void u.error("Problem getting subdata: offset and length were less than zero!");const r=function(e){return(0,s.zG)(e)}(e)?e.BYTES_PER_ELEMENT:1;if(r*((i??0)+(n??0))>e.byteLength)return void u.error("Problem getting subdata: offset and length exceeded destination size!");t+r*(n??0)>this.byteSize&&u.warn("Potential problem getting subdata: requested data exceeds buffer size!");const o=this._context.gl;this._context.bindBuffer(this,c.w0.COPY_READ_BUFFER),o.getBufferSubData(c.w0.COPY_READ_BUFFER,t,e,i,n),this._context.unbindBuffer(c.w0.COPY_READ_BUFFER)}async getSubDataAsync(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this._context.type===l.zO.WEBGL2?(await this._context.clientWaitAsync(),this.getSubData(e,t,i,s)):u.error("Get buffer subdata is supported in WebGL2 only!")}}},3384:(e,t,i)=>{i.d(t,{HH:()=>r,RG:()=>c,UF:()=>l,XP:()=>a,_V:()=>o,un:()=>u});i(93169);var s=i(92026),n=i(8548);function r(e){const t=e.gl;switch(t.getError()){case t.NO_ERROR:return null;case t.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";case t.INVALID_VALUE:return"A numeric argument is out of range";case t.INVALID_OPERATION:return"The specified command is not allowed for the current state";case t.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case t.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case t.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function o(e,t){return e.vertexBuffers[t].size/function(e){return e[0].stride}(e.layout[t])}function a(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const r=e.gl,o=e.capabilities.instancing;e.bindBuffer(i);for(const a of s){const e=t.get(a.name);void 0===e&&console.error(`There is no location for vertex attribute '${a.name}' defined.`);const i=n*a.stride;if(a.count<=4)r.vertexAttribPointer(e,a.count,a.type,a.normalized,a.stride,a.offset+i),r.enableVertexAttribArray(e),a.divisor>0&&o&&o.vertexAttribDivisor(e,a.divisor);else if(9===a.count)for(let t=0;t<3;t++)r.vertexAttribPointer(e+t,3,a.type,a.normalized,a.stride,a.offset+12*t+i),r.enableVertexAttribArray(e+t),a.divisor>0&&o&&o.vertexAttribDivisor(e+t,a.divisor);else if(16===a.count)for(let t=0;t<4;t++)r.vertexAttribPointer(e+t,4,a.type,a.normalized,a.stride,a.offset+16*t+i),r.enableVertexAttribArray(e+t),a.divisor>0&&o&&o.vertexAttribDivisor(e+t,a.divisor);else console.error("Unsupported vertex attribute element count: "+a.count)}}function l(e,t,i,s){const r=e.gl,o=e.capabilities.instancing;e.bindBuffer(i);for(const n of s){const e=t.get(n.name);if(n.count<=4)r.disableVertexAttribArray(e),n.divisor&&n.divisor>0&&o&&o.vertexAttribDivisor(e,0);else if(9===n.count)for(let t=0;t<3;t++)r.disableVertexAttribArray(e+t),n.divisor&&n.divisor>0&&o&&o.vertexAttribDivisor(e+t,0);else if(16===n.count)for(let t=0;t<4;t++)r.disableVertexAttribArray(e+t),n.divisor&&n.divisor>0&&o&&o.vertexAttribDivisor(e+t,0);else console.error("Unsupported vertex attribute element count: "+n.count)}e.unbindBuffer(n.w0.ARRAY_BUFFER)}function c(e){switch(e){case n.VI.ALPHA:case n.VI.LUMINANCE:case n.VI.RED:case n.VI.RED_INTEGER:case n.lP.R8:case n.lP.R8I:case n.lP.R8UI:case n.lP.R8_SNORM:case n.Tg.STENCIL_INDEX8:return 1;case n.VI.LUMINANCE_ALPHA:case n.VI.RG:case n.VI.RG_INTEGER:case n.lP.RGBA4:case n.lP.R16F:case n.lP.R16I:case n.lP.R16UI:case n.lP.RG8:case n.lP.RG8I:case n.lP.RG8UI:case n.lP.RG8_SNORM:case n.lP.RGB565:case n.lP.RGB5_A1:case n.Tg.DEPTH_COMPONENT16:return 2;case n.VI.DEPTH_COMPONENT:case n.VI.RGB:case n.VI.RGB_INTEGER:case n.lP.RGB8:case n.lP.RGB8I:case n.lP.RGB8UI:case n.lP.RGB8_SNORM:case n.lP.SRGB8:case n.Tg.DEPTH_COMPONENT24:return 3;case n.VI.DEPTH_STENCIL:case n.VI.RGBA:case n.VI.RGBA_INTEGER:case n.lP.RGBA8:case n.lP.R32F:case n.lP.R11F_G11F_B10F:case n.lP.RG16F:case n.lP.R32I:case n.lP.R32UI:case n.lP.RG16I:case n.lP.RG16UI:case n.lP.RGBA8I:case n.lP.RGBA8UI:case n.lP.RGBA8_SNORM:case n.lP.SRGB8_ALPHA8:case n.lP.RGB9_E5:case n.lP.RGB10_A2UI:case n.lP.RGB10_A2:case n.Tg.DEPTH_STENCIL:case n.Tg.DEPTH_COMPONENT32F:case n.Tg.DEPTH24_STENCIL8:return 4;case n.Tg.DEPTH32F_STENCIL8:return 5;case n.lP.RGB16F:case n.lP.RGB16I:case n.lP.RGB16UI:return 6;case n.lP.RG32F:case n.lP.RG32I:case n.lP.RG32UI:case n.lP.RGBA16F:case n.lP.RGBA16I:case n.lP.RGBA16UI:return 8;case n.lP.RGB32F:case n.lP.RGB32I:case n.lP.RGB32UI:return 12;case n.lP.RGBA32F:case n.lP.RGBA32I:case n.lP.RGBA32UI:return 16;case n.q_.COMPRESSED_RGB_S3TC_DXT1_EXT:case n.q_.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case n.q_.COMPRESSED_RGBA_S3TC_DXT3_EXT:case n.q_.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case n.q_.COMPRESSED_R11_EAC:case n.q_.COMPRESSED_SIGNED_R11_EAC:case n.q_.COMPRESSED_RGB8_ETC2:case n.q_.COMPRESSED_SRGB8_ETC2:case n.q_.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case n.q_.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;case n.q_.COMPRESSED_RG11_EAC:case n.q_.COMPRESSED_SIGNED_RG11_EAC:case n.q_.COMPRESSED_RGBA8_ETC2_EAC:case n.q_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0}function u(e){if((0,s.Wi)(e))return 0;if("descriptor"in e)return e.glName?u(e.descriptor):0;const t=e.internalFormat||"pixelFormat"in e&&e.pixelFormat;if(!t)return 0;const i="hasMipmap"in e&&e.hasMipmap?1.3:1,n=e.width*e.height;return c(t)*n*i}},45412:(e,t,i)=>{i.d(t,{U:()=>l});var s=i(32718),n=i(92026),r=i(8548),o=i(3384);const a=s.Z.getLogger("esri.views.webgl.VertexArrayObject");class l{constructor(e,t,i,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._context=e,this._locations=t,this._layout=i,this._buffers=s,this._indexBuffer=n,this._glName=null,this._initialized=!1,e.instanceCounter.increment(r._g.VertexArrayObject,this)}get glName(){return this._glName}get context(){return this._context}get vertexBuffers(){return this._buffers}get indexBuffer(){return this._indexBuffer}get size(){return Object.keys(this._buffers).reduce(((e,t)=>e+this._buffers[t].size),(0,n.pC)(this._indexBuffer)?this._indexBuffer.size:0)}get layout(){return this._layout}get locations(){return this._locations}dispose(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._context){if(this._glName){const e=this._context?.capabilities?.vao;e?(e.deleteVertexArray(this._glName),this._glName=null):a.warn("Leaked WebGL VAO")}if(this._context.getBoundVAO()===this&&this._context.bindVAO(null),e){for(const e in this._buffers)this._buffers[e].dispose(),delete this._buffers[e];this._indexBuffer=(0,n.O3)(this._indexBuffer)}this._context.instanceCounter.decrement(r._g.VertexArrayObject,this),this._context=null}else(this._glName||e&&Object.getOwnPropertyNames(this._buffers).length>0)&&a.warn("Leaked WebGL VAO")}initialize(){if(this._initialized)return;const e=this._context.capabilities.vao;if(e){const t=e.createVertexArray();e.bindVertexArray(t),this._bindLayout(),e.bindVertexArray(null),this._glName=t}this._initialized=!0}bind(){this.initialize();const e=this._context.capabilities.vao;e?e.bindVertexArray(this.glName):(this._context.bindVAO(null),this._bindLayout())}_bindLayout(){const{_buffers:e,_layout:t,_indexBuffer:i}=this;e||a.error("Vertex buffer dictionary is empty!");const s=this._context.gl;for(const n in e){const i=e[n];i||a.error("Vertex buffer is uninitialized!");const s=t[n];s||a.error("Vertex element descriptor is empty!"),(0,o.XP)(this._context,this._locations,i,s)}(0,n.pC)(i)&&(this._context.capabilities.vao?s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,i.glName):this._context.bindBuffer(i))}unbind(){this.initialize();const e=this._context.capabilities.vao;e?e.bindVertexArray(null):this._unbindLayout()}_unbindLayout(){const{_buffers:e,_layout:t}=this;e||a.error("Vertex buffer dictionary is empty!");for(const i in e){const s=e[i];s||a.error("Vertex buffer is uninitialized!");const n=t[i];(0,o.UF)(this._context,this._locations,s,n)}(0,n.pC)(this._indexBuffer)&&this._context.unbindBuffer(this._indexBuffer.bufferType)}}},40085:(e,t,i)=>{i.d(t,{O:()=>_});var s,n=i(27366),r=i(100),o=i(92026),a=i(66978),l=i(94172),c=i(49861),u=(i(63780),i(93169),i(25243),i(69912)),h=i(32845);!function(e){e[e.PENDING=0]="PENDING",e[e.WAIT_FOR_VIEW_READY=1]="WAIT_FOR_VIEW_READY",e[e.RUNNING=2]="RUNNING"}(s||(s={}));let _=class extends h.V{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.analysisView=null,this._reconnectViewTask=null,this._analysisBaseHandles=new r.Z,this._parentChangeFromReconnect=!1,this._startUserOperation=null;const t=e?.analysis;(0,o.pC)(t)?this.analysis=t:(this._set("analysis",this.constructAnalysis()),this._set("isAnalysisOwner",!0))}normalizeCtorArgs(e){const{analysis:t,...i}=e;return i}initialize(){this._analysisBaseHandles.add([(0,l.YP)((()=>(0,o.yw)(this.analysis,(e=>{let{parent:t}=e;return t}))),(e=>{this._parentChangeFromReconnect||e===this.view||this._set("isAnalysisOwner",!1);const t=!this._parentChangeFromReconnect;this._parentChangeFromReconnect=!1,t&&this._scheduleViewReconnect()}),l.Z_),(0,l.YP)((()=>({view:this.view,ready:(0,o.pC)(this.view)&&this.view.ready,supported:this.supported})),((e,t)=>{let{view:i}=e,{view:s}=t;i!==s&&(this._startUserOperation=(0,o.IM)(this._startUserOperation),this._disconnectFromView(s)),this._scheduleViewReconnect()}),l.tX),(0,l.YP)((()=>this.analysis.isEditable),((e,t)=>{(0,o.Wi)(this.analysisView)||(e&&!t&&(0,o.Wi)(this.tool)?this.createTool():!e&&t&&(0,o.pC)(this.tool)&&!this.tool.active&&this.removeTool())}))])}destroy(){this._analysisBaseHandles=(0,o.SC)(this._analysisBaseHandles),this._reconnectViewTask=(0,o.IM)(this._reconnectViewTask),this._startUserOperation=(0,o.IM)(this._startUserOperation),(0,o.pC)(this.analysisView)&&(this.analysisView.visible=void 0),this._disconnectFromView(this.view),(0,o.pC)(this.analysis)&&this.isAnalysisOwner&&(this.analysis.destroy(),this._set("analysis",null))}set analysis(e){e!==this._get("analysis")&&(this._startUserOperation=(0,o.IM)(this._startUserOperation),this._disconnectFromView(this.view),this._setExternalAnalysis(e),this._scheduleViewReconnect())}get ready(){return(0,o.pC)(this.analysisView)&&!this.connectingToView}get connectingToView(){return(0,o.pC)(this._reconnectViewTask)}get isAnalysisOwner(){return this._get("isAnalysisOwner")}set visible(e){this._set("visible",e),(0,o.pC)(this.analysisView)&&(this.analysisView.visible=e)}async start(){this.clear();const e={task:null,abort:null,state:s.PENDING},t=(0,a.vr)((async t=>{e.state=s.WAIT_FOR_VIEW_READY,await(0,l.N1)((()=>this.ready),t),e.state=s.RUNNING,this.createTool({interactive:!0})}));return e.task=t,e.abort=()=>t.abort(),this._startUserOperation=e,t.promise}clear(){this._startUserOperation=(0,o.IM)(this._startUserOperation),this.removeTool(),this.analysis.clear()}onConnectToAnalysisView(e){}onDisconnectFromAnalysisView(){}_scheduleViewReconnect(){this._reconnectViewTask=(0,o.IM)(this._reconnectViewTask);const e=(0,a.vr)((async t=>{try{await this._reconnectView(t)}catch(i){if((0,a.k_)(t),!(0,a.D_)(i))return void this.logger.warn("Failed to use analysis in view model",i);throw i}finally{e===this._reconnectViewTask&&(this._reconnectViewTask=null)}}));this._reconnectViewTask=e}async _reconnectView(e){const{view:t}=this,i=(0,o.pC)(t)&&t.ready&&this.supported,s=this.analysis;if(this._startUserOperation=d(this._startUserOperation),this._disconnectFromView(t),i&&!(0,o.Wi)(t)&&!(0,o.Wi)(s)){if(this.isAnalysisOwner){if((0,o.pC)(s.parent))return void this.logError("expected owned analysis to have null parent when connecting to view");this._parentChangeFromReconnect=!0,t.analyses.add(s)}this.analysisView=await t.whenAnalysisView(s),(0,a.Hc)(e)?this._startUserOperation=d(this._startUserOperation):(this.analysisView.visible=this.visible,this.onConnectToAnalysisView(this.analysisView),this.createTool())}}_disconnectFromView(e){this.removeTool(),(0,o.pC)(e)&&this.isAnalysisOwner&&(this._parentChangeFromReconnect=!0,e.analyses.remove(this.analysis),this.analysis.clear()),this.analysisView=null,this.onDisconnectFromAnalysisView()}_setExternalAnalysis(e){if((0,o.pC)(this.analysisView)&&!this.isAnalysisOwner&&(this.analysisView.visible=!0),this.analysisView=null,this._set("isAnalysisOwner",!1),this._set("analysis",e),this._parentChangeFromReconnect=!1,!e.isEditable){const t=e.nonEditableMessage;this.logger.warn(`The assigned ${e.type} analysis object will not be editable in the view. ${t}`)}}get testInfo(){return{analysisView:this.analysisView}}};function d(e){return(0,o.pC)(e)&&e.state>=s.RUNNING?(e.abort(),null):e}(0,n._)([(0,c.Cb)({nonNullable:!0})],_.prototype,"analysis",null),(0,n._)([(0,c.Cb)()],_.prototype,"analysisView",void 0),(0,n._)([(0,c.Cb)()],_.prototype,"ready",null),(0,n._)([(0,c.Cb)()],_.prototype,"connectingToView",null),(0,n._)([(0,c.Cb)({readOnly:!0})],_.prototype,"isAnalysisOwner",null),(0,n._)([(0,c.Cb)({type:Boolean,value:!0})],_.prototype,"visible",null),(0,n._)([(0,c.Cb)()],_.prototype,"_reconnectViewTask",void 0),_=(0,n._)([(0,u.j)("esri.widgets.support.InteractiveAnalysisViewModel")],_)},32845:(e,t,i)=>{i.d(t,{V:()=>h});var s=i(27366),n=i(85015),r=i(100),o=i(32718),a=i(92026),l=i(94172),c=i(49861),u=(i(63780),i(93169),i(25243),i(69912));let h=class extends n.Z{constructor(e){super(e),this.tool=null,this._baseHandles=new r.Z,this._loggedUnsupportedErrorOnce=!1,this.logger=o.Z.getLogger(this.declaredClass),e&&null!=e.visible&&(this.visible=e.visible)}initialize(){this._baseHandles.add((0,l.YP)((()=>({ready:(0,a.pC)(this.view)&&this.view.ready,supported:this.supported})),(e=>{let{ready:t,supported:i}=e;!t||i||this._loggedUnsupportedErrorOnce||(this.logError(this.unsupportedErrorMessage),this._loggedUnsupportedErrorOnce=!0)}),l.tX))}destroy(){this.removeTool(),this.view=null,this._baseHandles=(0,a.SC)(this._baseHandles)}get supported(){return(0,a.Wi)(this.view)||this.view.type===this.supportedViewType}get view(){return this._get("view")}set view(e){if(e===this.view)return;this.removeTool(),this._set("view",e);const t="tools";this._baseHandles.remove(t),(0,a.Wi)(e)||this._baseHandles.add(e.tools.on("after-remove",(e=>{e.item===this.tool&&this._set("tool",null)})),t)}set visible(e){this._set("visible",e),(0,a.pC)(this.tool)&&(this.tool.visible=e)}get active(){return(0,a.pC)(this.tool)&&this.tool.active}get disabled(){return(0,a.Wi)(this.view)||!this.view.ready||!this.supported}createTool(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{interactive:!1};if(this.removeTool(),(0,a.Wi)(this.view)||!this.view.ready||!this.supported)return;const t=this.constructTool();t.created?(this._set("tool",t),this.view.tools.add(t)):e.interactive?(this._set("tool",t),this.view.addAndActivateTool(t),(0,l.gx)((()=>t.created),(()=>{t.active&&(0,a.pC)(this.view)&&(this.view.activeTool=null)}),{initial:!0,once:!0})):t.destroy()}removeTool(){const e=this.tool;if((0,a.Wi)(e))return;const t=(0,a.yw)(this.view,(e=>e.tools));(0,a.pC)(t)?t.remove(e):e.destroy(),this._set("tool",null)}logError(){this.logger.error(...arguments)}};(0,s._)([(0,c.Cb)({constructOnly:!0})],h.prototype,"tool",void 0),(0,s._)([(0,c.Cb)()],h.prototype,"supported",null),(0,s._)([(0,c.Cb)({value:null})],h.prototype,"view",null),(0,s._)([(0,c.Cb)({type:Boolean,value:!0})],h.prototype,"visible",null),(0,s._)([(0,c.Cb)()],h.prototype,"active",null),(0,s._)([(0,c.Cb)()],h.prototype,"disabled",null),h=(0,s._)([(0,u.j)("esri.widgets.support.InteractiveToolViewModel")],h)}}]);
//# sourceMappingURL=3882.6d7762d7.chunk.js.map