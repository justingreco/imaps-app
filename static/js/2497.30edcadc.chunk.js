"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[2497],{48976:(t,e,n)=>{n.d(e,{c:()=>f,g:()=>u,i:()=>d,j:()=>R,k:()=>g,m:()=>h,r:()=>I,s:()=>c});var i=n(11873),r=n(98131),a=n(71353),o=n(26277),s=n(11186),l=n(90045);function c(t,e,n){n*=.5;const i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function u(t,e){const n=2*Math.acos(e[3]),i=Math.sin(n/2);return i>o.E?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function h(t,e,n){const i=e[0],r=e[1],a=e[2],o=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+o*s+r*c-a*l,t[1]=r*u+o*l+a*s-i*c,t[2]=a*u+o*c+i*l-r*s,t[3]=o*u-i*s-r*l-a*c,t}function p(t,e,n,i){const r=e[0],a=e[1],s=e[2],l=e[3];let c,u,h,p,d,f=n[0],m=n[1],g=n[2],y=n[3];return u=r*f+a*m+s*g+l*y,u<0&&(u=-u,f=-f,m=-m,g=-g,y=-y),1-u>o.E?(c=Math.acos(u),h=Math.sin(c),p=Math.sin((1-i)*c)/h,d=Math.sin(i*c)/h):(p=1-i,d=i),t[0]=p*r+d*f,t[1]=p*a+d*m,t[2]=p*s+d*g,t[3]=p*l+d*y,t}function d(t,e){const n=e[0],i=e[1],r=e[2],a=e[3],o=n*n+i*i+r*r+a*a,s=o?1/o:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=a*s,t}function f(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function m(t,e){const n=e[0]+e[4]+e[8];let i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);const r=(n+1)%3,a=(n+2)%3;i=Math.sqrt(e[3*n+n]-e[3*r+r]-e[3*a+a]+1),t[n]=.5*i,i=.5/i,t[3]=(e[3*r+a]-e[3*a+r])*i,t[r]=(e[3*r+n]+e[3*n+r])*i,t[a]=(e[3*a+n]+e[3*n+a])*i}return t}function g(t,e,n,i){const r=.5*Math.PI/180;e*=r,n*=r,i*=r;const a=Math.sin(e),o=Math.cos(e),s=Math.sin(n),l=Math.cos(n),c=Math.sin(i),u=Math.cos(i);return t[0]=a*l*u-o*s*c,t[1]=o*s*u+a*l*c,t[2]=o*l*c-a*s*u,t[3]=o*l*u+a*s*c,t}const y=l.c,v=l.s,x=l.a,b=h,M=l.b,_=l.d,E=l.l,C=l.e,A=C,W=l.f,w=W,S=l.n,R=l.g,T=l.h;function I(t,e,n){const i=(0,s.e)(e,n);return i<-.999999?((0,s.f)(z,Z,e),(0,s.u)(z)<1e-6&&(0,s.f)(z,q,e),(0,s.n)(z,z),c(t,z,Math.PI),t):i>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):((0,s.f)(z,e,n),t[0]=z[0],t[1]=z[1],t[2]=z[2],t[3]=1+i,S(t,t))}const z=(0,a.c)(),Z=(0,a.f)(1,0,0),q=(0,a.f)(0,1,0);const F=(0,r.a)(),k=(0,r.a)();const P=(0,i.c)();Object.freeze(Object.defineProperty({__proto__:null,identity:function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},setAxisAngle:c,getAxisAngle:u,multiply:h,rotateX:function(t,e,n){n*=.5;const i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*s,t[1]=r*l+a*s,t[2]=a*l-r*s,t[3]=o*l-i*s,t},rotateY:function(t,e,n){n*=.5;const i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l-a*s,t[1]=r*l+o*s,t[2]=a*l+i*s,t[3]=o*l-r*s,t},rotateZ:function(t,e,n){n*=.5;const i=e[0],r=e[1],a=e[2],o=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*s,t[1]=r*l-i*s,t[2]=a*l+o*s,t[3]=o*l-a*s,t},calculateW:function(t,e){const n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t},slerp:p,random:function(t){const e=(0,o.R)(),n=(0,o.R)(),i=(0,o.R)(),r=Math.sqrt(1-e),a=Math.sqrt(e);return t[0]=r*Math.sin(2*Math.PI*n),t[1]=r*Math.cos(2*Math.PI*n),t[2]=a*Math.sin(2*Math.PI*i),t[3]=a*Math.cos(2*Math.PI*i),t},invert:d,conjugate:f,fromMat3:m,fromEuler:g,str:function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},copy:y,set:v,add:x,mul:b,scale:M,dot:_,lerp:E,length:C,len:A,squaredLength:W,sqrLen:w,normalize:S,exactEquals:R,equals:T,rotationTo:I,sqlerp:function(t,e,n,i,r,a){return p(F,e,r,a),p(k,n,i,a),p(t,F,k,2*a*(1-a)),t},setAxes:function(t,e,n,i){const r=P;return r[0]=n[0],r[3]=n[1],r[6]=n[2],r[1]=i[0],r[4]=i[1],r[7]=i[2],r[2]=-e[0],r[5]=-e[1],r[8]=-e[2],S(t,m(t,r))}},Symbol.toStringTag,{value:"Module"}))},85981:(t,e,n)=>{n.d(e,{AR:()=>y,Gr:()=>g,JG:()=>c,Jk:()=>p,KU:()=>f,Ue:()=>l,al:()=>u,ct:()=>m,nF:()=>d,zk:()=>h});var i=n(16889),r=n(21530),a=n(11186),o=n(71353),s=n(11185);function l(t){return t?{origin:(0,o.a)(t.origin),vector:(0,o.a)(t.vector)}:{origin:(0,o.c)(),vector:(0,o.c)()}}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l();return u(t.origin,t.vector,e)}function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,a.c)(n.origin,t),(0,a.c)(n.vector,e),n}function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l();return(0,a.c)(n.origin,t),(0,a.b)(n.vector,e,t),n}function p(t,e){const n=(0,a.b)(s.WM.get(),e,t.origin),r=(0,a.e)(t.vector,n),o=(0,a.e)(t.vector,t.vector),l=(0,i.uZ)(r/o,0,1),c=(0,a.b)(s.WM.get(),(0,a.g)(s.WM.get(),t.vector,l),n);return(0,a.e)(c,c)}function d(t,e,n){return m(t,e,0,1,n)}function f(t,e,n){return(0,a.a)(n,t.origin,(0,a.g)(n,t.vector,e))}function m(t,e,n,r,o){const{vector:l,origin:c}=t,u=(0,a.b)(s.WM.get(),e,c),h=(0,a.e)(l,u)/(0,a.p)(l);return(0,a.g)(o,l,(0,i.uZ)(h,n,r)),(0,a.a)(o,o,t.origin)}function g(t,e){if(v(t,function(t,e){const n=b.get();return n.origin=t,n.vector=e,n}(e.origin,e.direction),!1,x)){const{tA:e,pB:n,distance2:i}=x;if(e>=0&&e<=1)return i;if(e<0)return(0,a.d)(t.origin,n);if(e>1)return(0,a.d)((0,a.a)(s.WM.get(),t.origin,t.vector),n)}return null}function y(t,e,n){return!!v(t,e,!0,x)&&((0,a.c)(n,x.pA),!0)}function v(t,e,n,r){const o=1e-6,l=t.origin,c=(0,a.a)(s.WM.get(),l,t.vector),u=e.origin,h=(0,a.a)(s.WM.get(),u,e.vector),p=s.WM.get(),d=s.WM.get();if(p[0]=l[0]-u[0],p[1]=l[1]-u[1],p[2]=l[2]-u[2],d[0]=h[0]-u[0],d[1]=h[1]-u[1],d[2]=h[2]-u[2],Math.abs(d[0])<o&&Math.abs(d[1])<o&&Math.abs(d[2])<o)return!1;const f=s.WM.get();if(f[0]=c[0]-l[0],f[1]=c[1]-l[1],f[2]=c[2]-l[2],Math.abs(f[0])<o&&Math.abs(f[1])<o&&Math.abs(f[2])<o)return!1;const m=p[0]*d[0]+p[1]*d[1]+p[2]*d[2],g=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],y=p[0]*f[0]+p[1]*f[1]+p[2]*f[2],v=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],x=(f[0]*f[0]+f[1]*f[1]+f[2]*f[2])*v-g*g;if(Math.abs(x)<o)return!1;let b=(m*g-y*v)/x,M=(m+g*b)/v;n&&(b=(0,i.uZ)(b,0,1),M=(0,i.uZ)(M,0,1));const _=s.WM.get(),E=s.WM.get();return _[0]=l[0]+b*f[0],_[1]=l[1]+b*f[1],_[2]=l[2]+b*f[2],E[0]=u[0]+M*d[0],E[1]=u[1]+M*d[1],E[2]=u[2]+M*d[2],r.tA=b,r.tB=M,r.pA=_,r.pB=E,r.distance2=(0,a.d)(_,E),!0}const x={tA:0,tB:0,pA:(0,o.c)(),pB:(0,o.c)(),distance2:0},b=new r.x((()=>({origin:null,vector:null})))},74702:(t,e,n)=>{n.d(e,{bE:()=>l,wu:()=>s});var i=n(21530),r=n(11186),a=n(71353),o=n(85981);n(11185);function s(t,e,n){const i=e[0]-t[0],r=e[1]-t[1],a=n[0]-t[0],o=n[1]-t[1];return.5*Math.abs(i*o-r*a)}function l(t,e,n){return(0,r.b)(c,e,t),(0,r.b)(u,n,t),(0,r.l)((0,r.f)(c,c,u))/2}new i.x(o.Ue),new i.x((()=>({p0:null,p1:null,p2:null})));const c=(0,a.c)(),u=(0,a.c)()},70178:(t,e,n)=>{n.d(e,{k:()=>i});n(93169);function i(t,e){return!!r(t.spatialReference,e.spatialReference)&&t.x===e.x&&t.y===e.y&&t.z===e.z&&t.m===e.m}function r(t,e){return t===e||t&&e&&t.equals(e)}},65618:(t,e,n)=>{n.d(e,{FS:()=>h,MS:()=>d,Pj:()=>l,R3:()=>u,S6:()=>s,TF:()=>p,Tx:()=>c,Wh:()=>o});n(59896),n(93169);var i=n(92026),r=(n(78952),n(41414)),a=n(65156);n(58971),n(27823),n(83040),n(70178);class o{constructor(t,e,n){this.uid=t,this.geometry=e,this.attributes=n,this.visible=!0,this.objectId=null,this.centroid=null}}function s(t){return(0,i.pC)(t.geometry)}class l{constructor(){this.exceededTransferLimit=!1,this.features=[],this.fields=[],this.hasM=!1,this.hasZ=!1,this.geometryType=null,this.objectIdFieldName=null,this.globalIdFieldName=null,this.geometryProperties=null,this.geohashFieldName=null,this.spatialReference=null,this.transform=null}}function c(t,e,n,i){return{x:t,y:e,z:n,hasZ:null!=n,hasM:!1,spatialReference:i,type:"point"}}function u(t){if((0,i.Wi)(t))return 0;switch(t.type){case"point":return 1;case"polyline":{let e=0;for(const n of t.paths)e+=n.length;return e}case"polygon":{let e=0;for(const n of t.rings)e+=n.length;return e}case"multipoint":return t.points.length;case"extent":return 2;case"mesh":{const e=t.vertexAttributes&&t.vertexAttributes.position;return e?e.length/3:0}default:return}}function h(t,e){switch((0,r.cS)(e),"mesh"===t.type&&(t=t.extent),t.type){case"point":e[0]=e[3]=t.x,e[1]=e[4]=t.y,t.hasZ&&(e[2]=e[5]=t.z);break;case"polyline":for(let n=0;n<t.paths.length;n++)(0,r.Wi)(e,t.paths[n],t.hasZ);break;case"polygon":for(let n=0;n<t.rings.length;n++)(0,r.Wi)(e,t.rings[n],t.hasZ);break;case"multipoint":(0,r.Wi)(e,t.points,t.hasZ);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[3]=t.xmax,e[4]=t.ymax,null!=t.zmin&&(e[2]=t.zmin),null!=t.zmax&&(e[5]=t.zmax)}}function p(t,e){switch((0,a.cS)(e),"mesh"===t.type&&(t=t.extent),t.type){case"point":e[0]=e[2]=t.x,e[1]=e[3]=t.y;break;case"polyline":for(let n=0;n<t.paths.length;n++)(0,a.Wi)(e,t.paths[n]);break;case"polygon":for(let n=0;n<t.rings.length;n++)(0,a.Wi)(e,t.rings[n]);break;case"multipoint":(0,a.Wi)(e,t.points);break;case"extent":e[0]=t.xmin,e[1]=t.ymin,e[2]=t.xmax,e[3]=t.ymax}}function d(t,e){return null!=t.objectId?t.objectId:t.attributes&&e?t.attributes[e]:null}(0,r.Ue)(),(0,a.Ue)()},20008:(t,e,n)=>{n.d(e,{Ru:()=>u,bA:()=>c,cM:()=>h,e7:()=>l,pB:()=>s});var i=n(16889),r=n(65156),a=n(376),o=n(69662);function s(t,e,n,i){if(null==i||t.hasZ||(i=void 0),"point"===t.type)return t.x+=e,t.y+=n,t.hasZ&&null!=i&&(t.z+=i),t;if("multipoint"===t.type){const r=t.points;for(let t=0;t<r.length;t++)r[t]=p(r[t],e,n,i);return t}if("extent"===t.type)return t.xmin+=e,t.xmax+=e,t.ymin+=n,t.ymax+=n,null!=i&&(t.zmin+=i,t.zmax+=i),t;const r=(0,o.nA)(t),a="polyline"===t.type?t.paths:t.rings;for(let o=0;o<r.length;o++){const t=r[o];for(let r=0;r<t.length;r++)t[r]=p(t[r],e,n,i)}return"paths"in t?t.paths=a:t.rings=a,t}function l(t,e,n,i,r){const a=t.clone(),l=i.resolution;if("point"===a.type){if(r)s(a,e*l,-n*l);else{const t=i.state.transform,r=i.state.inverseTransform,o=t[0]*a.x+t[2]*a.y+t[4],s=t[1]*a.x+t[3]*a.y+t[5];a.x=r[0]*(o+e)+r[2]*(s+n)+r[4],a.y=r[1]*(o+e)+r[3]*(s+n)+r[5]}return a}if("multipoint"===a.type){if(r)s(a,e*l,-n*l);else{const t=a.points,r=i.state.transform,o=i.state.inverseTransform;for(let i=0;i<t.length;i++){const a=t[i],s=r[0]*a[0]+r[2]*a[1]+r[4],l=r[1]*a[0]+r[3]*a[1]+r[5],c=o[0]*(s+e)+o[2]*(l+n)+o[4],u=o[1]*(s+e)+o[3]*(l+n)+o[5];t[i]=d(a,c,u,void 0)}}return a}if("extent"===a.type){if(r)s(a,e*l,-n*l);else{const t=i.state.transform,r=i.state.inverseTransform,o=t[0]*a.xmin+t[2]*a.ymin+t[4],s=t[1]*a.xmin+t[3]*a.ymin+t[5],l=t[0]*a.xmax+t[2]*a.ymax+t[4],c=t[1]*a.xmax+t[3]*a.ymax+t[5];a.xmin=r[0]*(o+e)+r[2]*(s+n)+r[4],a.ymin=r[1]*(o+e)+r[3]*(s+n)+r[5],a.xmax=r[0]*(l+e)+r[2]*(c+n)+r[4],a.ymax=r[1]*(l+e)+r[3]*(c+n)+r[5]}return a}if(r)s(a,e*l,-n*l);else{const t=(0,o.nA)(a),r="polyline"===a.type?a.paths:a.rings,s=i.state.transform,l=i.state.inverseTransform;for(let i=0;i<t.length;i++){const r=t[i];for(let t=0;t<r.length;t++){const i=r[t],a=s[0]*i[0]+s[2]*i[1]+s[4],o=s[1]*i[0]+s[3]*i[1]+s[5],c=l[0]*(a+e)+l[2]*(o+n)+l[4],u=l[1]*(a+e)+l[3]*(o+n)+l[5];r[t]=d(i,c,u,void 0)}}"paths"in a?a.paths=r:a.rings=r}return a}function c(t,e,n,i){if("point"===t.type){const{x:r,y:a}=t,o=i?i[0]:r,s=i?i[1]:a,l=t.clone(),c=(r-o)*e+o,u=(a-s)*n+s;return l.x=c,l.y=u,l}if("multipoint"===t.type){const s=(0,o.nA)(t),l=(0,r.Ue)(),[c,u,h,p]=(0,a.C6)(l,[s]),f=i?i[0]:(c+h)/2,m=i?i[1]:(p+u)/2,g=t.clone(),y=g.points;for(let t=0;t<y.length;t++){const i=y[t],[r,a]=i,o=(r-f)*e+f,s=(a-m)*n+m;y[t]=d(i,o,s,void 0)}return g}if("extent"===t.type){const{xmin:r,xmax:a,ymin:o,ymax:s}=t,l=i?i[0]:(r+a)/2,c=i?i[1]:(s+o)/2,u=t.clone();if(u.xmin=(r-l)*e+l,u.ymax=(s-c)*n+c,u.xmax=(a-l)*e+l,u.ymin=(o-c)*n+c,u.xmin>u.xmax){const t=u.xmin,e=u.xmax;u.xmin=e,u.xmax=t}if(u.ymin>u.ymax){const t=u.ymin,e=u.ymax;u.ymin=e,u.ymax=t}return u}const s=(0,o.nA)(t),l=(0,r.Ue)(),[c,u,h,p]=(0,a.C6)(l,s),f=i?i[0]:(c+h)/2,m=i?i[1]:(p+u)/2,g=t.clone(),y="polyline"===g.type?g.paths:g.rings;for(let r=0;r<s.length;r++){const t=s[r];for(let i=0;i<t.length;i++){const a=t[i],[o,s]=a,l=(o-f)*e+f,c=(s-m)*n+m;y[r][i]=d(a,l,c,void 0)}}return"paths"in g?g.paths=y:g.rings=y,g}function u(t,e,n,i,r,a){const o=Math.sqrt((n-t)*(n-t)+(i-e)*(i-e));return Math.sqrt((r-t)*(r-t)+(a-e)*(a-e))/o}function h(t,e,n){const r=Math.atan2(e.y-n.y,e.x-n.x)-Math.atan2(t.y-n.y,t.x-n.x),a=Math.atan2(Math.sin(r),Math.cos(r));return(0,i.BV)(a)}function p(t,e,n,i){return d(t,t[0]+e,t[1]+n,null!=t[2]&&null!=i?t[2]+i:void 0)}function d(t,e,n,i){const r=[e,n];return t.length>2&&r.push(null!=i?i:t[2]),t.length>3&&r.push(t[3]),r}},45900:(t,e,n)=>{n.d(e,{m:()=>f});var i=n(27366),r=n(85015),a=n(32718),o=n(92026),s=n(66978),l=n(49861),c=(n(63780),n(93169),n(25243),n(69912)),u=n(15404),h=n(99034),p=n(92853);const d=a.Z.getLogger("esri.views.interactive.InteractiveToolBase");let f=class extends r.Z{constructor(t){super(t),this.manipulators=new p.D,this.preferManipulatorCursor=!1,this.automaticManipulatorSelection=!0,this.hasFocusedManipulators=!1,this.created=!1,this.removeIncompleteOnCancel=!0,this._editableFlags=new Map([[h.bH.MANAGER,!0],[h.bH.USER,!0]]),this._creationFinishedResolver=(0,s.hh)()}get active(){return null!=this.view&&this.view.activeTool===this}set visible(t){this._get("visible")!==t&&(this._set("visible",t),this._syncVisible())}get editable(){return this.getEditableFlag(h.bH.USER)}set editable(t){this.setEditableFlag(h.bH.USER,t)}get updating(){return!1}get cursor(){return null}destroy(){this.manipulators.destroy(),this._set("view",null)}onAdd(){this._syncVisible()}activate(){(0,o.Wi)(this.view)?d.error("Can't activate tool if view is not defined."):((0,u.t)(this.view)&&this.view.focus(),this.onActivate())}deactivate(){this.onDeactivate()}handleInputEvent(t){this.onInputEvent(t)}handleInputEventAfter(t){this.onInputEventAfter(t)}setEditableFlag(t,e){this._editableFlags.set(t,e),this.manipulators.isToolEditable=this.internallyEditable,this._updateManipulatorAttachment(),t===h.bH.USER&&this.notifyChange("editable"),this.onEditableChange()}getEditableFlag(t){return this._editableFlags.get(t)}whenCreated(){return this._creationFinishedResolver.promise}onActivate(){}onDeactivate(){}onShow(){}onHide(){}onEditableChange(){}onInputEvent(t){}onInputEventAfter(t){}get internallyEditable(){return this.getEditableFlag(h.bH.USER)&&this.getEditableFlag(h.bH.MANAGER)}finishToolCreation(){this.created||this._creationFinishedResolver.resolve(this),this._set("created",!0)}_syncVisible(){if(this.constructed)if(this.visible)this._show();else if(this._hide(),this.active)return void(this.view.activeTool=null)}_show(){this._updateManipulatorAttachment(),this.onShow()}_hide(){this._updateManipulatorAttachment(),this.onHide()}_updateManipulatorAttachment(){this.visible?this.manipulators.attach():this.manipulators.detach()}};(0,i._)([(0,l.Cb)({constructOnly:!0})],f.prototype,"view",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],f.prototype,"active",null),(0,i._)([(0,l.Cb)({value:!0})],f.prototype,"visible",null),(0,i._)([(0,l.Cb)({value:!0})],f.prototype,"editable",null),(0,i._)([(0,l.Cb)({readOnly:!0})],f.prototype,"manipulators",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],f.prototype,"updating",null),(0,i._)([(0,l.Cb)()],f.prototype,"cursor",null),(0,i._)([(0,l.Cb)({readOnly:!0})],f.prototype,"preferManipulatorCursor",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],f.prototype,"automaticManipulatorSelection",void 0),(0,i._)([(0,l.Cb)()],f.prototype,"hasFocusedManipulators",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],f.prototype,"created",void 0),(0,i._)([(0,l.Cb)({readOnly:!0})],f.prototype,"removeIncompleteOnCancel",void 0),f=(0,i._)([(0,c.j)("esri.views.interactive.InteractiveToolBase")],f)},92853:(t,e,n)=>{n.d(e,{D:()=>o});var i,r=n(40281),a=n(92026);!function(t){t[t.WhenToolEditable=0]="WhenToolEditable",t[t.WhenToolNotEditable=1]="WhenToolNotEditable",t[t.Always=2]="Always"}(i||(i={}));class o{constructor(){this._isToolEditable=!0,this._manipulators=new r.Z,this._nextManipulatorId=0,this._resourceContexts={manipulator3D:{}},this._attached=!1}set isToolEditable(t){this._isToolEditable=t}get length(){return this._manipulators.length}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WhenToolEditable;return this.addMany([t],e)[0]}addMany(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.WhenToolEditable;return t.map((t=>{const n=this._nextManipulatorId++,i={id:n,manipulator:t,visibilityPredicate:e,attached:!1};return this._manipulators.add(i),this._attached&&this._updateManipulatorAttachment(i),n}))}remove(t){if("number"==typeof t){const e=t;for(let t=0;t<this._manipulators.length;t++)if(this._manipulators.getItemAt(t).id===e){const e=this._manipulators.splice(t,1)[0];return this._detachManipulator(e),e.id}return null}const e=t;for(let n=0;n<this._manipulators.length;n++)if(this._manipulators.getItemAt(n).manipulator===e){const t=this._manipulators.splice(n,1)[0];return this._detachManipulator(t),t.id}return null}removeAll(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._manipulators.removeAll()}attach(){this._manipulators.forEach((t=>{this._updateManipulatorAttachment(t)})),this._attached=!0}detach(){this._manipulators.forEach((t=>{this._detachManipulator(t)})),this._attached=!1}destroy(){this._manipulators.forEach((t=>{let{manipulator:e}=t;e.destroy&&e.destroy()})),this._manipulators.destroy(),this._resourceContexts=null}on(t,e){return this._manipulators.on(t,(t=>{e(t)}))}forEach(t){for(const e of this._manipulators.items)t(e)}some(t){return this._manipulators.items.some(t)}toArray(){const t=[];return this.forEach((e=>t.push(e.manipulator))),t}intersect(t,e){let n=null,i=Number.MAX_VALUE;return this._manipulators.forEach((r=>{let{id:o,manipulator:s,attached:l}=r;if(!l||!s.interactive)return;const c=s.intersectionDistance(t,e);(0,a.pC)(c)&&c<i&&(i=c,n={id:o,manipulator:s})})),n}findById(t){if((0,a.Wi)(t))return null;for(const e of this._manipulators.items)if(t===e.id)return e.manipulator;return null}_updateManipulatorAttachment(t){this._isManipulatorItemVisible(t)?this._attachManipulator(t):this._detachManipulator(t)}_attachManipulator(t){t.attached||(t.manipulator.attach&&t.manipulator.attach(this._resourceContexts),t.attached=!0)}_detachManipulator(t){if(!t.attached)return;const e=t.manipulator;e.grabbing=!1,e.dragging=!1,e.hovering=!1,e.selected=!1,e.detach&&e.detach(this._resourceContexts),t.attached=!1}_isManipulatorItemVisible(t){return t.visibilityPredicate===i.Always||(this._isToolEditable?t.visibilityPredicate===i.WhenToolEditable:t.visibilityPredicate===i.WhenToolNotEditable)}}},74229:(t,e,n)=>{n.d(e,{AN:()=>M,Cf:()=>g,M2:()=>d,QY:()=>b,Xd:()=>p,a9:()=>f,bD:()=>x,di:()=>v,hM:()=>C,kY:()=>E,oq:()=>y,zh:()=>_});n(59486);var i=n(84652),r=n(16889),a=n(92026),o=n(17842),s=n(71353),l=n(79803),c=n(50951),u=n(20008),h=n(7882);function p(t,e){return t.events.on("drag",function(t,e){let n=null,i=null;return r=>{if("cancel"===r.action)return void((0,a.pC)(i)&&(i.execute({action:"cancel"}),n=null,i=null));const o={action:r.action,screenStart:r.start,screenEnd:r.screenPoint};"start"===r.action&&(0,a.Wi)(n)&&(n=new C,i=new C,e(t,n,i,r.pointerType,o)),(0,a.pC)(n)&&n.execute(o),"end"===r.action&&(0,a.pC)(n)&&(n=null,i=null)}}(t,e))}function d(t,e){const n=[t.x,t.y,t.z],i=e,r=[Math.cos(i),Math.sin(i)],a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===a)return null;r[0]/=a,r[1]/=a;const o=t=>{const e=(t.x-n[0])*r[0]+(t.y-n[1])*r[1];t.x=n[0]+e*r[0],t.y=n[1]+e*r[1]};return t=>(o(t.mapStart),o(t.mapEnd),t)}function f(t,e){let n=null;return i=>{if("start"===i.action&&(n=function(t,e,n){const i=t.geometry;if((0,a.Wi)(i))return null;if("mesh"===i.type)return function(t,e,n,i){if((0,a.pC)(e.transform))return function(t,e,n,i){const r=m(n.getOriginPoint(e.spatialReference),i),o=e.spatialReference;return(0,a.Wi)(r)?null:{move:(e,i,c)=>{const h=(0,u.pB)(r.clone(),e,i,c);if(h.spatialReference.equals(o))n.origin=(0,s.f)(h.x,h.y,h.z);else{const t=(0,l.iV)(h,o);(0,a.pC)(t)&&(n.origin=(0,s.f)(t.x,t.y,t.z))}t.notifyMeshTransformChanged(),t.notifyGeometryChanged()}}}(t,e,e.transform,n);if(!e.spatialReference.equals(n))return null;let r=0,o=0,p=0;return{move:(n,a,s)=>{const l=n-r,u=a-o,d=s-p;if(l||u||d){const f=new h.Z(e.origin.x+l,e.origin.y+u,e.origin.z+d,e.origin.spatialReference);e.centerAt(f,{geographic:i===c.JY.Global}),t.notifyGeometryChanged(),r=n,o=a,p=s}}}}(t,i,e,n);const r=m(i,e),o=i.spatialReference;return(0,a.Wi)(r)?null:{move:(e,n,i)=>{const a=(0,u.pB)(r.clone(),e,n,i);a.spatialReference.equals(o)?t.geometry=a:t.geometry=(0,l.iV)(a,o)}}}(t,i.mapStart.spatialReference,e)),(0,a.Wi)(n))return null;const r=i.mapEnd.x-i.mapStart.x,o=i.mapEnd.y-i.mapStart.y,p=i.mapEnd.z-i.mapStart.z;return n.move(r,o,p),{...i,translationX:r,translationY:o,translationZ:p}}}function m(t,e){return(0,a.Wi)(t)?null:t.spatialReference.equals(e)?t.clone():(0,l.iV)(t,e)}function g(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,i=null;const r=(0,a.pC)(e)&&!t.spatialReference.equals(e)?t=>(0,a.pC)(t)?(0,l.iV)(t,e):t:t=>t,o={exclude:[],...n};return e=>{if("start"===e.action&&(i=r(t.toMap(e.screenStart,o))),(0,a.Wi)(i))return null;const n=r(t.toMap(e.screenEnd,o));return(0,a.pC)(n)?{...e,mapStart:i,mapEnd:n}:null}}function y(t,e){const n=t.map((t=>(0,a.Wg)(f(t,e)))).filter((t=>(0,a.pC)(t)));return t=>{const e=t.mapEnd.x-t.mapStart.x,i=t.mapEnd.y-t.mapStart.y,r=t.mapEnd.z-t.mapStart.z;return n.forEach((e=>e(t))),{...t,translationX:e,translationY:i,translationZ:r}}}function v(t,e){const n=new Map;for(const r of e)n.set(r,(0,i.d9)(t[r]));return e=>(n.forEach(((e,n)=>{t[n]=e})),e)}function x(t){return(0,a.pC)(t.geometry)&&"mesh"===t.geometry.type?function(t,e){const n=(0,a.pC)(e.transform)?e.transform.clone():null,i=e.vertexAttributes.clonePositional();return r=>(e.transform=n,e.vertexAttributes=i,t.notifyGeometryChanged(),r)}(t,t.geometry):v(t,["geometry"])}function b(t){const e=t.map((t=>(0,a.Wg)(x(t)))).filter((t=>(0,a.pC)(t)));return t=>(e.forEach((e=>e(t))),t)}function M(){let t=0,e=0,n=0;return i=>{"start"===i.action&&(t=i.mapStart.x,e=i.mapStart.y,n=i.mapStart.z);const r=i.mapEnd.x-t,a=i.mapEnd.y-e,o=i.mapEnd.z-n;return t=i.mapEnd.x,e=i.mapEnd.y,n=i.mapEnd.z,{...i,mapDeltaX:r,mapDeltaY:a,mapDeltaZ:o,mapDeltaSpatialReference:i.mapStart.spatialReference}}}function _(){let t=0,e=0;return n=>{"start"===n.action&&(t=n.screenStart.x,e=n.screenStart.y);const i=n.screenEnd.x-t,r=n.screenEnd.y-e;return t=n.screenEnd.x,e=n.screenEnd.y,{...n,screenDeltaX:i,screenDeltaY:r}}}function E(t,e){let n=null,i=0,a=0;return s=>{if("start"===s.action&&(n=t.toScreen(e),n.x<0||n.x>t.width||n.y<0||n.y>t.height?n=null:(i=s.screenStart.x-n.x,a=s.screenStart.y-n.y)),null==n)return null;const l=(0,r.uZ)(s.screenEnd.x-i,0,t.width),c=(0,r.uZ)(s.screenEnd.y-a,0,t.height),u=(0,o.vW)(l,c);return s.screenStart=n,s.screenEnd=u,s}}class C{constructor(){this.execute=()=>{}}next(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new C;return(0,a.pC)(t)&&(this.execute=n=>{const i=t(n);(0,a.pC)(i)&&e.execute(i)}),e}}}}]);
//# sourceMappingURL=2497.30edcadc.chunk.js.map