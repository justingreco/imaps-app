{"version":3,"file":"static/js/5034.3627ae13.chunk.js","mappings":"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","sources":["components/Panels/Basemaps/utils/basemaps.ts","components/Panels/Basemaps/utils/tips.ts","components/Panels/Basemaps/utils/useBasemaps.ts","components/Panels/Basemaps/Basemaps.tsx"],"sourcesContent":["import * as geometryEngine from \"@arcgis/core/geometry/geometryEngine\";\nimport BasemapGallery from \"@arcgis/core/widgets/BasemapGallery\";\nimport MapView from \"@arcgis/core/views/MapView\";\nimport PortalBasemapsSource from \"@arcgis/core/widgets/BasemapGallery/support/PortalBasemapsSource\";\nimport request from \"@arcgis/core/request\";\nimport Polygon from \"@arcgis/core/geometry/Polygon\";\nimport Basemap from \"@arcgis/core/Basemap\";\nimport Color from \"@arcgis/core/Color\";\nimport * as reactiveUtils from \"@arcgis/core/core/reactiveUtils\";\nimport FeatureLayer from \"@arcgis/core/layers/FeatureLayer\";\nimport VectorTileLayer from \"@arcgis/core/layers/VectorTileLayer\";\n\nexport function initializeBasemaps(\n  view: MapView,\n  ref: HTMLDivElement,\n  id: string\n) {\n  const gallery = new BasemapGallery({\n    container: ref,\n    view: view,\n    source: {\n      query: `id: ${id}`,\n    },\n  });\n  reactiveUtils.whenOnce(\n    () => gallery.source.basemaps.length > 0)\n    .then(() => {\n      const basemap = gallery.source.basemaps.find(basemap => {\n        return basemap.portalItem.title === view.map.basemap.title;\n      });\n      if (basemap) {\n        gallery.activeBasemap = basemap;\n      }\n    });\n}\n\nlet images: BasemapGallery;\nexport function initializeImageMaps(\n  view: MapView,\n  ref: HTMLDivElement,\n  id: string,\n  setShowAlert: Function\n) {\n  images = new BasemapGallery({\n    container: ref,\n    view: view,\n    source: new PortalBasemapsSource({\n      query: `id: ${id}`,\n      filterFunction: filterBasemaps,\n      updateBasemapsCallback: (items: Basemap[]) => {\n        return items.reverse();\n      },\n    }),\n  });\n  reactiveUtils.whenOnce(\n    () => images.source.basemaps.length > 0)\n    .then(() => {\n      const basemap = images.source.basemaps.find(basemap => {\n        return basemap.portalItem.title === view.map.basemap.title;\n      });\n      if (basemap) {\n        images.activeBasemap = basemap;\n      }\n    });  \n  images.when(() => {\n    images.source.basemaps.reverse();\n    if (!imageryBoundary) {\n      getBoundary(view).then((boundary: Polygon) => {\n        imageryBoundary = boundary;\n        inRaleigh = checkBoundary(view.extent);\n        (images.source as PortalBasemapsSource).refresh();\n      });\n    }\n    view.watch(\"extent\", (extent: __esri.Extent) =>\n      viewExtentChanged(extent, view, setShowAlert)\n    );\n  });\n  view.map.watch(\"basemap\", (basemap: Basemap) => {\n    checkBasemapTheme(basemap, view).then((isLight: boolean) => {\n      setPropertyColor(view, isLight);\n    });\n  });\n}\n\nexport function initializeEsriMaps(view: MapView, ref: HTMLDivElement) {\n  const esri = new BasemapGallery({\n    container: ref,\n    view: view,\n  });\n  reactiveUtils.whenOnce(\n    () => esri.source.basemaps.length > 0)\n    .then(() => {\n      const basemap = esri.source.basemaps.find(basemap => {\n        return basemap.portalItem.title === view.map.basemap.title;\n      });\n      if (basemap) {\n        esri.activeBasemap = basemap;\n      }\n    });    \n}\n\nlet imageryBoundary: Polygon;\nlet inRaleigh: Boolean;\nlet wasRaleigh: Boolean;\nconst checkBoundary = (extent: __esri.Extent): Boolean => {\n  return geometryEngine.intersects(extent, imageryBoundary);\n};\n\nexport const filterBasemaps = (item: __esri.Basemap): boolean => {\n  if (inRaleigh) {\n    return true;\n  } else {\n    return item.portalItem.tags.includes(\"countywide\");\n  }\n};\n\nconst getBoundary = (view: __esri.MapView): Promise<Polygon> => {\n  return new Promise((resolve, reject) => {\n    request(\n      \"https://maps.raleighnc.gov/images/rest/services/Orthos2020/ImageServer/queryBoundary?outSR=102100&f=json\",\n      { responseType: \"json\" }\n    ).then((response) => {\n      imageryBoundary = Polygon.fromJSON(response.data.shape);\n      resolve(imageryBoundary);\n    });\n  });\n};\n\nconst viewExtentChanged = (\n  extent: __esri.Extent,\n  view: MapView,\n  setShowAlert: Function\n) => {\n  if (\n    imageryBoundary &&\n    images.source.basemaps.find(\n      (basemap) => images.activeBasemap.title === basemap.title\n    )\n  ) {\n    wasRaleigh = inRaleigh;\n    inRaleigh = checkBoundary(view.extent);\n    if (wasRaleigh !== inRaleigh) {\n      (images.source as PortalBasemapsSource).refresh();\n      setTimeout(() => {\n        const match = images.source.basemaps.find(\n          (basemap) => view.map.basemap.title === basemap.title\n        );\n        if (!match) {\n          const from = images.activeBasemap.title;\n          images.activeBasemap = images.source.basemaps.at(0);\n          const to = images.activeBasemap.title;\n          setShowAlert({ show: true, from: from, to: to });\n        } else {\n          images.activeBasemap = match;\n        }\n      }, 1000);\n    }\n  }\n};\n\nexport const updateBlendOpacity = (opacityValue: number, view: __esri.MapView, streetMapId: string, opacity: number) => {\n  const layer = view.map.basemap.baseLayers.find(layer => {\n    if (layer.type === 'vector-tile') {\n      return (layer as VectorTileLayer).portalItem.id === streetMapId\n    } else {\n      return false;\n    }\n  });\n  \n  if (layer) {\n    layer.opacity = opacity;\n  }\n}\nexport const blendBasemap = (switched: boolean, view: __esri.MapView, streetMapId: string, opacity: number) => {\n const streetMap = new VectorTileLayer({portalItem: {id: streetMapId}});\n if (switched) {\n  streetMap.opacity = opacity;\n  view.map.basemap.baseLayers.add(streetMap);\n } else {\n  view.map.basemap.baseLayers.remove(streetMap);\n  const layer = view.map.basemap.baseLayers.find(layer => {\n    if (layer.type === 'vector-tile') {\n      return (layer as VectorTileLayer).portalItem.id === streetMap.portalItem.id;\n    } else {\n      return false;\n    }\n  });\n  \n  if (layer) {\n    view.map.basemap.baseLayers.remove(layer);\n  }\n }\n images.watch('activeBasemap', activeBasemap => {\n  if (switched) {\n    const layer = activeBasemap.baseLayers.find((layer: __esri.Layer) => {\n      if (layer.type === 'vector-tile') {\n        return (layer as VectorTileLayer).portalItem.id === streetMap.portalItem.id;\n      } else {\n        return false;\n      }\n    });\n    if (!layer) {\n     activeBasemap.baseLayers.add(streetMap);\n    }\n  }\n });\n}\n\nconst checkBasemapTheme = (\n  basemap: Basemap,\n  view: MapView\n): Promise<boolean> => {\n  return new Promise((resolve, reject) => {\n    if (basemap.baseLayers.length) {\n      const baseLayer = basemap.baseLayers.find((layer) => {\n        return layer.type === \"vector-tile\";\n      });\n      if (baseLayer?.type === \"vector-tile\") {\n        reactiveUtils\n          .whenOnce(() => baseLayer.loaded)\n          .then((loaded) => {\n            const background = (\n              baseLayer as __esri.VectorTileLayer\n            ).getStyleLayer(\"background\");\n            if (background) {\n              const color: Color = new Color(\n                background.paint[\"background-color\"]\n              );\n              view.background = { color: color } as __esri.ColorBackground;\n              resolve((color as any).isBright);\n            } else {\n              resolve(true);\n            }\n          });\n      } else if (\n        !baseLayer &&\n        basemap.baseLayers.getItemAt(0).type === \"imagery\"\n      ) {\n        resolve(false);\n      } else {\n        resolve(true);\n      }\n    }\n  });\n};\n\nconst setPropertyColor = (view: MapView, isLight: boolean) => {\n  const layer = view.map.allLayers.find((layer) => {\n    return layer.title.includes(\"Property\") && layer.type === \"feature\";\n  });\n  if (layer) {\n    const renderer = (\n      (layer as FeatureLayer)?.renderer as __esri.SimpleRenderer\n    ).clone();\n    if (isLight) {\n      (renderer.symbol as __esri.SimpleFillSymbol).outline.color.r = 0;\n      (renderer.symbol as __esri.SimpleFillSymbol).outline.color.g = 0;\n      (renderer.symbol as __esri.SimpleFillSymbol).outline.color.b = 0;\n    } else {\n      (renderer.symbol as __esri.SimpleFillSymbol).outline.color.r = 255;\n      (renderer.symbol as __esri.SimpleFillSymbol).outline.color.g = 255;\n      (renderer.symbol as __esri.SimpleFillSymbol).outline.color.b = 255;\n    }\n    (layer as FeatureLayer).renderer = renderer;\n  }\n};\n","export const tips = {title: 'Basemap Tips', tips: [\n    {\n        title: 'Imagery Basemap',\n        text: 'The lastest years of imagery are available in the Imagery basemap under the base maps option.  We recommend using this base map for imagery, unless you need to access historic imagery.',\n      },\n      {\n        title: 'Esri Basemaps',\n        text: 'You now have access to all basemaps created by Esri by select the Esri Basemaps option from the dropdown.',\n      },\n      {\n        title: 'Property Color',\n        text: 'If you switch to a dark themed basemap or an imagery basemap, the property lines will change to white for better visibility.  They will change back to black when on a light themed basemap.',\n      },\n      {\n        title: 'Available Imagery',\n        text: 'If you go to an area outside of Raleigh, the list of available imagery will change to show you what is available in your area.  Also it will switch to the latest year available and warn you the the imagery has changed.',\n      },\n]}","import MapView from \"@arcgis/core/views/MapView\";\nimport { useCallback, useEffect, useRef, useState } from \"react\";\nimport { blendBasemap, initializeBasemaps, initializeEsriMaps, initializeImageMaps, updateBlendOpacity } from \"./basemaps\";\nimport { tips } from \"./tips\";\n\nconst useBasemaps = (args: any) => {\n    const [view, setView] = useState<MapView>();\n    const [showAlert, setShowAlert] = useState<any>({\n      show: false,\n      from: \"\",\n      to: \"\",\n    });\n    const [isActive, setIsActive] = useState(false);\n    const [blendActive, setBlendActive] = useState(false);\n\n    const loaded = useRef(false);\n    const basemapRef = useRef(null);\n    const imagesRef = useRef(null);\n    const esriRef = useRef(null);\n    const opacity = useRef(0.5);\n    const mapGroup = \"f6329364e80c438a958ce74aadc3a89f\";\n    const imageGroup = \"492386759d264d49948bf7f83957ddb9\";\n    const streetMapId = '02d50d24991747538e218e0a5806e9b3';\n    useEffect(() => {\n      setView(args.view);\n      if (!loaded.current) {\n        loaded.current = true;\n        initializeBasemaps(args.view, basemapRef.current as any, mapGroup);\n        initializeImageMaps(\n          args.view,\n          imagesRef.current as any,\n          imageGroup,\n          setShowAlert\n        );\n        initializeEsriMaps(args.view, esriRef.current as any);\n        setTimeout(() => {\n          document.querySelector('.basemaps calcite-tab-nav')?.shadowRoot?.querySelector('.tab-nav')?.setAttribute('style', 'overflow: hidden');\n        },100);\n      }\n    }, [args.view]);\n    useEffect(() => {\n      setIsActive(args.isActive);\n    }, [args.isActive]);\n    const panelDismissed = useCallback((e: any) => {\n      args.panelDismissed();\n    }, []);    \n    const tipsClicked = useCallback((e: any) => {\n        args.showTips(tips);\n        }, []);  \n      const blendUpdated = useCallback((e: any) => {\n        setBlendActive(e.detail.switched);\n       blendBasemap(e.detail.switched, args.view, streetMapId, opacity.current);\n      }, []);        \n      const blendOpacityChanged = useCallback((e: any) => {\n        opacity.current = 1 - e.target.value/100;\n        updateBlendOpacity(e.target.value/100, args.view, streetMapId, opacity.current);\n       }, []);              \n    return {\n        basemapRef,\n        imagesRef,\n        esriRef,\n        mapGroup,\n        imageGroup,\n        view,\n        showAlert,\n        isActive,\n        panelDismissed,\n        tipsClicked  ,\n        blendUpdated ,\n        blendOpacityChanged,\n        blendActive\n        }        \n}\nexport default useBasemaps;","import {\n  CalciteAlert,\n  CalciteTab,\n  CalciteTabNav,\n  CalciteTabs,\n  CalciteTabTitle,\n  CalcitePanel,\n  CalciteAction,\n  CalciteTooltip,\n  CalciteSwitch,\n  CalciteLabel,\n  CalciteSlider,\n} from \"@esri/calcite-components-react\";\nimport React, {  } from \"react\";\nimport Blend from \"./Blend/Blend\";\n\nimport \"./Basemaps.css\";\nimport useBasemaps from \"./utils/useBasemaps\";\nfunction Basemaps(args: any) {\n    \n  const { \n    basemapRef,\n    imagesRef,\n    esriRef,\n    showAlert,\n    isActive,\n    panelDismissed,\n    tipsClicked,\n    blendUpdated,\n    blendOpacityChanged,\n    blendActive\n  } = useBasemaps(args);\n  return (\n    <CalcitePanel\n      id=\"basemaps-panel\"\n      heading=\"Basemaps\"\n      hidden={!isActive}\n      closed={!isActive ? true : undefined}\n      closable\n      onCalcitePanelClose={panelDismissed}\n    >\n      <CalciteAction id=\"tip\" icon=\"lightbulb\"  text=\"Tips\" slot=\"header-actions-end\" onClick={tipsClicked}></CalciteAction>\n      <CalciteTooltip label=\"Show Tip\" referenceElement=\"tip\">Show Tip</CalciteTooltip>\n      <div className=\"basemaps\">\n        <CalciteTabs position=\"below\" layout=\"center\" scale=\"l\">\n          <CalciteTabNav slot=\"tab-nav\">\n            <CalciteTabTitle>Maps</CalciteTabTitle>\n            <CalciteTabTitle>Images</CalciteTabTitle>\n            <CalciteTabTitle>Esri</CalciteTabTitle>\n            {/* <CalciteTabTitle>Blend</CalciteTabTitle> */}\n          </CalciteTabNav>\n          <CalciteTab>\n            <div ref={basemapRef}></div>\n          </CalciteTab>\n          <CalciteTab>\n            <br/>\n            <CalciteLabel layout=\"inline\" alignment=\"end\">\n              <CalciteSwitch onCalciteSwitchChange={blendUpdated}></CalciteSwitch>\n              Blend\n            </CalciteLabel>\n            <CalciteSlider hidden={blendActive ? undefined : true} max={100} min={0} value={50} onCalciteSliderInput={blendOpacityChanged}></CalciteSlider>\n            <div ref={imagesRef}></div>\n          </CalciteTab>\n          <CalciteTab>\n            <div ref={esriRef}></div>\n          </CalciteTab>\n          {/* <CalciteTab>\n            <Blend\n              view={view}\n              mapGroup={mapGroup}\n              imageGroup={imageGroup}\n            ></Blend>\n          </CalciteTab> */}\n        </CalciteTabs>\n        <CalciteAlert\n          active={showAlert.show === true ? true : undefined}\n          autoDismiss\n          autoDismissDuration=\"medium\"\n          color=\"yellow\"\n          label=\"Imagery Year Changed\"\n        >\n          <div slot=\"title\">Imagery Not Available</div>\n          <div slot=\"message\">{`Imagery for ${showAlert.from} only available inside Raleigh, base map has changed to ${showAlert.to}`}</div>\n        </CalciteAlert>\n      </div>\n    </CalcitePanel>\n  );\n}\n\nexport default React.memo(Basemaps);\n"],"names":["images","imageryBoundary","inRaleigh","wasRaleigh","checkBoundary","extent","geometryEngine","intersects","filterBasemaps","item","portalItem","tags","includes","getBoundary","view","Promise","resolve","reject","request","responseType","then","response","Polygon","data","shape","viewExtentChanged","setShowAlert","source","basemaps","find","basemap","activeBasemap","title","refresh","setTimeout","match","map","from","at","to","show","checkBasemapTheme","baseLayers","length","baseLayer","layer","type","reactiveUtils","loaded","background","getStyleLayer","color","Color","paint","isBright","getItemAt","setPropertyColor","isLight","allLayers","renderer","clone","symbol","outline","r","g","b","tips","text","args","setView","useState","showAlert","isActive","setIsActive","blendActive","setBlendActive","useRef","basemapRef","imagesRef","esriRef","opacity","mapGroup","imageGroup","streetMapId","useEffect","current","ref","id","gallery","BasemapGallery","container","query","initializeBasemaps","PortalBasemapsSource","filterFunction","updateBasemapsCallback","items","reverse","when","boundary","watch","initializeImageMaps","esri","initializeEsriMaps","document","querySelector","shadowRoot","setAttribute","panelDismissed","useCallback","e","tipsClicked","showTips","blendUpdated","detail","switched","streetMap","VectorTileLayer","add","remove","blendBasemap","blendOpacityChanged","target","value","opacityValue","updateBlendOpacity","Basemaps","useBasemaps","heading","hidden","closed","undefined","closable","onCalcitePanelClose","icon","slot","onClick","label","referenceElement","className","position","layout","scale","alignment","onCalciteSwitchChange","max","min","onCalciteSliderInput","active","autoDismiss","autoDismissDuration","React"],"sourceRoot":""}