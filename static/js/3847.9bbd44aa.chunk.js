"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[3847],{23847:(e,t,l)=>{l.r(t),l.d(t,{default:()=>ce});var o=l(72791),n=(l(90521),l(89401),l(85580)),i=l(97426),a=l(33513),c=l(61459),s=l(16851),r=l(58009),d=l(80045),p=l(76200),u=l(75021),m=l(49729),y=l(86828);let h,x,v,b,g,j,S,f,w,C,k,Z,L,U="",I=new c.Z({color:[255,0,0,.5],style:"solid",outline:{width:2,color:[255,0,0,1]}}),E=new s.Z({width:1,color:[255,0,0,1],style:"solid",cap:"round",join:"round"}),N=new r.Z({color:[255,0,0,1],haloColor:[255,255,255,1],haloSize:"1px",text:"",xoffset:3,yoffset:3,font:{size:10,family:"Aerial",weight:"bold"}});function T(e,t,l){const o=new i.Z({view:t,layer:e,updateOnGraphicClick:!0});return o.on("create",z),o}function z(e){"complete"===e.state&&("polygon"===e.graphic.geometry.type&&(e.graphic.symbol=I,g.polygonLayer.add(e.graphic),w.create(e.tool)),"polyline"===e.graphic.geometry.type&&(e.graphic.symbol=E,g.polylineLayer.add(e.graphic),f.create(e.tool)),"text"===U&&(e.graphic.symbol=N,g.textLayer.add(e.graphic),C.create("point")),"point"===U&&(e.graphic.symbol=j,g.pointLayer.add(e.graphic),S.create("point")),Z&&Z.remove(),Z=k.highlight(e.graphic),L=e.graphic)}function F(e,t,l){U=e,l(e===t?"":e),""===t&&P(),["polygon","rectangle","circle"].includes(e)&&w.create(e),["polyline"].includes(e)&&f.create(e),"text"===e&&f.create("point"),"point"===e&&f.create("point")}let $=!1;function G(e,t,l){const o=document.getElementById("polygon-preview");o&&!$&&(I.color=e,I.outline.color=t,I.outline.width=l,w&&(w.activeFillSymbol=I,g.polygonLayer&&R(g.polygonLayer,I)),$=!0,o.innerHTML="",y.l3(I,{node:o,size:24}).then((()=>$=!1)))}function R(e,t){L&&(e.remove(L),L.symbol=t,L=L.clone(),e.add(L),Z=k.highlight(L))}function B(e,t,l){(0,p.default)(`${e.url}${e.cimRef.replace(".","")}`).then((e=>{j=new u.Z({data:{type:"CIMSymbolReference",symbol:null===e||void 0===e?void 0:e.data}}),m.ZB(j,t),m.PI(j,l),g.pointLayer&&R(g.pointLayer,j),S.pointSymbol=j;const o=document.getElementById("icon-preview");o&&(o.innerHTML="",y.l3(j,{node:o,size:l}))}))}function K(e,t){E.color=e,E.width=t,f&&(f.polylineSymbol=E,f.updateGraphics.forEach((e=>{e.symbol=E})),g.polylineLayer&&R(g.polylineLayer,E));const l=document.getElementById("line-preview");l&&(l.innerHTML="",y.l3(E,{node:l,size:t}))}function M(e,t,l,o,n,i){N.color=t,N.font.size=e,N.haloColor=o,N.haloSize=n?l:0,N.text=i,C.pointSymbol=N,g.textLayer&&R(g.textLayer,N)}function P(){S.cancel(),f.cancel(),w.cancel(),C.cancel()}l(24929),l(95817),l(9946),l(50186),l(21775),l(11151),l(5176);var A=l(51995),H=l(80184);function q(e){const t=(0,o.useRef)(null),l=(0,o.useRef)(null),[i,a]=(0,o.useState)(),[c,s]=(0,o.useState)(0);return(0,o.useEffect)((()=>{!i&&e.color&&(a(new A.Z(e.color)),s(100*(1-e.color[3])))}),[e.color]),(0,H.jsxs)("div",{id:e.id,children:[(0,H.jsxs)(n.ZK,{children:[e.label," Color",(0,H.jsx)(n.ln,{id:`${e.id}-popover-button`,width:"half",iconEnd:"pencil",color:"neutral",appearance:"outline",children:(0,H.jsx)(n.jv,{color:null===i||void 0===i?void 0:i.toHex()})})]}),(0,H.jsx)(n.qZ,{ref:t,overlayPositioning:"fixed",placement:"top-leading",label:"",referenceElement:`${e.id}-popover-button`,children:(0,H.jsxs)(n.N$,{heading:"Color",children:[(0,H.jsx)(n.G1,{icon:"x",text:"",slot:"header-actions-end",onClick:()=>{var l;null===(l=t.current)||void 0===l||l.toggle();const o=new A.Z(i);o.a=1-c/100,e.colorSet(o)}}),(0,H.jsx)(n.ne,{ref:l,hideSaved:!0,hideHex:!0,hideChannels:!0,value:i?i.toHex():"#FF0000",onCalciteColorPickerInput:e=>a(new A.Z(e.target.value))})]})}),!e.hideTransparency&&(0,H.jsxs)(n.ZK,{children:[e.label," Transparency",(0,H.jsxs)("div",{className:"slider-input",children:[(0,H.jsx)(n.XQ,{max:100,min:0,value:c,onCalciteSliderInput:t=>{let l=t.target.value;l>100&&(l=100),l<0&&(l=0),s(l);const o=new A.Z(i);o.a=1-c/100,e.colorSet(o)}}),(0,H.jsx)(n.e,{max:100,min:0,type:"number",numberButtonType:"none",suffixText:"%",value:c,onCalciteInputInput:t=>{let l=parseInt(t.target.value);l>100&&(l=100),l<0&&(l=0),s(l);const o=new A.Z(i);o.a=1-c/100,e.colorSet(o)}})]})]})]})}const O=o.memo(q);function Q(e){const[t,l]=(0,o.useState)();return(0,o.useEffect)((()=>{l(e.value)}),[e.value]),(0,H.jsxs)(n.ZK,{children:[e.label,(0,H.jsxs)("div",{className:"slider-input",children:[(0,H.jsx)(n.XQ,{max:e.max,min:e.min,value:t,onCalciteSliderInput:t=>{l(t.target.value),e.sizeSet(t.target.value)}}),(0,H.jsx)(n.e,{type:"number",numberButtonType:"none",min:e.min,max:e.max,value:t,suffixText:"px",onCalciteInputInput:t=>{l(parseFloat(t.target.value)),e.sizeSet(parseFloat(t.target.value))}})]})]})}const W=o.memo(Q);function X(e){const[t,l]=(0,o.useState)(new A.Z([255,0,0,1])),[n,i]=(0,o.useState)(2);return(0,o.useEffect)((()=>{t&&n&&e.polylineSymbolUpdated(t,n)}),[t,n]),(0,H.jsxs)("div",{id:"line-symbols",children:[(0,H.jsx)("div",{id:"line-preview",className:"preview"}),(0,H.jsx)(O,{id:"line",label:"Line",color:t.toRgba(),colorSet:t=>{l(t),e.polylineSymbolUpdated(t,n)}}),(0,H.jsx)(W,{value:n,min:.1,max:18,label:"Width",sizeSet:l=>{i(l),e.polylineSymbolUpdated(t,n)}})]})}const _=o.memo(X);function D(e){const[t,l]=(0,o.useState)(new A.Z([255,0,0,.5])),[n,i]=(0,o.useState)(new A.Z([255,0,0,1])),[a,c]=(0,o.useState)(2);return(0,o.useEffect)((()=>{t&&n&&a&&e.polygonSymbolUpdated(t,n,a)}),[t,n,a]),(0,H.jsxs)("div",{id:"polygon-symbols",children:[(0,H.jsx)("div",{id:"polygon-preview",className:"preview"}),(0,H.jsx)(O,{id:"polygon-fill",color:t.toRgba(),label:"Fill",colorSet:t=>{l(t),e.polygonSymbolUpdated(t,n,a)}}),(0,H.jsx)(O,{id:"polygon-outline",color:n.toRgba(),label:"Outline",colorSet:l=>{i(l),e.polygonSymbolUpdated(t,l,a)}}),(0,H.jsx)(W,{label:"Outline Width",min:.1,max:18,value:a,sizeSet:l=>{c(l),e.polygonSymbolUpdated(t,n,a)}})]})}const V=o.memo(D);function J(e){const[t,l]=(0,o.useState)(new A.Z([255,0,0,1])),[i,a]=(0,o.useState)(10),[c,s]=(0,o.useState)(!1),[r,d]=(0,o.useState)(1),[p,u]=(0,o.useState)(new A.Z([255,255,255,1])),[m,y]=(0,o.useState)("");return(0,H.jsxs)("div",{id:"text-symbols",children:[(0,H.jsxs)(n.ZK,{children:["Text",(0,H.jsx)(n.e,{type:"textarea",scale:"m",value:m,onCalciteInputInput:e=>{y(e.target.value)},onCalciteInputChange:l=>{requestAnimationFrame((()=>{e.textSymbolUpdated(i,t,r,p,c,m)}))}})]}),(0,H.jsx)(O,{id:"font",label:"Font",color:t.toRgba(),hideTransparency:!0,colorSet:t=>{l(t),e.textSymbolUpdated(i,t,r,p,c,m)}}),(0,H.jsxs)(n.ZK,{children:["Font Size",(0,H.jsx)(n.e,{type:"number",min:5,max:125,value:i.toString(),onCalciteInputInput:l=>{a(parseFloat(l.target.value)),e.textSymbolUpdated(i,t,r,p,c,m)}})]}),(0,H.jsxs)(n.ZK,{layout:"inline",children:["Halo",(0,H.jsx)(n.$p,{checked:!!c||void 0,onCalciteSwitchChange:l=>{s(l.target.checked),e.textSymbolUpdated(i,t,r,p,c,m)}})]}),(0,H.jsxs)("div",{id:"halo",hidden:!c||void 0,children:[(0,H.jsx)(O,{id:"halo",label:"",color:p.toRgba(),hideTransparency:!0,colorSet:l=>{u(l),e.textSymbolUpdated(i,t,r,l,c,m)}}),(0,H.jsxs)(n.ZK,{children:["Size",(0,H.jsx)(n.e,{type:"number",min:1,max:10,value:r.toString(),onCalciteInputInput:l=>{d(parseFloat(l.target.value)),e.textSymbolUpdated(i,t,r,p,c,m)}})]})]})]})}const Y=o.memo(J);l(16983);function ee(e){return(0,H.jsxs)("div",{id:"icon-picker",children:[(0,H.jsx)("div",{id:"icon-preview",className:"preview"}),(0,H.jsx)(n.ZK,{alignment:"start",scale:"m",layout:"default",children:(0,H.jsx)("button",{className:"change-symbol-trigger",type:"button",onClick:()=>{e.pickerClicked()},children:(0,H.jsxs)("div",{className:"container",children:[e.symbol&&(0,H.jsx)("div",{className:"icon-symbol",children:(0,H.jsx)("img",{src:`${e.symbol.url}${e.symbol.thumbnail.href.replace(".","")}`,alt:e.symbol.title,width:50,height:50})}),(0,H.jsx)("div",{className:"icon-label",children:e.symbol.title}),(0,H.jsx)(n.oh,{icon:"chevron-right"})]})})})]})}const te=o.memo(ee);function le(e){const[t,l]=(0,o.useState)([]);return(0,o.useEffect)((()=>{t&&e.symbols&&l(e.symbols)}),[]),(0,H.jsx)("div",{id:"icon-selection",children:(0,H.jsx)(n.N$,{showBackButton:!0,heading:"Change Symbol",onCalcitePanelBackClick:()=>{e.backClicked()},children:(0,H.jsx)("div",{className:"palette",children:t&&t.map(((t,l)=>(0,H.jsx)("img",{onClick:()=>{e.iconSelected(t),e.backClicked()},className:"item",alt:t.title,src:`${t.url}${t.thumbnail.href.replace(".","")}`},`icon-${l}`)))})})})}const oe=o.memo(le);function ne(e){const[t,l]=(0,o.useState)([]),[i,a]=(0,o.useState)(),[c,s]=(0,o.useState)(16),r=["a63b3a4631ae41d4a1bc3ba6d9c85bfe","70ccf6bcbd304773a164be896e76edd3"],[u,m]=(0,o.useState)("main"),[y,h]=(0,o.useState)(new A.Z([255,0,0,1]));return(0,o.useEffect)((()=>{(function(e,t){return new Promise(((l,o)=>{const n=[];e.forEach((e=>{const l=new d.Z({styleUrl:`${t}/${e}/data`,name:"Pins"});n.push((0,p.default)(l.styleUrl))})),n.length;const i=[];Promise.all(n).then((e=>{e.forEach((e=>{e.data.items.forEach((t=>{t.url=e.url.replace("data",""),i.push(t)}))})),l(i)}))}))})(r,"https://www.arcgis.com/sharing/rest/content/items/").then((t=>{l(t),t.length&&(a(t[0]),e.pointSymbolUpdated(t[0],y,c))}))}),[]),(0,H.jsx)("div",{id:"point-symbols",children:t.length&&(0,H.jsxs)(n.is,{children:["main"===u&&(0,H.jsxs)(n.N$,{children:[(0,H.jsx)(te,{pickerClicked:()=>m("icon"),symbol:i}),(0,H.jsx)(O,{id:"point",label:"Point",color:y.toRgba(),colorSet:t=>{h(t),e.pointSymbolUpdated(i,t,c)}}),(0,H.jsxs)(n.ZK,{children:["Size",(0,H.jsx)(n.e,{type:"number",min:6,max:72,value:c.toString(),onCalciteInputChange:t=>{s(parseFloat(t.target.value)),e.pointSymbolUpdated(i,y,parseFloat(t.target.value))}})]})]}),"icon"===u&&(0,H.jsx)(oe,{iconSelected:t=>{a(t),e.pointSymbolUpdated(t,y,c)},backClicked:()=>m("main"),symbols:t})]})})}const ie=o.memo(ne);function ae(e){const t=(0,o.useRef)(!1),[l,i]=(0,o.useState)(""),[c,s]=(0,o.useState)([]);return(0,o.useEffect)((()=>{if(!t.current){var l;!function(e,t,l,o){g=new a.default({listMode:"hide",id:"notes-layer"}),e.map.add(g),e.whenLayerView(g).then((e=>k=e)),h=g.pointLayer,x=g.polylineLayer,v=g.polygonLayer,b=g.textLayer,S=T(h,e),f=T(x,e),w=T(v,e),w.activeFillSymbol=I,f.activeLineSymbol=E,C=T(b,e),[S,f,w,C].forEach((e=>{null===e||void 0===e||e.on("create",(l=>{"cancel"===l.state&&null===e.activeTool&&(t("select"),Z&&Z.remove())})),null===e||void 0===e||e.on("update",(e=>{"start"!==e.state&&"active"!==e.state||o([...e.graphics])}))}))}(e.view,i,0,s);var o=null===(l=document.getElementById("sketch-tools"))||void 0===l?void 0:l.closest("calcite-panel");null===o||void 0===o||o.addEventListener("calcitePanelDismiss",(()=>{P(),i("")}))}}),[]),(0,H.jsxs)("div",{id:"sketch-tools",children:[(0,H.jsxs)("div",{className:"sticky",children:[(0,H.jsxs)(n.Te,{layout:"horizontal",children:[(0,H.jsx)(n.G1,{active:"point"===l||void 0,icon:"pin",text:"",onClick:()=>F("point",l,i)}),(0,H.jsx)(n.G1,{active:"polyline"===l||void 0,icon:"line",text:"",onClick:()=>F("polyline",l,i)}),(0,H.jsx)(n.G1,{active:"polygon"===l||void 0,icon:"polygon",text:"",onClick:()=>F("polygon",l,i)}),(0,H.jsx)(n.G1,{active:"rectangle"===l||void 0,icon:"rectangle",text:"",onClick:()=>F("rectangle",l,i)}),(0,H.jsx)(n.G1,{active:"circle"===l||void 0,icon:"circle",text:"",onClick:()=>F("circle",l,i)}),(0,H.jsx)(n.G1,{active:"text"===l||void 0,icon:"text",text:"",onClick:()=>F("text",l,i)})]}),(0,H.jsxs)(n.Te,{layout:"horizontal",children:[(0,H.jsx)(n.G1,{icon:"cursor",text:"",active:"select"===l||void 0,onClick:()=>{S.cancel(),w.cancel(),f.cancel(),C.cancel(),F("select",l,i)}}),(0,H.jsx)(n.G1,{icon:"trash",text:"",onClick:()=>(g.polygonLayer.graphics.removeAll(),g.pointLayer.graphics.removeAll(),g.polylineLayer.graphics.removeAll(),void g.textLayer.graphics.removeAll())})]})]}),(0,H.jsx)("div",{id:"point-symbols",className:"symbol",hidden:"point"!==l||void 0,children:(0,H.jsx)(ie,{pointSymbolUpdated:B})}),(0,H.jsx)("div",{id:"line-symbols",className:"symbol",hidden:"polyline"!==l||void 0,children:(0,H.jsx)(_,{polylineSymbolUpdated:K})}),(0,H.jsx)("div",{id:"polygon-symbols",className:"symbol",hidden:!["polygon","rectangle","circle"].includes(l)||void 0,children:(0,H.jsx)(V,{polygonSymbolUpdated:G})}),(0,H.jsx)("div",{id:"text-symbols",className:"symbol",hidden:"text"!==l||void 0,children:(0,H.jsx)(Y,{textSymbolUpdated:M})}),c.length>0&&(0,H.jsxs)(n.ln,{onClick:()=>function(e,t){h.removeMany(e),v.removeMany(e),x.removeMany(e),b.removeMany(e),requestAnimationFrame((()=>{t((e=>[]))}))}(c,s),alignment:"center",color:"red",appearance:"transparent","icon-end":"trash",children:[c.length," ",c.length>1?"features":"feature"]})]})}const ce=o.memo(ae)}}]);
//# sourceMappingURL=3847.9bbd44aa.chunk.js.map