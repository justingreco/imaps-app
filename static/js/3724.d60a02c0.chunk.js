"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[3724],{80573:(t,e,i)=>{i.d(e,{Z:()=>d});var n=i(27366),r=i(85015),s=i(11582),o=i(79056),l=i(46784),a=i(92026),p=i(49861),u=(i(63780),i(93169),i(25243),i(69912));let y=0,c=class extends((0,l.eC)((0,s.J)((0,o.IG)(r.Z)))){constructor(t){super(t),this.id=`${Date.now().toString(16)}-analysis-${y++}`,this.title=null}get parent(){return this._get("parent")}set parent(t){const e=this.parent;if((0,a.pC)(e))switch(e.type){case"line-of-sight":e.removeAnalysis(this);break;case"2d":case"3d":e.analyses.includes(this)&&e.analyses.remove(this)}this._set("parent",t)}get isEditable(){return this.requiredPropertiesForEditing.every(a.pC)}};(0,n._)([(0,p.Cb)({type:String,constructOnly:!0,clonable:!1})],c.prototype,"id",void 0),(0,n._)([(0,p.Cb)({type:String})],c.prototype,"title",void 0),(0,n._)([(0,p.Cb)({constructOnly:!0})],c.prototype,"type",void 0),(0,n._)([(0,p.Cb)({clonable:!1,value:null})],c.prototype,"parent",null),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"extent",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"isEditable",null),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"requiredPropertiesForEditing",void 0),(0,n._)([(0,p.Cb)({readOnly:!0})],c.prototype,"nonEditableMessage",void 0),c=(0,n._)([(0,u.j)("esri.analysis.Analysis")],c);const d=c},66576:(t,e,i)=>{i.d(e,{B:()=>b});var n=i(92026),r=i(80292),s=i(35995),o=i(71907),l=i(33397),a=i(25265),p=i(49861);function u(t){return y[function(t){return t instanceof Blob?t.type:function(t){const e=(0,s.Ml)(t);return h[e]||c}(t.url)}(t)]||d}const y={},c="text/plain",d=y[c],h={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const _ in h)y[h[_]]=_;var g=i(53283);function b(t){const e=(0,n.pC)(t)&&t.origins?t.origins:[void 0];return(i,o)=>{const y=function(t,e,i){if((0,n.pC)(t)&&"resource"===t.type)return function(t,e,i){const o=(0,l.VZ)(e,i);return{type:String,read:(t,e,i)=>{const n=(0,g.r)(t,e,i);return o.type===String?n:"function"==typeof o.type?new o.type({url:n}):void 0},write:{writer(e,l,p,y){if(!y||!y.resources)return"string"==typeof e?void(l[p]=(0,g.t)(e,y)):void(l[p]=e.write({},y));const c=function(t){return(0,n.Wi)(t)?null:"string"==typeof t?t:t.url}(e),d=c?(0,g.t)(c,{...y,verifyItemRelativeUrls:y&&y.verifyItemRelativeUrls?{writtenUrls:y.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null},g.M.NO):null,h=o.type!==String&&(!(0,r.l)(this)||y&&y.origin&&this.originIdOf(i)>(0,a.M9)(y.origin));y&&y.portalItem&&(0,n.pC)(d)&&!(0,s.YP)(d)?h?function(t,e,i,n,r,o,l,a){const p=l.portalItem.resourceFromPath(n),y=C(i,n,l);u(y)===(0,s.Ml)(p.path)?(v(t,e,p,y,l.resources.toUpdate),r[o]=n):f(t,e,i,n,r,o,l,a)}(this,i,e,d,l,p,y,t):function(t,e,i,n){n.resources.toKeep.push({resource:n.portalItem.resourceFromPath(t)}),e[i]=t}(d,l,p,y):y&&y.portalItem&&((0,n.Wi)(d)||(0,n.pC)((0,g.i)(d))||(0,s.jc)(d)||h)?f(this,i,e,d,l,p,y,t):l[p]=d}}}}(t,e,i);switch((0,n.pC)(t)&&t.type?t.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:t,write:e}=g.p;return{read:t,write:e}}}}(t,i,o);for(const t of e){const e=(0,p.CJ)(i,t,o);for(const t in y)e[t]=y[t]}}}function f(t,e,r,l,a,p,y,c){const d=(0,o.D)(),h=C(r,l,y),g=(0,s.v_)((0,n.U2)(c,"prefix"),d),b=`${g}.${u(h)}`,f=y.portalItem.resourceFromPath(b);(0,s.jc)(l)&&y.resources.pendingOperations.push(async function(t){const e=(await Promise.resolve().then(i.bind(i,76200))).default,{data:n}=await e(t,{responseType:"blob"});return n}(l).then((t=>{f.path=`${g}.${u(t)}`,a[p]=f.itemRelativeUrl})).catch((()=>{}))),v(t,e,f,h,y.resources.toAdd),a[p]=f.itemRelativeUrl}function v(t,e,i,n,r){r.push({resource:i,content:n,finish:i=>{!function(t,e,i){"string"==typeof t[e]?t[e]=i.url:t[e].url=i.url}(t,e,i)}})}function C(t,e,i){return"string"==typeof t?{url:e}:new Blob([JSON.stringify(t.toJSON(i))],{type:"application/json"})}},33724:(t,e,i)=>{i.r(e),i.d(e,{default:()=>L});var n=i(27366),r=i(80573),s=i(92026);function o(t,e){return l(t)===l(e)}function l(t){if((0,s.Wi)(t))return null;const e=null!=t.layer?t.layer.id:"";let i=null;return i=null!=t.objectId?t.objectId:null!=t.layer&&"objectIdField"in t.layer&&null!=t.layer.objectIdField&&null!=t.attributes?t.attributes[t.layer.objectIdField]:t.uid,null==i?null:`o-${e}-${i}`}const a={json:{write:{writer:function(t,e){(0,s.Wi)(t)||null==t.layer?.objectIdField||null==t.attributes||(e.feature={layerId:t.layer.id,objectId:t.attributes[t.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function(t){if(null!=t.layerId&&null!=t.objectId)return{uid:null,layer:{id:t.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:t.objectId}}}}}}};var p=i(85015),u=i(11582),y=i(46784),c=i(49861),d=(i(63780),i(93169),i(25243),i(69912)),h=i(66576),g=i(7882),b=i(64575);let f=class extends((0,y.eC)((0,u.J)(p.Z))){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,s._W)(this.position,t.position)&&(0,s._W)(this.elevationInfo,t.elevationInfo)&&o(this.feature,t.feature)}};(0,n._)([(0,c.Cb)({type:g.Z}),(0,h.B)()],f.prototype,"position",void 0),(0,n._)([(0,c.Cb)({type:b.ZP}),(0,h.B)()],f.prototype,"elevationInfo",void 0),(0,n._)([(0,c.Cb)(a)],f.prototype,"feature",void 0),f=(0,n._)([(0,d.j)("esri.analysis.LineOfSightAnalysisObserver")],f);const v=f;let C=class extends((0,y.eC)(u.j)){constructor(t){super(t),this.position=null,this.elevationInfo=null,this.feature=null}equals(t){return(0,s._W)(this.position,t.position)&&(0,s._W)(this.elevationInfo,t.elevationInfo)&&o(this.feature,t.feature)}};(0,n._)([(0,c.Cb)({type:g.Z}),(0,h.B)()],C.prototype,"position",void 0),(0,n._)([(0,c.Cb)({type:b.ZP}),(0,h.B)()],C.prototype,"elevationInfo",void 0),(0,n._)([(0,c.Cb)(a)],C.prototype,"feature",void 0),C=(0,n._)([(0,d.j)("esri.analysis.LineOfSightAnalysisTarget")],C);const _=C;var m=i(40281),w=i(60354),j=i(94172),I=i(79803),x=i(41414),O=i(74509);const E=m.Z.ofType(_);let S=class extends r.Z{constructor(t){super(t),this.type="line-of-sight",this.observer=null,this.extent=null,this.nonEditableMessage="Assign an observer location to the analysis to allow editing."}initialize(){this.own((0,j.YP)((()=>this._computeExtent()),(t=>{((0,s.Wi)(t)||(0,s.Wi)(t.pending))&&this._set("extent",(0,s.pC)(t)?t.extent:null)}),j.tX))}get targets(){return this._get("targets")||new E}set targets(t){this._set("targets",(0,w.Z)(t,this.targets,E))}get spatialReference(){return(0,s.pC)(this.observer)&&(0,s.pC)(this.observer.position)?this.observer.position.spatialReference:null}get requiredPropertiesForEditing(){return[(0,s.yw)(this.observer,(t=>t.position))]}async waitComputeExtent(){const t=this._computeExtent();return(0,s.pC)(t)?(0,s.Wg)(t.pending):null}_computeExtent(){const t=this.spatialReference;if((0,s.Wi)(this.observer)||(0,s.Wi)(this.observer.position)||(0,s.Wi)(t))return null;const e=t=>"absolute-height"===(0,O.VW)(t.position,t.elevationInfo),i=this.observer.position,n=(0,x.al)(i.x,i.y,i.z,i.x,i.y,i.z);for(const o of this.targets)if((0,s.pC)(o.position)){const e=(0,I.dz)(o.position,t);if((0,s.pC)(e.pending))return{pending:e.pending,extent:null};if((0,s.pC)(e.geometry)){const{x:t,y:i,z:r}=e.geometry;(0,x.pp)(n,[t,i,r])}}const r=(0,x.HH)(n,t);return e(this.observer)&&this.targets.every(e)||(r.zmin=null,r.zmax=null),{pending:null,extent:r}}clear(){this.observer=null,this.targets.removeAll()}};(0,n._)([(0,c.Cb)({type:["line-of-sight"]})],S.prototype,"type",void 0),(0,n._)([(0,c.Cb)({type:v,json:{read:!0,write:!0}})],S.prototype,"observer",void 0),(0,n._)([(0,c.Cb)({cast:w.R,type:E,nonNullable:!0,json:{read:!0,write:!0}})],S.prototype,"targets",null),(0,n._)([(0,c.Cb)({value:null,readOnly:!0})],S.prototype,"extent",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],S.prototype,"spatialReference",null),(0,n._)([(0,c.Cb)({readOnly:!0})],S.prototype,"requiredPropertiesForEditing",null),(0,n._)([(0,c.Cb)({readOnly:!0})],S.prototype,"nonEditableMessage",void 0),S=(0,n._)([(0,d.j)("esri.analysis.LineOfSightAnalysis")],S);const P=S;var R=i(97642),W=i(30651),F=i(6061);const Z=m.Z.ofType(_);let z=class extends((0,F.q)((0,R.R)(W.Z))){constructor(t){super(t),this.type="line-of-sight",this.operationalLayerType="LineOfSightLayer",this.analysis=new P,this.opacity=1}initialize(){this.own((0,j.YP)((()=>this.analysis),((t,e)=>{(0,s.pC)(e)&&e.parent===this&&(e.parent=null),(0,s.pC)(t)&&(t.parent=this)}),j.tX))}async load(){return(0,s.pC)(this.analysis)&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return(0,s.yw)(this.analysis,(t=>t.observer))}set observer(t){(0,s.yw)(this.analysis,(e=>e.observer=t))}get targets(){return(0,s.pC)(this.analysis)?this.analysis.targets:null}set targets(t){(0,s.yw)(this.analysis,(e=>e.targets=t))}get fullExtent(){return(0,s.pC)(this.analysis)?this.analysis.extent:null}get spatialReference(){return(0,s.pC)(this.analysis)?this.analysis.spatialReference:null}removeAnalysis(t){this.analysis===t&&(this.analysis=new P)}};(0,n._)([(0,c.Cb)({json:{read:!1},readOnly:!0})],z.prototype,"type",void 0),(0,n._)([(0,c.Cb)({type:["LineOfSightLayer"]})],z.prototype,"operationalLayerType",void 0),(0,n._)([(0,c.Cb)({type:v,json:{read:!0,write:{ignoreOrigin:!0}}})],z.prototype,"observer",null),(0,n._)([(0,c.Cb)({type:Z,json:{read:!0,write:{ignoreOrigin:!0}}})],z.prototype,"targets",null),(0,n._)([(0,c.Cb)({nonNullable:!0,json:{read:!1,write:!1}})],z.prototype,"analysis",void 0),(0,n._)([(0,c.Cb)({readOnly:!0})],z.prototype,"fullExtent",null),(0,n._)([(0,c.Cb)({readOnly:!0})],z.prototype,"spatialReference",null),(0,n._)([(0,c.Cb)({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],z.prototype,"opacity",void 0),(0,n._)([(0,c.Cb)({type:["show","hide"]})],z.prototype,"listMode",void 0),z=(0,n._)([(0,d.j)("esri.layers.LineOfSightLayer")],z);const L=z}}]);
//# sourceMappingURL=3724.d60a02c0.chunk.js.map