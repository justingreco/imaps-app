{"version":3,"file":"static/js/6326.9d1d2aef.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/layers/support/kmlUtils.js","../node_modules/@arcgis/core/views/support/imageReprojection.js","../node_modules/@arcgis/core/views/2d/layers/KMLLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport e from\"../../config.js\";import{id as o}from\"../../kernel.js\";import t from\"../../PopupTemplate.js\";import r from\"../../request.js\";import{clone as s}from\"../../core/lang.js\";import{addQueryParameters as n}from\"../../core/urlUtils.js\";import i from\"../../geometry/SpatialReference.js\";import{create as f,NEGATIVE_INFINITY as a,expandWithAABB as l,equals as u}from\"../../geometry/support/aaBoundingBox.js\";import{getBoundsXYZ as p}from\"../../geometry/support/boundsUtils.js\";import{fromJSON as m}from\"../../renderers/support/jsonUtils.js\";import y from\"../../rest/support/FeatureSet.js\";const c={esriGeometryPoint:\"points\",esriGeometryPolyline:\"polylines\",esriGeometryPolygon:\"polygons\"};function d(e){const o=e.folders||[],t=o.slice(),r=new Map,n=new Map,i=new Map,f=new Map,a=new Map,l={esriGeometryPoint:n,esriGeometryPolyline:i,esriGeometryPolygon:f};(e.featureCollection&&e.featureCollection.layers||[]).forEach((e=>{const o=s(e);o.featureSet.features=[];const t=e.featureSet.geometryType;r.set(t,o);const a=e.layerDefinition.objectIdField;\"esriGeometryPoint\"===t?G(n,a,e.featureSet.features):\"esriGeometryPolyline\"===t?G(i,a,e.featureSet.features):\"esriGeometryPolygon\"===t&&G(f,a,e.featureSet.features)})),e.groundOverlays&&e.groundOverlays.forEach((e=>{a.set(e.id,e)})),o.forEach((o=>{o.networkLinkIds.forEach((r=>{const s=P(r,o.id,e.networkLinks);s&&t.push(s)}))})),t.forEach((e=>{if(e.featureInfos){e.points=s(r.get(\"esriGeometryPoint\")),e.polylines=s(r.get(\"esriGeometryPolyline\")),e.polygons=s(r.get(\"esriGeometryPolygon\")),e.mapImages=[];for(const o of e.featureInfos)switch(o.type){case\"esriGeometryPoint\":case\"esriGeometryPolyline\":case\"esriGeometryPolygon\":{const t=l[o.type].get(o.id);t&&e[c[o.type]].featureSet.features.push(t);break}case\"GroundOverlay\":{const t=a.get(o.id);t&&e.mapImages.push(t);break}}e.fullExtent=j([e])}}));const u=j(t);return{folders:o,sublayers:t,extent:u}}function g(t,s,i,f){const a=o&&o.findCredential(t);t=n(t,{token:a&&a.token});const l=e.kmlServiceUrl;return r(l,{query:{url:t,model:\"simple\",folders:\"\",refresh:0!==i||void 0,outSR:JSON.stringify(s)},responseType:\"json\",signal:f})}function S(e,o,t=null,r=[]){const s=[],n={},i=o.sublayers,f=o.folders.map((e=>e.id));return i.forEach((o=>{const i=new e;if(t?i.read(o,t):i.read(o),r.length&&f.includes(i.id)&&(i.visible=r.includes(i.id)),n[o.id]=i,null!=o.parentFolderId&&-1!==o.parentFolderId){const e=n[o.parentFolderId];e.sublayers||(e.sublayers=[]),e.sublayers.unshift(i)}else s.unshift(i)})),s}function G(e,o,t){t.forEach((t=>{e.set(t.attributes[o],t)}))}function h(e,o){let t;return o.some((o=>o.id===e&&(t=o,!0))),t}function P(e,o,t){const r=h(e,t);return r&&(r.parentFolderId=o,r.networkLink=r),r}async function b(e){const o=y.fromJSON(e.featureSet).features,r=e.layerDefinition,s=m(r.drawingInfo.renderer),n=t.fromJSON(e.popupInfo),i=[];for(const t of o){const e=await s.getSymbolAsync(t);t.symbol=e,t.popupTemplate=n,t.visible=!0,i.push(t)}return i}function j(e){const o=f(a),t=f(a);for(const r of e){if(r.polygons&&r.polygons.featureSet&&r.polygons.featureSet.features)for(const e of r.polygons.featureSet.features)p(o,e.geometry),l(t,o);if(r.polylines&&r.polylines.featureSet&&r.polylines.featureSet.features)for(const e of r.polylines.featureSet.features)p(o,e.geometry),l(t,o);if(r.points&&r.points.featureSet&&r.points.featureSet.features)for(const e of r.points.featureSet.features)p(o,e.geometry),l(t,o);if(r.mapImages)for(const e of r.mapImages)p(o,e.extent),l(t,o)}return u(t,a)?null:{xmin:t[0],ymin:t[1],zmin:t[2],xmax:t[3],ymax:t[4],zmax:t[5],spatialReference:i.WGS84}}export{j as computeExtent,g as fetchService,b as getGraphics,d as parseKML,S as sublayersFromJSON};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../geometry/Point.js\";import{project as r}from\"../../geometry/projection.js\";import{projectResolution as i,getProjectionOffsetGrid as a}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{isImageSource as s,rasterize as n}from\"../2d/engine/Bitmap.js\";import o from\"../2d/engine/webgl/VertexStream.js\";import{createProgramTemplate as m}from\"../2d/engine/webgl/shaders/MaterialPrograms.js\";import{PixelFormat as p,PixelType as h,TextureWrapMode as c,TextureSamplingMode as d,TargetType as x,DepthStencilTargetType as g,ColorAttachment as u}from\"../webgl/enums.js\";import{FramebufferObject as _}from\"../webgl/FramebufferObject.js\";import{createTransformTexture as f}from\"../webgl/rasterUtils.js\";import{RenderingContext as l}from\"../webgl/RenderingContext.js\";import{Texture as w}from\"../webgl/Texture.js\";class b{constructor(t){if(t)this._ownsRctx=!1,this._rctx=t;else{if(b._instance)return b._instanceRefCount++,b._instance;b._instanceRefCount=1,b._instance=this,this._ownsRctx=!0;const t=document.createElement(\"canvas\").getContext(\"webgl\");t.getExtension(\"OES_texture_float\"),this._rctx=new l(t,{})}const e={applyProjection:!0,bilinear:!1,bicubic:!1},r=m(\"raster/reproject\",\"raster/reproject\",new Map([[\"a_position\",0]]),e);this._program=this._rctx.programCache.acquire(r.shaders.vertexShader,r.shaders.fragmentShader,r.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f(\"u_opacity\",1),this._program.setUniform1i(\"u_image\",0),this._program.setUniform1i(\"u_flipY\",0),this._program.setUniform1i(\"u_transformGrid\",1),this._quad=new o(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(t,s,n=!1){const o=r(t.extent,s),m=new e({x:(t.extent.xmax-t.extent.xmin)/t.texture.descriptor.width,y:(t.extent.ymax-t.extent.ymin)/t.texture.descriptor.height,spatialReference:t.extent.spatialReference}),{x:l,y:b}=i(m,s,t.extent);let D=(l+b)/2;const T=Math.round((o.xmax-o.xmin)/D),j=Math.round((o.ymax-o.ymin)/D);D=(o.width/T+o.height/j)/2;const E=new e({x:D,y:D,spatialReference:o.spatialReference}),R=a({projectedExtent:o,srcBufferExtent:t.extent,pixelSize:E,hasWrapAround:!0,spacing:[16,16]}),C=f(this._rctx,R),y=new w(this._rctx,{width:T,height:j,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:d.LINEAR,hasMipmap:!1}),M=new _(this._rctx,{colorTarget:x.TEXTURE,depthStencilTarget:g.NONE,width:T,height:j},y);if(this._rctx.bindFramebuffer(M),this._rctx.setViewport(0,0,T,j),this._rctx.useProgram(this._program),this._rctx.bindTexture(t.texture,0),this._rctx.bindTexture(C,1),this._quad.bind(),this._program.setUniform2f(\"u_srcImageSize\",t.texture.descriptor.width,t.texture.descriptor.height),this._program.setUniform2fv(\"u_transformSpacing\",R.spacing),this._program.setUniform2fv(\"u_transformGridSize\",R.size),this._program.setUniform2f(\"u_targetImageSize\",T,j),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),C.dispose(),n){const t=new ImageData(M.descriptor.width,M.descriptor.height);return M.readPixels(0,0,M.descriptor.width,M.descriptor.height,p.RGBA,h.UNSIGNED_BYTE,t.data),M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o,imageData:t}}return M.detachColorTexture(u.COLOR_ATTACHMENT0),M.dispose(),{texture:y,extent:o}}reprojectBitmapData(t,e){const r=s(t.bitmapData)?n(t.bitmapData):t.bitmapData,i=new w(this._rctx,{width:t.bitmapData.width,height:t.bitmapData.height,pixelFormat:p.RGBA,dataType:h.UNSIGNED_BYTE,wrapMode:c.CLAMP_TO_EDGE,samplingMode:d.LINEAR,hasMipmap:!1},r),a=this.reprojectTexture({texture:i,extent:t.extent},e,!0);a.texture.dispose();const o=document.createElement(\"canvas\");o.width=a.imageData.width,o.height=a.imageData.height;return o.getContext(\"2d\").putImageData(a.imageData,0,0),{bitmapData:o,extent:a.extent}}async loadAndReprojectBitmapData(e,r,i){const a=(await t(e,{responseType:\"image\"})).data,s=document.createElement(\"canvas\");s.width=a.width,s.height=a.height;const n=s.getContext(\"2d\");n.drawImage(a,0,0);const o=n.getImageData(0,0,s.width,s.height);if(r.spatialReference.equals(i))return{bitmapData:o,extent:r};const m=this.reprojectBitmapData({bitmapData:o,extent:r},i);return{bitmapData:m.bitmapData,extent:m.extent}}destroy(){this._ownsRctx?(b._instanceRefCount--,0===b._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),b._instance=null)):(this._quad.dispose(),this._program.dispose())}}b._instanceRefCount=0;export{b as ImageReprojector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import{version as i}from\"../../../kernel.js\";import t from\"../../../core/Collection.js\";import{isSome as s,isNone as a}from\"../../../core/maybe.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{queryToObject as l,objectToQuery as r}from\"../../../core/urlUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/arrayUtils.js\";import\"../../../core/accessorSupport/ensureType.js\";import{subclass as h}from\"../../../core/accessorSupport/decorators/subclass.js\";import p from\"../../../geometry/Extent.js\";import{load as m,project as c}from\"../../../geometry/projection.js\";import d from\"../../../geometry/SpatialReference.js\";import{getGraphics as y,fetchService as g,parseKML as w}from\"../../../layers/support/kmlUtils.js\";import{parseUrl as u}from\"../../../rest/utils.js\";import{GraphicsCollection as _}from\"../../../support/GraphicsCollection.js\";import{Bitmap as b}from\"../engine/Bitmap.js\";import{BitmapContainer as V}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as f}from\"./LayerView2D.js\";import v from\"./graphics/GraphicContainer.js\";import S from\"./graphics/GraphicsView2D.js\";import I from\"../../layers/LayerView.js\";import{ImageReprojector as x}from\"../../support/imageReprojection.js\";class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let j=class extends(f(I)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new V,this._kmlVisualData=new C,this.allVisiblePoints=new _,this.allVisiblePolylines=new _,this.allVisiblePolygons=new _,this.allVisibleMapImages=new t}async hitTest(e,i){const t=this.layer;return[this._pointsView?.hitTest(e),this._polylinesView?.hitTest(e),this._polygonsView?.hitTest(e)].flat().filter(Boolean).map((i=>(i.layer=t,i.sourceLayer=t,{type:\"graphic\",graphic:i,layer:t,mapPoint:e})))}update(e){this._polygonsView&&this._polygonsView.processUpdate(e),this._polylinesView&&this._polylinesView.processUpdate(e),this._pointsView&&this._pointsView.processUpdate(e)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new S({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new S({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new S({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new v(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.handles.add([this.allVisibleMapImages.on(\"change\",(e=>{e.added.forEach((e=>this._addMapImage(e))),e.removed.forEach((e=>this._removeMapImage(e)))})),o((()=>this.layer.visibleSublayers),(e=>{for(const[i,t]of this._kmlVisualData.allSublayers)t.visibility=0;for(const i of e){const e=this._kmlVisualData.allSublayers.get(i.id);e&&(e.visibility=1)}this._refreshCollections()}))]),this.updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new x}detach(){this._fetchController.abort(),this._fetchController=null,this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView&&(this._polygonsView.destroy(),this._polygonsView=null),this._polylinesView&&(this._polylinesView.destroy(),this._polylinesView=null),this._pointsView&&(this._pointsView.destroy(),this._pointsView=null),this._imageReprojector&&(this._imageReprojector.destroy(),this._imageReprojector=null)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(e){(this.view.spatialReference.isWGS84||this.view.spatialReference.isWebMercator)&&this._imageReprojector.loadAndReprojectBitmapData(e.href,p.fromJSON(e.extent),this.view.spatialReference).then((i=>{const t=new b(i.bitmapData,{immutable:!1,requestRenderOnSourceChangedEnabled:!0});t.x=i.extent.xmin,t.y=i.extent.ymax,t.resolution=i.extent.width/i.bitmapData.width,t.rotation=e.rotation,this._mapImageContainer.addChild(t),this._bitmapIndex.set(e,t)}))}async _getViewDependentUrl(e,t){const{viewFormat:o,viewBoundScale:n,httpQuery:h}=e;if(s(o)){if(a(t))throw new Error(\"Loading this network link requires a view state.\");let y;if(await m(),s(n)&&1!==n){const e=new p(t.extent);e.expand(n),y=e}else y=t.extent;y=c(y,d.WGS84);const g=c(y,d.WebMercator),w=y.xmin,_=y.xmax,b=y.ymin,V=y.ymax,f=t.size[0]*t.pixelRatio,v=t.size[1]*t.pixelRatio,S=Math.max(g.width,g.height),I={\"[bboxWest]\":w.toString(),\"[bboxEast]\":_.toString(),\"[bboxSouth]\":b.toString(),\"[bboxNorth]\":V.toString(),\"[lookatLon]\":y.center.x.toString(),\"[lookatLat]\":y.center.y.toString(),\"[lookatRange]\":S.toString(),\"[lookatTilt]\":\"0\",\"[lookatHeading]\":t.rotation.toString(),\"[lookatTerrainLon]\":y.center.x.toString(),\"[lookatTerrainLat]\":y.center.y.toString(),\"[lookatTerrainAlt]\":\"0\",\"[cameraLon]\":y.center.x.toString(),\"[cameraLat]\":y.center.y.toString(),\"[cameraAlt]\":S.toString(),\"[horizFov]\":\"60\",\"[vertFov]\":\"60\",\"[horizPixels]\":f.toString(),\"[vertPixels]\":v.toString(),\"[terrainEnabled]\":\"0\",\"[clientVersion]\":i,\"[kmlVersion]\":\"2.2\",\"[clientName]\":\"ArcGIS API for JavaScript\",\"[language]\":\"en-US\"},x=e=>{for(const i in e)for(const t in I)e[i]=e[i].replace(t,I[t])},C=l(o);x(C);let j={};s(h)&&(j=l(h),x(j));const k=u(e.href);k.query={...k.query,...C,...j};return`${k.path}?${r(C)}`}return e.href}async _fetchService(e){const i=new C;await this._loadVisualData(this.layer.url,i,e),this._kmlVisualData=i,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((e=>this._isSublayerVisible(e.sublayerId))).map((({item:e})=>e)))}_isSublayerVisible(e){const i=this._kmlVisualData.allSublayers.get(e);return!!i.visibility&&(-1===i.parentFolderId||this._isSublayerVisible(i.parentFolderId))}_loadVisualData(e,i,t){return this._fetchParsedKML(e,t).then((async e=>{for(const s of e.sublayers){i.allSublayers.set(s.id,s);const e=s.points?await y(s.points):[],a=s.polylines?await y(s.polylines):[],o=s.polygons?await y(s.polygons):[],l=s.mapImages||[];if(i.allPoints.push(...e.map((e=>({item:e,sublayerId:s.id})))),i.allPolylines.push(...a.map((e=>({item:e,sublayerId:s.id})))),i.allPolygons.push(...o.map((e=>({item:e,sublayerId:s.id})))),i.allMapImages.push(...l.map((e=>({item:e,sublayerId:s.id})))),s.networkLink){const e=await this._getViewDependentUrl(s.networkLink,this.view.state);await this._loadVisualData(e,i,t)}}}))}_fetchParsedKML(e,i){return g(e,this.layer.spatialReference,this.layer.refreshInterval,i).then((e=>w(e.data)))}_removeMapImage(e){const i=this._bitmapIndex.get(e);i&&(this._mapImageContainer.removeChild(i),this._bitmapIndex.delete(e))}};e([n()],j.prototype,\"_pointsView\",void 0),e([n()],j.prototype,\"_polylinesView\",void 0),e([n()],j.prototype,\"_polygonsView\",void 0),e([n()],j.prototype,\"updating\",void 0),j=e([h(\"esri.views.2d.layers.KMLLayerView2D\")],j);const k=j;export{k as default};\n"],"names":["c","esriGeometryPoint","esriGeometryPolyline","esriGeometryPolygon","d","e","o","folders","t","slice","r","Map","n","i","f","a","l","featureCollection","layers","forEach","s","featureSet","features","geometryType","set","layerDefinition","objectIdField","G","groundOverlays","id","networkLinkIds","some","h","parentFolderId","networkLink","P","networkLinks","push","featureInfos","points","get","polylines","polygons","mapImages","type","fullExtent","j","u","sublayers","extent","g","token","query","url","model","refresh","outSR","JSON","stringify","responseType","signal","S","map","read","length","includes","visible","unshift","attributes","async","b","y","m","drawingInfo","renderer","popupInfo","getSymbolAsync","symbol","popupTemplate","p","geometry","xmin","ymin","zmin","xmax","ymax","zmax","spatialReference","constructor","this","_ownsRctx","_rctx","_instance","_instanceRefCount","document","createElement","getContext","getExtension","applyProjection","bilinear","bicubic","_program","programCache","acquire","shaders","vertexShader","fragmentShader","useProgram","setUniform1f","setUniform1i","_quad","reprojectTexture","x","texture","descriptor","width","height","D","T","Math","round","E","R","projectedExtent","srcBufferExtent","pixelSize","hasWrapAround","spacing","C","w","pixelFormat","dataType","wrapMode","samplingMode","hasMipmap","M","_","colorTarget","depthStencilTarget","bindFramebuffer","setViewport","bindTexture","bind","setUniform2f","setUniform2fv","size","draw","unbind","dispose","ImageData","readPixels","data","detachColorTexture","imageData","reprojectBitmapData","bitmapData","putImageData","drawImage","getImageData","equals","destroy","allSublayers","allPoints","allPolylines","allPolygons","allMapImages","I","super","arguments","_bitmapIndex","_mapImageContainer","V","_kmlVisualData","allVisiblePoints","allVisiblePolylines","allVisiblePolygons","allVisibleMapImages","layer","_pointsView","hitTest","_polylinesView","_polygonsView","flat","filter","Boolean","sourceLayer","graphic","mapPoint","update","processUpdate","attach","_fetchController","AbortController","container","addChild","view","graphics","requestUpdateCallback","requestUpdate","v","featuresTilingScheme","handles","add","on","added","_addMapImage","removed","_removeMapImage","visibleSublayers","visibility","_refreshCollections","updatingHandles","addPromise","_fetchService","_imageReprojector","detach","abort","removeAllChildren","clear","moveStart","viewChange","moveEnd","isUpdating","updating","isWGS84","isWebMercator","loadAndReprojectBitmapData","href","then","immutable","requestRenderOnSourceChangedEnabled","resolution","rotation","viewFormat","viewBoundScale","httpQuery","Error","expand","pixelRatio","max","toString","center","replace","k","path","_loadVisualData","removeAll","addMany","_isSublayerVisible","sublayerId","item","_fetchParsedKML","_getViewDependentUrl","state","refreshInterval","removeChild","delete","prototype"],"sourceRoot":""}