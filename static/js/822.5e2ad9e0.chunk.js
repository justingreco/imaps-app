"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[822],{50822:(e,t,o)=>{o.r(t),o.d(t,{default:()=>K});var l=o(72791),n=(o(90521),o(89401),o(85580)),i=o(97426),a=o(33513),r=o(61459),s=o(16851),c=o(58009);let d,p,u,x,h,y,m,g,v,S="",j=new r.Z({color:[255,0,0,.5],style:"solid",outline:{width:2,color:[255,0,0,1]}}),b=new s.Z({width:1,color:[255,0,0,1],style:"solid",cap:"round",join:"round"}),f=new c.Z({color:[255,0,0,1],haloColor:[255,255,255,1],haloSize:"1px",text:"",xoffset:3,yoffset:3,font:{size:10,family:"Aerial",weight:"bold"}});function w(e,t,o){const l=new i.Z({view:t,layer:e,updateOnGraphicClick:!0});return l.on("create",k),l}function k(e){"complete"===e.state&&("polygon"===e.graphic.geometry.type&&(e.graphic.symbol=j,h.polygonLayer.add(e.graphic),setTimeout((()=>g.updateGraphics.add(e.graphic))),g.create(e.tool)),"polyline"===e.graphic.geometry.type&&(e.graphic.symbol=b,h.polylineLayer.add(e.graphic),m.create(e.tool)),"text"===S&&(e.graphic.symbol=f,h.textLayer.add(e.graphic),v.create("point")))}function C(e,t,o){S=e,o(e===t?"":e),""===t&&T(),["polygon","rectangle","circle"].includes(e)&&g.create(e),["polyline"].includes(e)&&m.create(e),"text"===e&&m.create("point")}function L(e,t,o){j.color=e,j.outline.color=t,j.outline.width=o,g.activeFillSymbol=j,g.updateGraphics.forEach((e=>{e.symbol=j}))}function Z(e,t){b.color=e,b.width=t,m.activeFillSymbol=b,m.updateGraphics.forEach((e=>{e.symbol=b}))}function I(e,t,o,l,n,i){f.color=t,f.font.size=e,f.haloColor=l,f.haloSize=n?o:0,f.text=i,v.pointSymbol=f}function T(){y.cancel(),m.cancel(),g.cancel(),v.cancel()}o(24929),o(95817),o(9946),o(50186),o(21775),o(11151),o(5176);var U=o(51995),z=o(80184);const G=function(e){const t=(0,l.useRef)(null),o=(0,l.useRef)(null),[i,a]=(0,l.useState)(),[r,s]=(0,l.useState)(0);return(0,l.useEffect)((()=>{e.color&&(a(e.color),s(100*(1-e.color[3])))}),[]),(0,z.jsxs)("div",{children:[(0,z.jsxs)(n.ZK,{children:[e.label," Color",(0,z.jsx)(n.ln,{id:`${e.id}-popover-button`,width:"half",iconEnd:"pencil",color:"neutral",appearance:"outline",children:(0,z.jsx)(n.jv,{color:i})})]}),(0,z.jsxs)(n.qZ,{ref:t,overlayPositioning:"fixed",placement:"top-leading",label:"",referenceElement:`${e.id}-popover-button`,children:[(0,z.jsx)(n.ne,{ref:o,hideSaved:!0,hideHex:!0,hideChannels:!0,onCalciteColorPickerInput:e=>a(e.target.value)}),(0,z.jsx)(n.ln,{width:"full",onClick:()=>{var o;null===(o=t.current)||void 0===o||o.toggle();const l=new U.Z(i);l.a=1-r/100,e.colorSet(l)},children:"Done"})]}),!e.hideTransparency&&(0,z.jsxs)(n.ZK,{children:[e.label," Transparency",(0,z.jsxs)("div",{className:"slider-input",children:[(0,z.jsx)(n.XQ,{max:100,min:0,value:r,onCalciteSliderInput:t=>{let o=t.target.value;o>100&&(o=100),o<0&&(o=0),s(o);const l=new U.Z(i);l.a=1-r/100,e.colorSet(l)}}),(0,z.jsx)(n.e,{max:100,min:0,type:"number",numberButtonType:"none",suffixText:"%",value:r,onCalciteInputInput:t=>{let o=parseInt(t.target.value);o>100&&(o=100),o<0&&(o=0),s(o);const l=new U.Z(i);l.a=1-r/100,e.colorSet(l)}})]})]})]})};const F=function(e){const[t,o]=(0,l.useState)();return(0,l.useEffect)((()=>{o(e.value)}),[e.value]),(0,z.jsxs)(n.ZK,{children:[e.label,(0,z.jsxs)("div",{className:"slider-input",children:[(0,z.jsx)(n.XQ,{max:e.max,min:e.min,value:t,onCalciteSliderInput:t=>{o(t.target.value),e.sizeSet(t.target.value)}}),(0,z.jsx)(n.e,{type:"number",numberButtonType:"none",min:e.min,max:e.max,value:t,suffixText:"px",onCalciteInputInput:t=>{o(parseFloat(t.target.value)),e.sizeSet(parseFloat(t.target.value))}})]})]})};const R=function(e){const[t,o]=(0,l.useState)(new U.Z([255,0,0,1])),[n,i]=(0,l.useState)(2);return(0,z.jsxs)("div",{id:"line-symbols",children:[(0,z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"60",height:n.toString(),children:[(0,z.jsx)("defs",{}),(0,z.jsx)("g",{transform:"matrix(1,0,0,1,0,0)",children:(0,z.jsx)("path",{fill:"none",fillRule:"evenodd",stroke:null===t||void 0===t?void 0:t.toString(),strokeWidth:n,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"none",strokeMiterlimit:"4",d:`M ${(n/2).toString()} ${(n/2).toString()} L 49.5 ${(n/2).toString()}`})})]}),(0,z.jsx)(G,{id:"line",label:"Line",color:t.toRgba(),colorSet:l=>{o(l),e.polylineSymbolUpdated(t,n)}}),(0,z.jsx)(F,{value:n,min:.1,max:18,label:"Width",sizeSet:o=>{i(o),e.polylineSymbolUpdated(t,n)}})]})};const $=function(e){const[t,o]=(0,l.useState)(new U.Z([255,0,0,.5])),[n,i]=(0,l.useState)(new U.Z([255,0,0,1])),[a,r]=(0,l.useState)(2);return(0,z.jsxs)("div",{id:"polygon-symbols",children:[(0,z.jsx)("div",{children:(0,z.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:(23+a).toString(),height:(23+a).toString(),children:[(0,z.jsx)("defs",{}),(0,z.jsx)("g",{transform:`matrix(${(1.09523809-.004328966*a).toString()},0,0,${(1.09523809-.004328966*a).toString()},${(.5*a+11).toString()},${(.5*a+11).toString()})`,children:(0,z.jsx)("path",{vectorEffect:"non-scaling-stroke",fill:null===t||void 0===t?void 0:t.toString(),fillRule:"evenodd",stroke:null===n||void 0===n?void 0:n.toString(),strokeWidth:a,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"none",strokeMiterlimit:"4",d:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 Z"})})]})}),(0,z.jsx)(G,{id:"polygon-fill",color:t.toRgba(),label:"Fill",colorSet:l=>{o(l),e.polygonSymbolUpdated(t,n,a)}}),(0,z.jsx)(G,{id:"polygon-outline",color:n.toRgba(),label:"Outline",colorSet:o=>{i(o),e.polygonSymbolUpdated(t,n,a)}}),(0,z.jsx)(F,{label:"Outline Width",min:.1,max:18,value:a,sizeSet:o=>{r(o),e.polygonSymbolUpdated(t,n,a)}})]})};const E=function(e){const[t,o]=(0,l.useState)(new U.Z([255,0,0,1])),[i,a]=(0,l.useState)(10),[r,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(1),[p,u]=(0,l.useState)(new U.Z([255,255,255,1])),[x,h]=(0,l.useState)("");return(0,z.jsxs)("div",{id:"text-symbols",children:[(0,z.jsxs)(n.ZK,{children:["Text",(0,z.jsx)(n.e,{type:"textarea",scale:"m",value:x,onCalciteInputInput:e=>{h(e.target.value)},onCalciteInputChange:o=>{requestAnimationFrame((()=>{e.textSymbolUpdated(i,t,c,p,r,x)}))}})]}),(0,z.jsx)(G,{id:"font",label:"Font",color:t.toRgba(),hideTransparency:!0,colorSet:l=>{o(l),e.textSymbolUpdated(i,t,c,p,r,x)}}),(0,z.jsxs)(n.ZK,{children:["Font Size",(0,z.jsx)(n.e,{type:"number",min:5,max:125,value:i.toString(),onCalciteInputInput:o=>{a(parseFloat(o.target.value)),e.textSymbolUpdated(i,t,c,p,r,x)}})]}),(0,z.jsxs)(n.ZK,{layout:"inline",children:["Halo",(0,z.jsx)(n.$p,{checked:!!r||void 0,onCalciteSwitchChange:o=>{s(o.target.checked),e.textSymbolUpdated(i,t,c,p,r,x)}})]}),(0,z.jsxs)("div",{id:"halo",hidden:!r||void 0,children:[(0,z.jsx)(G,{id:"halo",label:"",color:p.toRgba(),hideTransparency:!0,colorSet:o=>{u(o),e.textSymbolUpdated(i,t,c,p,r,x)}}),(0,z.jsxs)(n.ZK,{children:["Size",(0,z.jsx)(n.e,{type:"number",min:1,max:10,value:c.toString(),onCalciteInputInput:o=>{d(parseFloat(o.target.value)),e.textSymbolUpdated(i,t,c,p,r,x)}})]})]})]})};const K=function(e){const t=(0,l.useRef)(!1),[o,i]=(0,l.useState)("");return(0,l.useEffect)((()=>{var o;t.current||(o=e.view,h=new a.default({listMode:"hide",id:"notes-layer"}),o.map.add(h),d=h.pointLayer,p=h.polylineLayer,u=h.polygonLayer,x=h.textLayer,y=w(d,o),m=w(p,o),g=w(u,o),g.activeFillSymbol=j,m.activeLineSymbol=b,v=w(x,o))}),[]),(0,z.jsxs)("div",{id:"sketch-tools",children:[(0,z.jsxs)("div",{className:"row sticky",children:[(0,z.jsxs)(n.Te,{layout:"horizontal",children:[(0,z.jsx)(n.G1,{active:"point"===o||void 0,icon:"pin",text:"",onClick:()=>C("point",o,i)}),(0,z.jsx)(n.G1,{active:"polyline"===o||void 0,icon:"line",text:"",onClick:()=>C("polyline",o,i)}),(0,z.jsx)(n.G1,{active:"polygon"===o||void 0,icon:"polygon",text:"",onClick:()=>C("polygon",o,i)}),(0,z.jsx)(n.G1,{active:"rectangle"===o||void 0,icon:"rectangle",text:"",onClick:()=>C("rectangle",o,i)}),(0,z.jsx)(n.G1,{active:"circle"===o||void 0,icon:"circle",text:"",onClick:()=>C("circle",o,i)}),(0,z.jsx)(n.G1,{active:"text"===o||void 0,icon:"text",text:"",onClick:()=>C("text",o,i)})]}),(0,z.jsxs)(n.Te,{layout:"horizontal",children:[(0,z.jsx)(n.G1,{icon:"cursor",text:""}),(0,z.jsx)(n.G1,{icon:"trash",text:"",onClick:()=>function(e){e(""),T(),h.polygonLayer.graphics.removeAll(),h.pointLayer.graphics.removeAll(),h.polylineLayer.graphics.removeAll(),h.textLayer.graphics.removeAll()}(i)})]})]}),(0,z.jsx)("div",{id:"point-symbols",className:"symbol",hidden:"point"!==o||void 0,children:"point"}),(0,z.jsx)("div",{id:"line-symbols",className:"symbol",hidden:"polyline"!==o||void 0,children:(0,z.jsx)(R,{polylineSymbolUpdated:Z})}),(0,z.jsx)("div",{id:"polygon-symbols",className:"symbol",hidden:!["polygon","rectangle","circle"].includes(o)||void 0,children:(0,z.jsx)($,{polygonSymbolUpdated:L})}),(0,z.jsx)("div",{id:"text-symbols",className:"symbol",hidden:"text"!==o||void 0,children:(0,z.jsx)(E,{textSymbolUpdated:I})})]})}}}]);
//# sourceMappingURL=822.5e2ad9e0.chunk.js.map