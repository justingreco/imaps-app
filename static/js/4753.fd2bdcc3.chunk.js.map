{"version":3,"file":"static/js/4753.fd2bdcc3.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/SSAO.glsl.js","../node_modules/@arcgis/core/chunks/SSAOBlur.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/DecodeNormal.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/NormalAttribute.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexNormal.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/TextureAtlasLookup.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VertexTextureCoordinates.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/VerticalOffset.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/EvaluateAmbientLighting.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MainLighting.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/AnalyticalSkyModel.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRendering.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/PhysicallyBasedRenderingParameters.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sDrawUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Matrix4sPassUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/ReadShadowMap.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/VisualVariables.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ScreenSizePerspective.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/BooleanPassUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/SSAOBlurTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/SSAOTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/SSAOParameters.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/SSAOHelper.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/Lightsources.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/LongVectorMath.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SphericalHarmonics.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lighting/SceneLighting.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{unwrap as e}from\"../core/maybe.js\";import{s as r}from\"./vec2.js\";import{a as o}from\"./vec2f64.js\";import{ScreenSpacePass as t}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";import{ReadLinearDepth as a}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{CameraSpace as n,getZScale as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/CameraSpace.glsl.js\";import{Float2PassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as c}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as u}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DPassUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";const m=16,p=.5;function d(){const o=new u,d=o.fragment;return o.include(t),d.include(a),o.include(n),d.uniforms.add(new c(\"radius\",((e,r)=>v(r)))),d.code.add(l`vec3 sphere[16];\nvoid fillSphere() {\nsphere[0] = vec3(0.186937, 0.0, 0.0);\nsphere[1] = vec3(0.700542, 0.0, 0.0);\nsphere[2] = vec3(-0.864858, -0.481795, -0.111713);\nsphere[3] = vec3(-0.624773, 0.102853, -0.730153);\nsphere[4] = vec3(-0.387172, 0.260319, 0.007229);\nsphere[5] = vec3(-0.222367, -0.642631, -0.707697);\nsphere[6] = vec3(-0.01336, -0.014956, 0.169662);\nsphere[7] = vec3(0.122575, 0.1544, -0.456944);\nsphere[8] = vec3(-0.177141, 0.85997, -0.42346);\nsphere[9] = vec3(-0.131631, 0.814545, 0.524355);\nsphere[10] = vec3(-0.779469, 0.007991, 0.624833);\nsphere[11] = vec3(0.308092, 0.209288,0.35969);\nsphere[12] = vec3(0.359331, -0.184533, -0.377458);\nsphere[13] = vec3(0.192633, -0.482999, -0.065284);\nsphere[14] = vec3(0.233538, 0.293706, -0.055139);\nsphere[15] = vec3(0.417709, -0.386701, 0.442449);\n}\nfloat fallOffFunction(float vv, float vn, float bias) {\nfloat f = max(radius * radius - vv, 0.0);\nreturn f * f * f * max(vn-bias, 0.0);\n}`),d.code.add(l`float aoValueFromPositionsAndNormal(vec3 C, vec3 n_C, vec3 Q) {\nvec3 v = Q - C;\nfloat vv = dot(v, v);\nfloat vn = dot(normalize(v), n_C);\nreturn fallOffFunction(vv, vn, 0.1);\n}`),d.uniforms.add([new s(\"nearFar\",((e,r)=>r.camera.nearFar)),new f(\"normalMap\",(e=>e.normalTexture)),new f(\"depthMap\",(e=>e.depthTexture)),new s(\"zScale\",((e,r)=>i(r))),new c(\"projScale\",(e=>e.projScale)),new f(\"rnm\",(e=>e.noiseTexture)),new s(\"rnmScale\",((o,t)=>r(h,t.camera.fullWidth/e(o.noiseTexture).descriptor.width,t.camera.fullHeight/e(o.noiseTexture).descriptor.height))),new c(\"intensity\",((e,r)=>4*p/v(r)**6)),new s(\"screenSize\",((e,o)=>r(h,o.camera.fullWidth,o.camera.fullHeight)))]),d.code.add(l`\n    void main(void) {\n      fillSphere();\n      vec3 fres = normalize((texture2D(rnm, uv * rnmScale).xyz * 2.0) - vec3(1.0));\n      float currentPixelDepth = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      if (-currentPixelDepth>nearFar.y || -currentPixelDepth<nearFar.x) {\n        gl_FragColor = vec4(0.0);\n        return;\n      }\n\n      vec3 currentPixelPos = reconstructPosition(gl_FragCoord.xy,currentPixelDepth);\n\n      // get the normal of current fragment\n      vec4 norm4 = texture2D(normalMap, uv);\n      vec3 norm = vec3(-1.0) + 2.0 * norm4.xyz;\n      bool isTerrain = norm4.w<0.5;\n\n      float sum = .0;\n      vec3 tapPixelPos;\n\n      // note: the factor 2.0 should not be necessary, but makes ssao much nicer.\n      // bug or deviation from CE somewhere else?\n      float ps = projScale / (2.0 * currentPixelPos.z * zScale.x + zScale.y);\n\n      for(int i = 0; i < ${l.int(m)}; ++i) {\n        vec2 unitOffset = reflect(sphere[i], fres).xy;\n        vec2 offset = vec2(-unitOffset * radius * ps);\n\n        //don't use current or very nearby samples\n        if ( abs(offset.x)<2.0 || abs(offset.y)<2.0) continue;\n\n        vec2 tc = vec2(gl_FragCoord.xy + offset);\n        if (tc.x < 0.0 || tc.y < 0.0 || tc.x > screenSize.x || tc.y > screenSize.y) continue;\n        vec2 tcTap = tc / screenSize;\n        float occluderFragmentDepth = linearDepthFromTexture(depthMap, tcTap, nearFar);\n\n        if (isTerrain) {\n          bool isTerrainTap = texture2D(normalMap, tcTap).w<0.5;\n          if (isTerrainTap) {\n            continue;\n          }\n        }\n\n        tapPixelPos = reconstructPosition(tc, occluderFragmentDepth);\n\n        sum+= aoValueFromPositionsAndNormal(currentPixelPos, norm, tapPixelPos);\n      }\n\n      // output the result\n      float A = max(1.0 - sum * intensity / float(${l.int(m)}),0.0);\n\n      // Anti-tone map to reduce contrast and drag dark region farther: (x^0.2 + 1.2 * x^4)/2.2\n      A = (pow(A, 0.2) + 1.2 * A*A*A*A) / 2.2;\n      gl_FragColor = vec4(A);\n    }\n  `),o}function v(e){return Math.max(10,20*e.camera.computeRenderPixelSizeAtDist(Math.abs(4*e.camera.relativeElevation)))}const h=o(),x=Object.freeze(Object.defineProperty({__proto__:null,build:d},Symbol.toStringTag,{value:\"Module\"}));export{x as S,d as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{i as e}from\"./vec3.js\";import{ScreenSpacePass as r}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.js\";import{ReadLinearDepth as o}from\"../views/3d/webgl-engine/core/shaderLibrary/output/ReadLinearDepth.glsl.js\";import{Float2DrawUniform as t}from\"../views/3d/webgl-engine/core/shaderModules/Float2DrawUniform.js\";import{Float2PassUniform as a}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{FloatPassUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as s}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{ShaderBuilder as l}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{Texture2DDrawUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DDrawUniform.js\";import{Texture2DPassUniform as d}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";const f=4;function c(){const c=new l,u=c.fragment;c.include(r);const m=(f+1)/2,p=1/(2*m*m);return u.include(o),u.uniforms.add([new d(\"depthMap\",(e=>e.depthTexture)),new i(\"tex\",(e=>e.colorTexture)),new t(\"blurSize\",(e=>e.blurSize)),new n(\"projScale\",((r,o)=>{const t=e(o.camera.eye,o.camera.center);return t>5e4?Math.max(0,r.projScale-(t-5e4)):r.projScale})),new a(\"nearFar\",((e,r)=>r.camera.nearFar))]),u.code.add(s`\n    void blurFunction(vec2 uv, float r, float center_d, float sharpness, inout float wTotal, inout float bTotal) {\n      float c = texture2D(tex, uv).r;\n      float d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float ddiff = d - center_d;\n\n      float w = exp(-r * r * ${s.float(p)} - ddiff * ddiff * sharpness);\n      wTotal += w;\n      bTotal += w * c;\n    }\n  `),u.code.add(s`\n    void main(void) {\n      float b = 0.0;\n      float w_total = 0.0;\n\n      float center_d = linearDepthFromTexture(depthMap, uv, nearFar);\n\n      float sharpness = -0.05 * projScale / center_d;\n      for (int r = -${s.int(f)}; r <= ${s.int(f)}; ++r) {\n        float rf = float(r);\n        vec2 uvOffset = uv + rf * blurSize;\n        blurFunction(uvOffset, rf, center_d, sharpness, w_total, b);\n      }\n\n      gl_FragColor = vec4(b / w_total);\n    }\n  `),c}const u=Object.freeze(Object.defineProperty({__proto__:null,build:c},Symbol.toStringTag,{value:\"Module\"}));export{u as S,c as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function o(o){const f=e`vec3 decodeNormal(vec2 f) {\nfloat z = 1.0 - abs(f.x) - abs(f.y);\nreturn vec3(f + sign(f) * min(z, 0.0), z);\n}`;o.vertex.code.add(f)}export{o as DecodeNormal};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{DecodeNormal as e}from\"../util/DecodeNormal.glsl.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as t}from\"../../../lib/VertexAttribute.js\";function o(o,d){d.normalType===i.Attribute&&(o.attributes.add(t.NORMAL,\"vec3\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn normal;\n}`)),d.normalType===i.CompressedAttribute&&(o.include(e),o.attributes.add(t.NORMALCOMPRESSED,\"vec2\"),o.vertex.code.add(r`vec3 normalModel() {\nreturn decodeNormal(normalCompressed);\n}`)),d.normalType===i.ScreenDerivative&&(o.extensions.add(\"GL_OES_standard_derivatives\"),o.fragment.code.add(r`vec3 screenDerivativeNormal(vec3 positionView) {\nreturn normalize(cross(dFdx(positionView), dFdy(positionView)));\n}`))}var i;!function(e){e[e.Attribute=0]=\"Attribute\",e[e.CompressedAttribute=1]=\"CompressedAttribute\",e[e.Ground=2]=\"Ground\",e[e.ScreenDerivative=3]=\"ScreenDerivative\",e[e.COUNT=4]=\"COUNT\"}(i||(i={}));export{o as NormalAttribute,i as NormalAttributeType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../../../core/compilerUtils.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as t}from\"../../../lib/VertexAttribute.js\";var d;function o(o,v){switch(v.textureCoordinateType){case d.Default:return o.attributes.add(t.UV0,\"vec2\"),o.varyings.add(\"vuv0\",\"vec2\"),void o.vertex.code.add(r`void forwardTextureCoordinates() {\nvuv0 = uv0;\n}`);case d.Compressed:return o.attributes.add(t.UV0,\"vec2\"),o.varyings.add(\"vuv0\",\"vec2\"),void o.vertex.code.add(r`vec2 getUV0() {\nreturn uv0 / 16384.0;\n}\nvoid forwardTextureCoordinates() {\nvuv0 = getUV0();\n}`);case d.Atlas:return o.attributes.add(t.UV0,\"vec2\"),o.varyings.add(\"vuv0\",\"vec2\"),o.attributes.add(t.UVREGION,\"vec4\"),o.varyings.add(\"vuvRegion\",\"vec4\"),void o.vertex.code.add(r`void forwardTextureCoordinates() {\nvuv0 = uv0;\nvuvRegion = uvRegion;\n}`);default:e(v.textureCoordinateType);case d.None:return void o.vertex.code.add(r`void forwardTextureCoordinates() {}`);case d.COUNT:return}}!function(e){e[e.None=0]=\"None\",e[e.Default=1]=\"Default\",e[e.Atlas=2]=\"Atlas\",e[e.Compressed=3]=\"Compressed\",e[e.COUNT=4]=\"COUNT\"}(d||(d={}));export{o as TextureCoordinateAttribute,d as TextureCoordinateAttributeType};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{c as r}from\"../../../../../../chunks/mat3f64.js\";import{c as o}from\"../../../../../../chunks/vec4f64.js\";import{NormalAttributeType as a,NormalAttribute as l}from\"./NormalAttribute.glsl.js\";import{VertexPosition as e,VertexPositionPassParameters as m,VertexPositionDrawParameters as s}from\"./VertexPosition.glsl.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";import{Matrix3DrawUniform as d}from\"../../shaderModules/Matrix3DrawUniform.js\";import{Matrix3PassUniform as i}from\"../../shaderModules/Matrix3PassUniform.js\";function n(r,o){o.normalType===a.Attribute||o.normalType===a.CompressedAttribute?(r.include(l,o),r.varyings.add(\"vNormalWorld\",\"vec3\"),r.varyings.add(\"vNormalView\",\"vec3\"),r.vertex.uniforms.add([new d(\"transformNormalGlobalFromModel\",(r=>r.transformNormalGlobalFromModel)),new i(\"transformNormalViewFromGlobal\",(r=>r.transformNormalViewFromGlobal))]),r.vertex.code.add(t`void forwardNormal() {\nvNormalWorld = transformNormalGlobalFromModel * normalModel();\nvNormalView = transformNormalViewFromGlobal * vNormalWorld;\n}`)):o.normalType===a.Ground?(r.include(e,o),r.varyings.add(\"vNormalWorld\",\"vec3\"),r.vertex.code.add(t`\n    void forwardNormal() {\n      vNormalWorld = ${o.spherical?t`normalize(vPositionWorldCameraRelative);`:t`vec3(0.0, 0.0, 1.0);`}\n    }\n    `)):r.vertex.code.add(t`void forwardNormal() {}`)}class f extends m{constructor(){super(...arguments),this.transformNormalViewFromGlobal=r()}}class c extends s{constructor(){super(...arguments),this.transformNormalGlobalFromModel=r(),this.toMapSpace=o()}}export{n as VertexNormal,c as VertexNormalDrawParameters,f as VertexNormalPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){t.extensions.add(\"GL_EXT_shader_texture_lod\"),t.extensions.add(\"GL_OES_standard_derivatives\"),t.fragment.code.add(e`#ifndef GL_EXT_shader_texture_lod\nfloat calcMipMapLevel(const vec2 ddx, const vec2 ddy) {\nfloat deltaMaxSqr = max(dot(ddx, ddx), dot(ddy, ddy));\nreturn max(0.0, 0.5 * log2(deltaMaxSqr));\n}\n#endif\nvec4 textureAtlasLookup(sampler2D texture, vec2 textureSize, vec2 textureCoordinates, vec4 atlasRegion) {\nvec2 atlasScale = atlasRegion.zw - atlasRegion.xy;\nvec2 uvAtlas = fract(textureCoordinates) * atlasScale + atlasRegion.xy;\nfloat maxdUV = 0.125;\nvec2 dUVdx = clamp(dFdx(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\nvec2 dUVdy = clamp(dFdy(textureCoordinates), -maxdUV, maxdUV) * atlasScale;\n#ifdef GL_EXT_shader_texture_lod\nreturn texture2DGradEXT(texture, uvAtlas, dUVdx, dUVdy);\n#else\nvec2 dUVdxAuto = dFdx(uvAtlas);\nvec2 dUVdyAuto = dFdy(uvAtlas);\nfloat mipMapLevel = calcMipMapLevel(dUVdx * textureSize, dUVdy * textureSize);\nfloat autoMipMapLevel = calcMipMapLevel(dUVdxAuto * textureSize, dUVdyAuto * textureSize);\nreturn texture2D(texture, uvAtlas, mipMapLevel - autoMipMapLevel);\n#endif\n}`)}export{t as TextureAtlasLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{neverReached as e}from\"../../../../../../core/compilerUtils.js\";import{TextureCoordinateAttribute as t,TextureCoordinateAttributeType as r}from\"./TextureCoordinateAttribute.glsl.js\";import{TextureAtlasLookup as o}from\"../util/TextureAtlasLookup.glsl.js\";import{glsl as u}from\"../../shaderModules/interfaces.js\";function a(a,s){switch(a.include(t,s),a.fragment.code.add(u`\n  struct TextureLookupParameter {\n    vec2 uv;\n    ${s.supportsTextureAtlas?\"vec2 size;\":\"\"}\n  } vtc;\n  `),s.textureCoordinateType){case r.Default:case r.Compressed:return void a.fragment.code.add(u`vec4 textureLookup(sampler2D texture, TextureLookupParameter params) {\nreturn texture2D(texture, params.uv);\n}`);case r.Atlas:return a.include(o),void a.fragment.code.add(u`vec4 textureLookup(sampler2D texture, TextureLookupParameter params) {\nreturn textureAtlasLookup(texture, params.size, params.uv, vuvRegion);\n}`);default:e(s.textureCoordinateType);case r.None:case r.COUNT:return}}export{a as VertexTextureCoordinates};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../../../../chunks/vec4.js\";import{c as r}from\"../../../../../../chunks/vec4f64.js\";import{ScreenSizePerspective as t,addScreenSizePerspectiveAlignment as l}from\"../util/ScreenSizePerspective.glsl.js\";import{addCameraPosition as o}from\"../util/View.glsl.js\";import{Float4PassUniform as c}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";function a(e,r){const c=e.vertex;r.hasVerticalOffset?(f(c),r.hasScreenSizePerspective&&(e.include(t),l(c),o(e.vertex,r)),c.code.add(s`\n      vec3 calculateVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n        float viewDistance = length((view * vec4(worldPos, 1.0)).xyz);\n        ${r.spherical?s`vec3 worldNormal = normalize(worldPos + localOrigin);`:s`vec3 worldNormal = vec3(0.0, 0.0, 1.0);`}\n        ${r.hasScreenSizePerspective?s`\n            float cosAngle = dot(worldNormal, normalize(worldPos - cameraPosition));\n            float verticalOffsetScreenHeight = screenSizePerspectiveScaleFloat(verticalOffset.x, abs(cosAngle), viewDistance, screenSizePerspectiveAlignment);`:s`\n            float verticalOffsetScreenHeight = verticalOffset.x;`}\n        // Screen sized offset in world space, used for example for line callouts\n        float worldOffset = clamp(verticalOffsetScreenHeight * verticalOffset.y * viewDistance, verticalOffset.z, verticalOffset.w);\n        return worldNormal * worldOffset;\n      }\n\n      vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) {\n        return worldPos + calculateVerticalOffset(worldPos, localOrigin);\n      }\n    `)):c.code.add(s`vec3 addVerticalOffset(vec3 worldPos, vec3 localOrigin) { return worldPos; }`)}const i=r();function f(r){r.uniforms.add(new c(\"verticalOffset\",((r,t)=>{const{minWorldLength:l,maxWorldLength:o,screenLength:c}=r.verticalOffset,s=Math.tan(.5*t.camera.fovY)/(.5*t.camera.fullViewport[3]),a=t.camera.pixelRatio||1;return e(i,c*a,s,l,o)})))}export{a as VerticalOffset,f as addVerticalOffset};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as i}from\"../../../../../../chunks/vec3.js\";import{c as n}from\"../../../../../../chunks/vec3f64.js\";import{s as t}from\"../../../../../../chunks/vec4.js\";import{c as g}from\"../../../../../../chunks/vec4f64.js\";import{PBRMode as h}from\"./PhysicallyBasedRenderingParameters.glsl.js\";import{Float3PassUniform as e}from\"../../shaderModules/Float3PassUniform.js\";import{Float4PassUniform as l}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";function m(n,g){const m=n.fragment,o=void 0!==g.lightingSphericalHarmonicsOrder?g.lightingSphericalHarmonicsOrder:2;0===o?(m.uniforms.add(new e(\"lightingAmbientSH0\",((n,t)=>i(a,t.lighting.sh.r[0],t.lighting.sh.g[0],t.lighting.sh.b[0])))),m.code.add(s`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):1===o?(m.uniforms.add([new l(\"lightingAmbientSH_R\",((i,n)=>t(r,n.lighting.sh.r[0],n.lighting.sh.r[1],n.lighting.sh.r[2],n.lighting.sh.r[3]))),new l(\"lightingAmbientSH_G\",((i,n)=>t(r,n.lighting.sh.g[0],n.lighting.sh.g[1],n.lighting.sh.g[2],n.lighting.sh.g[3]))),new l(\"lightingAmbientSH_B\",((i,n)=>t(r,n.lighting.sh.b[0],n.lighting.sh.b[1],n.lighting.sh.b[2],n.lighting.sh.b[3])))]),m.code.add(s`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec4 sh0 = vec4(\n0.282095,\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y\n);\nvec3 ambientLight = vec3(\ndot(lightingAmbientSH_R, sh0),\ndot(lightingAmbientSH_G, sh0),\ndot(lightingAmbientSH_B, sh0)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`)):2===o&&(m.uniforms.add([new e(\"lightingAmbientSH0\",((n,t)=>i(a,t.lighting.sh.r[0],t.lighting.sh.g[0],t.lighting.sh.b[0]))),new l(\"lightingAmbientSH_R1\",((i,n)=>t(r,n.lighting.sh.r[1],n.lighting.sh.r[2],n.lighting.sh.r[3],n.lighting.sh.r[4]))),new l(\"lightingAmbientSH_G1\",((i,n)=>t(r,n.lighting.sh.g[1],n.lighting.sh.g[2],n.lighting.sh.g[3],n.lighting.sh.g[4]))),new l(\"lightingAmbientSH_B1\",((i,n)=>t(r,n.lighting.sh.b[1],n.lighting.sh.b[2],n.lighting.sh.b[3],n.lighting.sh.b[4]))),new l(\"lightingAmbientSH_R2\",((i,n)=>t(r,n.lighting.sh.r[5],n.lighting.sh.r[6],n.lighting.sh.r[7],n.lighting.sh.r[8]))),new l(\"lightingAmbientSH_G2\",((i,n)=>t(r,n.lighting.sh.g[5],n.lighting.sh.g[6],n.lighting.sh.g[7],n.lighting.sh.g[8]))),new l(\"lightingAmbientSH_B2\",((i,n)=>t(r,n.lighting.sh.b[5],n.lighting.sh.b[6],n.lighting.sh.b[7],n.lighting.sh.b[8])))]),m.code.add(s`vec3 calculateAmbientIrradiance(vec3 normal, float ambientOcclusion) {\nvec3 ambientLight = 0.282095 * lightingAmbientSH0;\nvec4 sh1 = vec4(\n0.488603 * normal.x,\n0.488603 * normal.z,\n0.488603 * normal.y,\n1.092548 * normal.x * normal.y\n);\nvec4 sh2 = vec4(\n1.092548 * normal.y * normal.z,\n0.315392 * (3.0 * normal.z * normal.z - 1.0),\n1.092548 * normal.x * normal.z,\n0.546274 * (normal.x * normal.x - normal.y * normal.y)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R1, sh1),\ndot(lightingAmbientSH_G1, sh1),\ndot(lightingAmbientSH_B1, sh1)\n);\nambientLight += vec3(\ndot(lightingAmbientSH_R2, sh2),\ndot(lightingAmbientSH_G2, sh2),\ndot(lightingAmbientSH_B2, sh2)\n);\nreturn ambientLight * (1.0 - ambientOcclusion);\n}`),g.pbrMode!==h.Normal&&g.pbrMode!==h.Schematic||m.code.add(s`const vec3 skyTransmittance = vec3(0.9, 0.9, 1.0);\nvec3 calculateAmbientRadiance(float ambientOcclusion)\n{\nvec3 ambientLight = 1.2 * (0.282095 * lightingAmbientSH0) - 0.2;\nreturn ambientLight *= (1.0 - ambientOcclusion) * skyTransmittance;\n}`))}const a=n(),r=g();export{m as EvaluateAmbientLighting};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Float3PassUniform as i}from\"../../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as n}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";function o(n){n.uniforms.add(new i(\"mainLightDirection\",((i,n)=>n.lighting.mainLight.direction)))}function a(n){n.uniforms.add(new i(\"mainLightIntensity\",((i,n)=>n.lighting.mainLight.intensity)))}function e(i,t){t.useLegacyTerrainShading?i.uniforms.add(new n(\"lightingFixedFactor\",((i,n)=>n.lighting.noonFactor*(1-n.lighting.globalFactor)))):i.constants.add(\"lightingFixedFactor\",\"float\",0)}function r(i,n){const r=i.fragment;o(r),a(r),e(r,n),r.code.add(t`vec3 evaluateMainLighting(vec3 normal_global, float shadowing) {\nfloat dotVal = clamp(dot(normal_global, mainLightDirection), 0.0, 1.0);\ndotVal = mix(dotVal, 1.0, lightingFixedFactor);\nreturn mainLightIntensity * ((1.0 - shadowing) * dotVal);\n}`)}export{r as MainLighting,o as addMainLightDirection,a as addMainLightIntensity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{glsl as e}from\"../../shaderModules/interfaces.js\";function t(t){const a=t.fragment.code;a.add(e`vec3 evaluateDiffuseIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float NdotNG)\n{\nreturn ((1.0 - NdotNG) * ambientGround + (1.0 + NdotNG) * ambientSky) * 0.5;\n}`),a.add(e`float integratedRadiance(float cosTheta2, float roughness)\n{\nreturn (cosTheta2 - 1.0) / (cosTheta2 * (1.0 - roughness * roughness) - 1.0);\n}`),a.add(e`vec3 evaluateSpecularIlluminationHemisphere(vec3 ambientGround, vec3 ambientSky, float RdotNG, float roughness)\n{\nfloat cosTheta2 = 1.0 - RdotNG * RdotNG;\nfloat intRadTheta = integratedRadiance(cosTheta2, roughness);\nfloat ground = RdotNG < 0.0 ? 1.0 - intRadTheta : 1.0 + intRadTheta;\nfloat sky = 2.0 - ground;\nreturn (ground * ambientGround + sky * ambientSky) * 0.5;\n}`)}export{t as AnalyticalSkyModel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{AnalyticalSkyModel as e}from\"./AnalyticalSkyModel.glsl.js\";import{PBRMode as o}from\"./PhysicallyBasedRenderingParameters.glsl.js\";import{PiUtils as t}from\"./PiUtils.glsl.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";function n(n,r){const l=n.fragment.code;n.include(t),r.pbrMode===o.Water||r.pbrMode===o.WaterOnIntegratedMesh?(l.add(a`\n    struct PBRShadingWater\n    {\n        float NdotL;   // cos angle between normal and light direction\n        float NdotV;   // cos angle between normal and view direction\n        float NdotH;   // cos angle between normal and half vector\n        float VdotH;   // cos angle between view direction and half vector\n        float LdotH;   // cos angle between light direction and half vector\n        float VdotN;   // cos angle between view direction and normal vector\n    };\n\n    float dtrExponent = ${r.useCustomDTRExponentForWater?\"2.2\":\"2.0\"};\n    `),l.add(a`vec3 fresnelReflection(float angle, vec3 f0, float f90) {\nreturn f0 + (f90 - f0) * pow(1.0 - angle, 5.0);\n}`),l.add(a`float normalDistributionWater(float NdotH, float roughness)\n{\nfloat r2 = roughness * roughness;\nfloat NdotH2 = NdotH * NdotH;\nfloat denom = pow((NdotH2 * (r2 - 1.0) + 1.0), dtrExponent) * PI;\nreturn r2 / denom;\n}`),l.add(a`float geometricOcclusionKelemen(float LoH)\n{\nreturn 0.25 / (LoH * LoH);\n}`),l.add(a`vec3 brdfSpecularWater(in PBRShadingWater props, float roughness, vec3 F0, float F0Max)\n{\nvec3  F = fresnelReflection(props.VdotH, F0, F0Max);\nfloat dSun = normalDistributionWater(props.NdotH, roughness);\nfloat V = geometricOcclusionKelemen(props.LdotH);\nfloat diffusionSunHaze = mix(roughness + 0.045, roughness + 0.385, 1.0 - props.VdotH);\nfloat strengthSunHaze  = 1.2;\nfloat dSunHaze = normalDistributionWater(props.NdotH, diffusionSunHaze)*strengthSunHaze;\nreturn ((dSun + dSunHaze) * V) * F;\n}\nvec3 tonemapACES(const vec3 x) {\nreturn (x * (2.51 * x + 0.03)) / (x * (2.43 * x + 0.59) + 0.14);\n}`)):r.pbrMode!==o.Normal&&r.pbrMode!==o.Schematic||(n.include(e),l.add(a`struct PBRShadingInfo\n{\nfloat NdotL;\nfloat NdotV;\nfloat NdotH;\nfloat VdotH;\nfloat LdotH;\nfloat NdotNG;\nfloat RdotNG;\nfloat NdotAmbDir;\nfloat NdotH_Horizon;\nvec3 skyRadianceToSurface;\nvec3 groundRadianceToSurface;\nvec3 skyIrradianceToSurface;\nvec3 groundIrradianceToSurface;\nfloat averageAmbientRadiance;\nfloat ssao;\nvec3 albedoLinear;\nvec3 f0;\nvec3 f90;\nvec3 diffuseColor;\nfloat metalness;\nfloat roughness;\n};`),l.add(a`float normalDistribution(float NdotH, float roughness)\n{\nfloat a = NdotH * roughness;\nfloat b = roughness / (1.0 - NdotH * NdotH + a * a);\nreturn b * b * INV_PI;\n}`),l.add(a`const vec4 c0 = vec4(-1.0, -0.0275, -0.572,  0.022);\nconst vec4 c1 = vec4( 1.0,  0.0425,  1.040, -0.040);\nconst vec2 c2 = vec2(-1.04, 1.04);\nvec2 prefilteredDFGAnalytical(float roughness, float NdotV) {\nvec4 r = roughness * c0 + c1;\nfloat a004 = min(r.x * r.x, exp2(-9.28 * NdotV)) * r.x + r.y;\nreturn c2 * a004 + r.zw;\n}`),l.add(a`vec3 evaluateEnvironmentIllumination(PBRShadingInfo inputs) {\nvec3 indirectDiffuse = evaluateDiffuseIlluminationHemisphere(inputs.groundIrradianceToSurface, inputs.skyIrradianceToSurface, inputs.NdotNG);\nvec3 indirectSpecular = evaluateSpecularIlluminationHemisphere(inputs.groundRadianceToSurface, inputs.skyRadianceToSurface, inputs.RdotNG, inputs.roughness);\nvec3 diffuseComponent = inputs.diffuseColor * indirectDiffuse * INV_PI;\nvec2 dfg = prefilteredDFGAnalytical(inputs.roughness, inputs.NdotV);\nvec3 specularColor = inputs.f0 * dfg.x + inputs.f90 * dfg.y;\nvec3 specularComponent = specularColor * indirectSpecular;\nreturn (diffuseComponent + specularComponent);\n}`),l.add(a`float gamutMapChanel(float x, vec2 p){\nreturn (x < p.x) ? mix(0.0, p.y, x/p.x) : mix(p.y, 1.0, (x - p.x) / (1.0 - p.x) );\n}`),l.add(a`vec3 blackLevelSoftCompression(vec3 inColor, PBRShadingInfo inputs){\nvec3 outColor;\nvec2 p = vec2(0.02 * (inputs.averageAmbientRadiance), 0.0075 * (inputs.averageAmbientRadiance));\noutColor.x = gamutMapChanel(inColor.x, p) ;\noutColor.y = gamutMapChanel(inColor.y, p) ;\noutColor.z = gamutMapChanel(inColor.z, p) ;\nreturn outColor;\n}`))}export{n as PhysicallyBasedRendering};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{f as e}from\"../../../../../../chunks/vec3f32.js\";import{VertexTextureCoordinates as s}from\"../attributes/VertexTextureCoordinates.glsl.js\";import{textureSize as o}from\"../util/WebGL2Utils.js\";import{Float3DrawUniform as t}from\"../../shaderModules/Float3DrawUniform.js\";import{Float3PassUniform as r}from\"../../shaderModules/Float3PassUniform.js\";import{glsl as a}from\"../../shaderModules/interfaces.js\";import{createTexture2DDrawSizeUniforms as i}from\"../../shaderModules/Texture2DDrawUniform.js\";import{createTexture2DPassSizeUniforms as c}from\"../../shaderModules/Texture2DPassUniform.js\";import{TextureSizeUniformType as u}from\"../../shaderModules/TextureSizeUniformType.js\";import{BindType as n}from\"../../shaderTechnique/BindType.js\";import{GLTextureMaterialBindParameters as l}from\"../../../lib/GLTextureMaterial.js\";const m=e(0,.6,.2);var d;!function(e){e[e.Disabled=0]=\"Disabled\",e[e.Normal=1]=\"Normal\",e[e.Schematic=2]=\"Schematic\",e[e.Water=3]=\"Water\",e[e.WaterOnIntegratedMesh=4]=\"WaterOnIntegratedMesh\",e[e.COUNT=5]=\"COUNT\"}(d||(d={}));class p extends l{}function x(e,l){const m=e.fragment,p=l.hasMetallicRoughnessTexture||l.hasEmissionTexture||l.hasOcclusionTexture;if(l.pbrMode===d.Normal&&p&&e.include(s,l),l.pbrMode!==d.Schematic)if(l.pbrMode!==d.Disabled){if(l.pbrMode===d.Normal){m.code.add(a`vec3 mrr;\nvec3 emission;\nfloat occlusion;`);const e=l.supportsTextureAtlas?l.hasWebGL2Context?u.None:u.Size:u.None,s=l.pbrTextureBindType;l.hasMetallicRoughnessTexture&&(m.uniforms.add(s===n.Pass?c(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness),e):i(\"texMetallicRoughness\",(e=>e.textureMetallicRoughness),e)),m.code.add(a`void applyMetallnessAndRoughness(TextureLookupParameter params) {\nvec3 metallicRoughness = textureLookup(texMetallicRoughness, params).rgb;\nmrr[0] *= metallicRoughness.b;\nmrr[1] *= metallicRoughness.g;\n}`)),l.hasEmissionTexture&&(m.uniforms.add(s===n.Pass?c(\"texEmission\",(e=>e.textureEmissive),e):i(\"texEmission\",(e=>e.textureEmissive),e)),m.code.add(a`void applyEmission(TextureLookupParameter params) {\nemission *= textureLookup(texEmission, params).rgb;\n}`)),l.hasOcclusionTexture?(m.uniforms.add(s===n.Pass?c(\"texOcclusion\",(e=>e.textureOcclusion),e):i(\"texOcclusion\",(e=>e.textureOcclusion),e)),m.code.add(a`void applyOcclusion(TextureLookupParameter params) {\nocclusion *= textureLookup(texOcclusion, params).r;\n}\nfloat getBakedOcclusion() {\nreturn occlusion;\n}`)):m.code.add(a`float getBakedOcclusion() { return 1.0; }`),m.uniforms.add(s===n.Pass?[new r(\"emissionFactor\",(e=>e.emissiveFactor)),new r(\"mrrFactors\",(e=>e.mrrFactors))]:[new t(\"emissionFactor\",(e=>e.emissiveFactor)),new t(\"mrrFactors\",(e=>e.mrrFactors))]),m.code.add(a`\n    void applyPBRFactors() {\n      mrr = mrrFactors;\n      emission = emissionFactor;\n      occlusion = 1.0;\n      ${p?a`vtc.uv = vuv0;`:\"\"}\n      ${l.hasMetallicRoughnessTextureTransform?a`vtc.uv = metallicRoughnessUV;`:\"\"}\n      ${l.hasMetallicRoughnessTexture?l.supportsTextureAtlas?a`\n                vtc.size = ${o(l,\"texMetallicRoughness\")};\n                applyMetallnessAndRoughness(vtc);`:a`applyMetallnessAndRoughness(vtc);`:\"\"}\n      ${l.hasEmissiveTextureTransform?a`vtc.uv = emissiveUV;`:\"\"}\n      ${l.hasEmissionTexture?l.supportsTextureAtlas?a`\n                vtc.size = ${o(l,\"texEmission\")};\n                applyEmission(vtc);`:a`applyEmission(vtc);`:\"\"}\n      ${l.hasOcclusionTextureTransform?a`vtc.uv = occlusionUV;`:\"\"}\n      ${l.hasOcclusionTexture?l.supportsTextureAtlas?a`\n                vtc.size = ${o(l,\"texOcclusion\")};\n                applyOcclusion(vtc);`:a`applyOcclusion(vtc);`:\"\"}\n    }\n  `)}}else m.code.add(a`float getBakedOcclusion() { return 1.0; }`);else m.code.add(a`vec3 mrr = vec3(0.0, 0.6, 0.2);\nvec3 emission = vec3(0.0);\nfloat occlusion = 1.0;\nvoid applyPBRFactors() {}\nfloat getBakedOcclusion() { return 1.0; }`)}export{p as PBRBindParameters,d as PBRMode,m as PBRSchematicMRRValues,x as PhysicallyBasedRenderingParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o,s){super(r,\"mat4\",e.Draw,((e,s,t)=>e.setUniformMatrix4fv(r,o(s,t))),s)}}export{o as Matrix4sDrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e,o){super(r,\"mat4\",s.Pass,((s,o,t)=>s.setUniformMatrix4fv(r,e(o,t))),o)}}export{e as Matrix4sPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{c as e}from\"../../../../../../chunks/vec3f64.js\";import{RgbaFloatEncoding as a}from\"../util/RgbaFloatEncoding.glsl.js\";import{textureSize as s}from\"../util/WebGL2Utils.js\";import{Float4PassUniform as o}from\"../../shaderModules/Float4PassUniform.js\";import{IntegerPassUniform as t}from\"../../shaderModules/IntegerPassUniform.js\";import{NoParameters as i,glsl as r}from\"../../shaderModules/interfaces.js\";import{Matrix4sDrawUniform as d}from\"../../shaderModules/Matrix4sDrawUniform.js\";import{Matrix4sPassUniform as l}from\"../../shaderModules/Matrix4sPassUniform.js\";import{createTexture2DPassSizeUniforms as p}from\"../../shaderModules/Texture2DPassUniform.js\";import{TextureSizeUniformType as c}from\"../../shaderModules/TextureSizeUniformType.js\";class n extends i{constructor(){super(...arguments),this.origin=e()}}function h(e,a){a.receiveShadows&&(e.fragment.uniforms.add(new l(\"shadowMapMatrix\",((e,a)=>a.shadowMap.getShadowMapMatrices(e.origin)),4)),f(e,a))}function v(e,a){a.receiveShadows&&(e.fragment.uniforms.add(new d(\"shadowMapMatrix\",((e,a)=>a.shadowMap.getShadowMapMatrices(e.origin)),4)),f(e,a))}function f(e,i){const d=e.fragment;d.include(a),d.uniforms.add([...p(\"shadowMapTex\",((e,a)=>a.shadowMap.depthTexture),i.hasWebGL2Context?c.None:c.Size),new t(\"numCascades\",((e,a)=>a.shadowMap.numCascades)),new o(\"cascadeDistances\",((e,a)=>a.shadowMap.cascadeDistances))]),d.code.add(r`\n    int chooseCascade(float depth, out mat4 mat) {\n      vec4 distance = cascadeDistances;\n\n      // choose correct cascade\n      int i = depth < distance[1] ? 0 : depth < distance[2] ? 1 : depth < distance[3] ? 2 : 3;\n\n      mat = i == 0 ? shadowMapMatrix[0] : i == 1 ? shadowMapMatrix[1] : i == 2 ? shadowMapMatrix[2] : shadowMapMatrix[3];\n\n      return i;\n    }\n\n    vec3 lightSpacePosition(vec3 _vpos, mat4 mat) {\n      vec4 lv = mat * vec4(_vpos, 1.0);\n      lv.xy /= lv.w;\n      return 0.5 * lv.xyz + vec3(0.5);\n    }\n\n    vec2 cascadeCoordinates(int i, vec3 lvpos) {\n      return vec2(float(i - 2 * (i / 2)) * 0.5, float(i / 2) * 0.5) + 0.5 * lvpos.xy;\n    }\n\n    float readShadowMapDepth(vec2 uv, sampler2D _depthTex) {\n      return rgba2float(texture2D(_depthTex, uv));\n    }\n\n    float posIsInShadow(vec2 uv, vec3 lvpos, sampler2D _depthTex) {\n      return readShadowMapDepth(uv, _depthTex) < lvpos.z ? 1.0 : 0.0;\n    }\n\n    float filterShadow(vec2 uv, vec3 lvpos, float textureSize, sampler2D _depthTex) {\n      float halfPixelSize = 0.5 / textureSize;\n\n      // filter, offset by half pixels\n      vec2 st = fract((vec2(halfPixelSize) + uv) * textureSize);\n\n      float s00 = posIsInShadow(uv + vec2(-halfPixelSize, -halfPixelSize), lvpos, _depthTex);\n      float s10 = posIsInShadow(uv + vec2(halfPixelSize, -halfPixelSize), lvpos, _depthTex);\n      float s11 = posIsInShadow(uv + vec2(halfPixelSize, halfPixelSize), lvpos, _depthTex);\n      float s01 = posIsInShadow(uv + vec2(-halfPixelSize, halfPixelSize), lvpos, _depthTex);\n\n      return mix(mix(s00, s10, st.x), mix(s01, s11, st.x), st.y);\n    }\n\n    float readShadowMap(const in vec3 _vpos, float _linearDepth) {\n      mat4 mat;\n      int i = chooseCascade(_linearDepth, mat);\n\n      if (i >= numCascades) { return 0.0; }\n\n      vec3 lvpos = lightSpacePosition(_vpos, mat);\n\n      // vertex completely outside? -> no shadow\n      if (lvpos.z >= 1.0) { return 0.0; }\n      if (lvpos.x < 0.0 || lvpos.x > 1.0 || lvpos.y < 0.0 || lvpos.y > 1.0) { return 0.0; }\n\n      // calc coord in cascade texture\n      vec2 uv = cascadeCoordinates(i, lvpos);\n\n      vec2 textureSize = ${s(i,\"shadowMapTex\")};\n\n      return filterShadow(uv, lvpos, textureSize.x, shadowMapTex);\n    }\n  `)}export{n as ReadShadowMapBindParameters,v as ReadShadowMapDraw,h as ReadShadowMapPass};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Float3PassUniform as e}from\"../../shaderModules/Float3PassUniform.js\";import{Float4sPassUniform as o}from\"../../shaderModules/Float4sPassUniform.js\";import{FloatsPassUniform as r}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as v}from\"../../shaderModules/interfaces.js\";import{Matrix3PassUniform as t}from\"../../shaderModules/Matrix3PassUniform.js\";import{VertexAttribute as a}from\"../../../lib/VertexAttribute.js\";import{vvColorNumber as i}from\"../../../materials/VisualVariablePassParameters.js\";function s(s,n){n.hasVvInstancing&&(n.vvSize||n.vvColor)&&s.attributes.add(a.INSTANCEFEATUREATTRIBUTE,\"vec4\");const l=s.vertex;n.vvSize?(l.uniforms.add(new e(\"vvSizeMinSize\",(e=>e.vvSizeMinSize))),l.uniforms.add(new e(\"vvSizeMaxSize\",(e=>e.vvSizeMaxSize))),l.uniforms.add(new e(\"vvSizeOffset\",(e=>e.vvSizeOffset))),l.uniforms.add(new e(\"vvSizeFactor\",(e=>e.vvSizeFactor))),l.uniforms.add(new t(\"vvSymbolRotationMatrix\",(e=>e.vvSymbolRotationMatrix))),l.uniforms.add(new e(\"vvSymbolAnchor\",(e=>e.vvSymbolAnchor))),l.code.add(v`vec3 vvScale(vec4 _featureAttribute) {\nreturn clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize);\n}\nvec4 vvTransformPosition(vec3 position, vec4 _featureAttribute) {\nreturn vec4(vvSymbolRotationMatrix * ( vvScale(_featureAttribute) * (position + vvSymbolAnchor)), 1.0);\n}`),l.code.add(v`\n      const float eps = 1.192092896e-07;\n      vec4 vvTransformNormal(vec3 _normal, vec4 _featureAttribute) {\n        vec3 vvScale = clamp(vvSizeOffset + _featureAttribute.x * vvSizeFactor, vvSizeMinSize + eps, vvSizeMaxSize);\n        return vec4(vvSymbolRotationMatrix * _normal / vvScale, 1.0);\n      }\n\n      ${n.hasVvInstancing?v`\n      vec4 vvLocalNormal(vec3 _normal) {\n        return vvTransformNormal(_normal, instanceFeatureAttribute);\n      }\n\n      vec4 localPosition() {\n        return vvTransformPosition(position, instanceFeatureAttribute);\n      }`:\"\"}\n    `)):l.code.add(v`vec4 localPosition() { return vec4(position, 1.0); }\nvec4 vvLocalNormal(vec3 _normal) { return vec4(_normal, 1.0); }`),n.vvColor?(l.constants.add(\"vvColorNumber\",\"int\",i),n.hasVvInstancing&&l.uniforms.add([new r(\"vvColorValues\",(e=>e.vvColorValues),i),new o(\"vvColorColors\",(e=>e.vvColorColors),i)]),l.code.add(v`\n      vec4 vvGetColor(vec4 featureAttribute, float values[vvColorNumber], vec4 colors[vvColorNumber]) {\n        float value = featureAttribute.y;\n        if (value <= values[0]) {\n          return colors[0];\n        }\n\n        for (int i = 1; i < vvColorNumber; ++i) {\n          if (values[i] >= value) {\n            float f = (value - values[i-1]) / (values[i] - values[i-1]);\n            return mix(colors[i-1], colors[i], f);\n          }\n        }\n        return colors[vvColorNumber - 1];\n      }\n\n      ${n.hasVvInstancing?v`\n      vec4 vvColor() {\n        return vvGetColor(instanceFeatureAttribute, vvColorValues, vvColorColors);\n      }`:\"\"}\n    `)):l.code.add(v`vec4 vvColor() { return vec4(1.0); }`)}export{s as VisualVariables};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{s as e}from\"../../../../../../chunks/vec4.js\";import{c as a}from\"../../../../../../chunks/vec4f64.js\";import{Float4PassUniform as r}from\"../../shaderModules/Float4PassUniform.js\";import{glsl as s}from\"../../shaderModules/interfaces.js\";function c(e){e.vertex.code.add(s`float screenSizePerspectiveMinSize(float size, vec4 factor) {\nfloat nonZeroSize = 1.0 - step(size, 0.0);\nreturn (\nfactor.z * (\n1.0 +\nnonZeroSize *\n2.0 * factor.w / (\nsize + (1.0 - nonZeroSize)\n)\n)\n);\n}`),e.vertex.code.add(s`float screenSizePerspectiveViewAngleDependentFactor(float absCosAngle) {\nreturn absCosAngle * absCosAngle * absCosAngle;\n}`),e.vertex.code.add(s`vec4 screenSizePerspectiveScaleFactor(float absCosAngle, float distanceToCamera, vec4 params) {\nreturn vec4(\nmin(params.x / (distanceToCamera - params.y), 1.0),\nscreenSizePerspectiveViewAngleDependentFactor(absCosAngle),\nparams.z,\nparams.w\n);\n}`),e.vertex.code.add(s`float applyScreenSizePerspectiveScaleFactorFloat(float size, vec4 factor) {\nreturn max(mix(size * factor.x, size, factor.y), screenSizePerspectiveMinSize(size, factor));\n}`),e.vertex.code.add(s`float screenSizePerspectiveScaleFloat(float size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorFloat(\nsize,\nscreenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params)\n);\n}`),e.vertex.code.add(s`vec2 applyScreenSizePerspectiveScaleFactorVec2(vec2 size, vec4 factor) {\nreturn mix(size * clamp(factor.x, screenSizePerspectiveMinSize(size.y, factor) / max(1e-5, size.y), 1.0), size, factor.y);\n}`),e.vertex.code.add(s`vec2 screenSizePerspectiveScaleVec2(vec2 size, float absCosAngle, float distanceToCamera, vec4 params) {\nreturn applyScreenSizePerspectiveScaleFactorVec2(size, screenSizePerspectiveScaleFactor(absCosAngle, distanceToCamera, params));\n}`)}function t(e){e.uniforms.add(new r(\"screenSizePerspective\",(e=>o(e.screenSizePerspective))))}function i(e){e.uniforms.add(new r(\"screenSizePerspectiveAlignment\",(e=>o(e.screenSizePerspectiveAlignment||e.screenSizePerspective))))}function o(a){return e(n,a.parameters.divisor,a.parameters.offset,a.parameters.minPixelSize,a.paddingPixelsOverride)}const n=a();export{c as ScreenSizePerspective,t as addScreenSizePerspective,i as addScreenSizePerspectiveAlignment};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Uniform as o}from\"./Uniform.js\";import{BindType as r}from\"../shaderTechnique/BindType.js\";class s extends o{constructor(o,s){super(o,\"bool\",r.Pass,((r,e,t)=>r.setUniform1b(o,s(e,t))))}}export{s as BooleanPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as e}from\"../shaderTechnique/BindType.js\";class o extends r{constructor(r,o){super(r,\"vec2\",e.Draw,((e,s,t,i)=>e.setUniform2fv(r,o(s,t,i))))}}export{o as Float2DrawUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{Uniform as r}from\"./Uniform.js\";import{BindType as s}from\"../shaderTechnique/BindType.js\";class e extends r{constructor(r,e){super(r,\"int\",s.Pass,((s,o,i)=>s.setUniform1i(r,e(o,i))))}}export{e as IntegerPassUniform};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{isSome as r}from\"../../../../../core/maybe.js\";import{s as e}from\"../../../../../chunks/vec2.js\";import{Z as o,a as s}from\"../../../../../chunks/vec2f64.js\";import{TEXTURE_SIZE_UNIFORM_SUFFIX as t,TEXTURE_INVERSE_SIZE_UNIFORM_SUFFIX as i}from\"../shaderLibrary/util/WebGL2Utils.js\";import{Float2DrawUniform as n}from\"./Float2DrawUniform.js\";import{TextureSizeUniformType as m}from\"./TextureSizeUniformType.js\";import{Uniform as c}from\"./Uniform.js\";import{BindType as p}from\"../shaderTechnique/BindType.js\";class f extends c{constructor(r,e){super(r,\"sampler2D\",p.Draw,((o,s,t)=>o.bindTexture(r,e(s,t))))}}function u(s,c,p=m.None){const u=[new f(s,c)];if(p&m.Size){const i=s+t;u.push(new n(i,((s,t)=>{const i=c(s,t);return r(i)?e(a,i.descriptor.width,i.descriptor.height):o})))}if(p&m.InvSize){const t=s+i;u.push(new n(t,((s,t)=>{const i=c(s,t);return r(i)?e(a,1/i.descriptor.width,1/i.descriptor.height):o})))}return u}const a=s();export{f as Texture2DDrawUniform,u as createTexture2DDrawSizeUniforms};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as r}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as e}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Default3D as i}from\"./DefaultVertexAttributeLocations.js\";import{Program as o}from\"./Program.js\";import{S as t}from\"../../../../chunks/SSAOBlur.glsl.js\";import{makePipelineState as s,defaultColorWriteParams as a}from\"../../../webgl/renderState.js\";class l extends e{initializeProgram(r){return new o(r.rctx,l.shader.get().build(),i)}initializePipeline(){return s({colorWrite:a})}}l.shader=new r(t,(()=>import(\"../shaders/SSAOBlur.glsl.js\")));export{l as SSAOBlurTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Default3D as i}from\"./DefaultVertexAttributeLocations.js\";import{Program as o}from\"./Program.js\";import{S as t}from\"../../../../chunks/SSAO.glsl.js\";import{makePipelineState as s,defaultColorWriteParams as a}from\"../../../webgl/renderState.js\";class l extends r{initializeProgram(e){return new o(e.rctx,l.shader.get().build(),i)}initializePipeline(){return s({colorWrite:a})}}l.shader=new e(t,(()=>import(\"../shaders/SSAO.glsl.js\")));export{l as SSAOTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{a as s}from\"../../../../chunks/vec2f64.js\";import{NoParameters as e}from\"../core/shaderModules/interfaces.js\";class r extends e{constructor(){super(...arguments),this.projScale=1}}class t extends r{}class c extends e{}class o extends c{constructor(){super(...arguments),this.blurSize=s()}}export{o as BlurDrawParameters,r as BlurPassParameters,c as SSAODrawParameters,t as SSAOPassParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as e,applySome as s,isSome as t,isNone as r}from\"../../../../core/maybe.js\";import{s as i}from\"../../../../chunks/vec2.js\";import{requestImage as a}from\"../../../../support/requestImageUtils.js\";import{createQuadVAO as h}from\"./glUtil3D.js\";import{SSAOBlurTechnique as _}from\"./SSAOBlurTechnique.js\";import{SSAOTechnique as o}from\"./SSAOTechnique.js\";import{SSAOPassParameters as u,BlurDrawParameters as l}from\"../shaders/SSAOParameters.js\";import{PrimitiveType as n,TextureType as m,PixelFormat as d,PixelType as b,TextureSamplingMode as O,TextureWrapMode as p,TargetType as c,DepthStencilTargetType as B}from\"../../../webgl/enums.js\";import{FramebufferObject as F}from\"../../../webgl/FramebufferObject.js\";import{Texture as T}from\"../../../webgl/Texture.js\";import{vertexCount as g}from\"../../../webgl/Util.js\";const w=2;class P{constructor(e,s,t){this._techniqueRepository=e,this._rctx=s,this._requestRender=t,this._enabled=!1,this._quadVAO=null,this._passParameters=new u,this._drawParameters=new l}dispose(){this._quadVAO=e(this._quadVAO)}disposeOffscreenBuffers(){s(this._ssaoFBO,(e=>e.resize(0,0))),s(this._blur0FBO,(e=>e.resize(0,0))),s(this._blur1FBO,(e=>e.resize(0,0)))}set enabled(e){e?this._enable():this._disable()}get enabled(){return this._enabled}get ready(){return this.enabled&&t(this._passParameters.noiseTexture)&&t(this._ssaoFBO)&&t(this._blur0FBO)&&t(this._blur1FBO)}get loading(){return this.enabled&&!this.ready}get colorTexture(){return t(this._blur1FBO)?this._blur1FBO.colorTexture:null}get width(){return t(this._ssaoFBO)?this._ssaoFBO.width:-1}get height(){return t(this._ssaoFBO)?this._ssaoFBO.height:-1}computeSSAO(e,s,t){if(!this.enabled||r(s)||r(t)||r(this._passParameters.noiseTexture)||r(this._ssaoFBO)||r(this._blur0FBO)||r(this._blur1FBO))return;const a=this._rctx,_=e.camera;this._passParameters.normalTexture=t,this._passParameters.depthTexture=s,this._passParameters.projScale=1/_.computeRenderPixelSizeAtDist(1);const o=_.fullViewport,u=o[2],l=o[3],m=u/w,d=l/w;this._ssaoFBO.resize(u,l),this._blur0FBO.resize(m,d),this._blur1FBO.resize(m,d),r(this._quadVAO)&&(this._quadVAO=h(this._rctx)),a.bindFramebuffer(this._ssaoFBO),a.setViewport(0,0,u,l);a.bindTechnique(this._ssaoTechnique,this._passParameters,e).bindDraw(this._drawParameters,e,this._passParameters),a.bindVAO(this._quadVAO),a.drawArrays(n.TRIANGLE_STRIP,0,g(this._quadVAO,\"geometry\"));const b=a.bindTechnique(this._blurTechnique,this._passParameters,e);a.setViewport(0,0,m,d),a.bindFramebuffer(this._blur0FBO),this._drawParameters.colorTexture=this._ssaoFBO.colorTexture,i(this._drawParameters.blurSize,0,w/l),b.bindDraw(this._drawParameters,e,this._passParameters),a.setViewport(0,0,m,d),a.drawArrays(n.TRIANGLE_STRIP,0,g(this._quadVAO,\"geometry\")),a.bindFramebuffer(this._blur1FBO),this._drawParameters.colorTexture=this._blur0FBO.colorTexture,i(this._drawParameters.blurSize,w/u,0),b.bindDraw(this._drawParameters,e,this._passParameters),a.drawArrays(n.TRIANGLE_STRIP,0,g(this._quadVAO,\"geometry\")),a.setViewport(o[0],o[1],o[2],o[3])}_selectPrograms(){r(this._ssaoTechnique)&&(this._ssaoTechnique=this._techniqueRepository.acquire(o)),r(this._blurTechnique)&&(this._blurTechnique=this._techniqueRepository.acquire(_))}_enable(){this.enabled||(this._enabled=!0,this._loadResources((()=>{this._enabled&&this._initialize()})))}_loadResources(e){this._data?e():import(\"./SSAOHelperData.js\").then((s=>{this._data=s,e()}))}_initialize(){const e={target:m.TEXTURE_2D,pixelFormat:d.RGBA,dataType:b.UNSIGNED_BYTE,samplingMode:O.LINEAR,wrapMode:p.CLAMP_TO_EDGE,width:0,height:0},s={colorTarget:c.TEXTURE,depthStencilTarget:B.NONE};a(this._data.noiseTexture).then((t=>{this._enabled&&(this._ssaoFBO=new F(this._rctx,s,e),this._blur0FBO=new F(this._rctx,s,e),this._blur1FBO=new F(this._rctx,s,e),this._passParameters.noiseTexture=new T(this._rctx,{target:m.TEXTURE_2D,pixelFormat:d.RGBA,dataType:b.UNSIGNED_BYTE,hasMipmap:!0,width:t.width,height:t.height},t),this._requestRender())})),this._selectPrograms()}_disable(){this._enabled=!1,this._passParameters.noiseTexture=e(this._passParameters.noiseTexture),this._blur1FBO=e(this._blur1FBO),this._blur0FBO=e(this._blur0FBO),this._ssaoFBO=e(this._ssaoFBO)}get gpuMemoryUsage(){return(t(this._blur0FBO)?this._blur0FBO.gpuMemoryUsage:0)+(t(this._blur1FBO)?this._blur1FBO.gpuMemoryUsage:0)+(t(this._ssaoFBO)?this._ssaoFBO.gpuMemoryUsage:0)}get test(){return{ssao:this._ssaoFBO,blur:this._blur1FBO}}}export{P as SSAOHelper,w as blurSizePixels};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{c as t,f as s}from\"../../../../chunks/vec3f64.js\";class i{constructor(s=t()){this.intensity=s}}class c{constructor(i=t(),c=s(.57735,.57735,.57735)){this.intensity=i,this.direction=c}}class n{constructor(i=t(),c=s(.57735,.57735,.57735),n=!0,r=1,h=1){this.intensity=i,this.direction=c,this.castShadows=n,this.specularStrength=r,this.environmentStrength=h}}class r{constructor(){this.r=[0],this.g=[0],this.b=[0]}}export{i as AmbientLight,c as FillLight,n as MainLight,r as SphericalHarmonicsAmbientLight};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nfunction t(t,n){let e=0;for(let l=0;l<t.length;l++)e+=t[l]*n[l];return e}function n(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n[l];return e}function e(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]*n;return e}function l(t,n,e){(e=e||t).length=t.length;for(let l=0;l<t.length;l++)e[l]=t[l]+n[l];return e}export{l as add,t as dotProduct,n as elementwiseProduct,e as scalarProduct};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../../../core/mathUtils.js\";import{o as n,s as o,c as r}from\"../../../../chunks/vec3.js\";import{c as e}from\"../../../../chunks/vec3f64.js\";import{elementwiseProduct as s,scalarProduct as i,add as c}from\"../lib/LongVectorMath.js\";import{MainLight as f,FillLight as h,AmbientLight as a,SphericalHarmonicsAmbientLight as g}from\"./Lightsources.js\";function u(t){return(t+1)*(t+1)}function l(n){return t(Math.floor(Math.sqrt(n)-1),0,2)}function m(t,n,o){const r=t[0],e=t[1],s=t[2],i=o||[];return i.length=u(n),n>=0&&(i[0]=.28209479177),n>=1&&(i[1]=.4886025119*r,i[2]=.4886025119*s,i[3]=.4886025119*e),n>=2&&(i[4]=1.09254843059*r*e,i[5]=1.09254843059*e*s,i[6]=.31539156525*(3*s*s-1),i[7]=1.09254843059*r*s,i[8]=.54627421529*(r*r-e*e)),i}function p(t,n){const o=u(t),r=n||{r:[],g:[],b:[]};r.r.length=r.g.length=r.b.length=o;for(let e=0;e<o;e++)r.r[e]=r.g[e]=r.b[e]=0;return r}function y(t,o){const r=l(o.r.length);for(const e of t)n(P,e.direction),m(P,r,v),s(v,k),i(v,e.intensity[0],I),c(o.r,I),i(v,e.intensity[1],I),c(o.g,I),i(v,e.intensity[2],I),c(o.b,I);return o}function b(t,n){m(P,0,v);for(const o of t)n.r[0]+=v[0]*k[0]*o.intensity[0]*4*Math.PI,n.g[0]+=v[0]*k[0]*o.intensity[1]*4*Math.PI,n.b[0]+=v[0]*k[0]*o.intensity[2]*4*Math.PI;return n}function M(t,n,e,s){p(n,s),o(e.intensity,0,0,0);let i=!1;const u=S,l=d,m=j;u.length=0,l.length=0,m.length=0;for(const o of t)o instanceof f&&!i?(r(e.direction,o.direction),r(e.intensity,o.intensity),e.specularStrength=o.specularStrength,e.environmentStrength=o.environmentStrength,e.castShadows=o.castShadows,i=!0):o instanceof f||o instanceof h?u.push(o):o instanceof a?l.push(o):o instanceof g&&m.push(o);y(u,s),b(l,s);for(const o of m)c(s.r,o.r),c(s.g,o.g),c(s.b,o.b)}const S=[],d=[],j=[],v=[0],I=[0],P=e(),k=[3.141593,2.094395,2.094395,2.094395,.785398,.785398,.785398,.785398,.785398];export{M as combineLights,m as computeCoefficients,p as initSHCoefficients,u as numberOfCoefficients,l as orderFromNumberOfCoefficients,b as projectAmbientLights,y as projectFillLights};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.25/esri/copyright.txt for details.\n*/\nimport{lerp as i}from\"../../../../core/mathUtils.js\";import{c as t,g as s,a as h,h as r}from\"../../../../chunks/vec3.js\";import{c as n,f as a,a as o}from\"../../../../chunks/vec3f64.js\";import{SphericalHarmonicsAmbientLight as e,MainLight as c}from\"./Lightsources.js\";import{combineLights as g}from\"./SphericalHarmonics.js\";class m{constructor(){this.color=n(),this.intensity=1}}class l{constructor(){this.direction=n(),this.ambient=new m,this.diffuse=new m}}const _=.4;class L{constructor(){this._shOrder=2,this._legacy=new l,this.globalFactor=.5,this.noonFactor=.5,this._sphericalHarmonics=new e,this._mainLight=new c(n(),a(1,0,0),!1)}get legacy(){return this._legacy}get sh(){return this._sphericalHarmonics}get mainLight(){return this._mainLight}set(i){g(i,this._shOrder,this._mainLight,this._sphericalHarmonics),t(this._legacy.direction,this._mainLight.direction);const r=1/Math.PI;this._legacy.ambient.color[0]=.282095*this._sphericalHarmonics.r[0]*r,this._legacy.ambient.color[1]=.282095*this._sphericalHarmonics.g[0]*r,this._legacy.ambient.color[2]=.282095*this._sphericalHarmonics.b[0]*r,s(this._legacy.diffuse.color,this._mainLight.intensity,r),t(p,this._legacy.diffuse.color),s(p,p,_*this.globalFactor),h(this._legacy.ambient.color,this._legacy.ambient.color,p)}copyFrom(i){this._sphericalHarmonics.r=Array.from(i.sh.r),this._sphericalHarmonics.g=Array.from(i.sh.g),this._sphericalHarmonics.b=Array.from(i.sh.b),this._mainLight.direction=o(i.mainLight.direction),this._mainLight.intensity=o(i.mainLight.intensity),this._mainLight.castShadows=i.mainLight.castShadows,this._mainLight.specularStrength=i.mainLight.specularStrength,this._mainLight.environmentStrength=i.mainLight.environmentStrength,this.globalFactor=i.globalFactor,this.noonFactor=i.noonFactor}lerpLighting(s,h,n){if(r(this._mainLight.intensity,s.mainLight.intensity,h.mainLight.intensity,n),this._mainLight.environmentStrength=i(s.mainLight.environmentStrength,h.mainLight.environmentStrength,n),this._mainLight.specularStrength=i(s.mainLight.specularStrength,h.mainLight.specularStrength,n),t(this._mainLight.direction,h.mainLight.direction),this._mainLight.castShadows=h.mainLight.castShadows,this.globalFactor=i(s.globalFactor,h.globalFactor,n),this.noonFactor=i(s.noonFactor,h.noonFactor,n),s.sh.r.length===h.sh.r.length)for(let t=0;t<h.sh.r.length;t++)this._sphericalHarmonics.r[t]=i(s.sh.r[t],h.sh.r[t],n),this._sphericalHarmonics.g[t]=i(s.sh.g[t],h.sh.g[t],n),this._sphericalHarmonics.b[t]=i(s.sh.b[t],h.sh.b[t],n);else for(let i=0;i<h.sh.r.length;i++)this._sphericalHarmonics.r[i]=h.sh.r[i],this._sphericalHarmonics.g[i]=h.sh.g[i],this._sphericalHarmonics.b[i]=h.sh.b[i]}}const p=n();export{L as SceneLighting,_ as ambientBoost};\n"],"names":["d","o","u","fragment","include","t","a","n","uniforms","add","c","e","r","v","code","l","s","camera","nearFar","f","normalTexture","depthTexture","i","projScale","noiseTexture","h","fullWidth","descriptor","width","fullHeight","height","Math","max","computeRenderPixelSizeAtDist","abs","relativeElevation","x","Object","freeze","defineProperty","__proto__","build","Symbol","toStringTag","value","colorTexture","blurSize","eye","center","vertex","normalType","Attribute","attributes","CompressedAttribute","ScreenDerivative","extensions","Ground","COUNT","textureCoordinateType","Default","varyings","Compressed","Atlas","None","transformNormalGlobalFromModel","transformNormalViewFromGlobal","spherical","m","constructor","super","arguments","this","toMapSpace","supportsTextureAtlas","hasVerticalOffset","hasScreenSizePerspective","minWorldLength","maxWorldLength","screenLength","verticalOffset","tan","fovY","fullViewport","pixelRatio","g","lightingSphericalHarmonicsOrder","lighting","sh","b","pbrMode","mainLight","direction","intensity","useLegacyTerrainShading","noonFactor","globalFactor","constants","useCustomDTRExponentForWater","Disabled","Normal","Schematic","Water","WaterOnIntegratedMesh","p","hasMetallicRoughnessTexture","hasEmissionTexture","hasOcclusionTexture","hasWebGL2Context","pbrTextureBindType","textureMetallicRoughness","textureEmissive","textureOcclusion","emissiveFactor","mrrFactors","hasMetallicRoughnessTextureTransform","hasEmissiveTextureTransform","hasOcclusionTextureTransform","setUniformMatrix4fv","receiveShadows","shadowMap","getShadowMapMatrices","origin","numCascades","cascadeDistances","hasVvInstancing","vvSize","vvColor","vvSizeMinSize","vvSizeMaxSize","vvSizeOffset","vvSizeFactor","vvSymbolRotationMatrix","vvSymbolAnchor","vvColorValues","vvColorColors","screenSizePerspective","screenSizePerspectiveAlignment","parameters","divisor","offset","minPixelSize","paddingPixelsOverride","setUniform1b","setUniform2fv","setUniform1i","bindTexture","push","initializeProgram","rctx","shader","get","initializePipeline","colorWrite","w","P","_techniqueRepository","_rctx","_requestRender","_enabled","_quadVAO","_passParameters","_drawParameters","dispose","disposeOffscreenBuffers","_ssaoFBO","resize","_blur0FBO","_blur1FBO","enabled","_enable","_disable","ready","loading","computeSSAO","_","bindFramebuffer","setViewport","bindTechnique","_ssaoTechnique","bindDraw","bindVAO","drawArrays","_blurTechnique","_selectPrograms","acquire","_loadResources","_initialize","_data","then","target","pixelFormat","dataType","samplingMode","O","wrapMode","colorTarget","depthStencilTarget","B","F","T","hasMipmap","gpuMemoryUsage","test","ssao","blur","castShadows","specularStrength","environmentStrength","length","y","floor","sqrt","k","I","PI","S","j","color","ambient","diffuse","L","_shOrder","_legacy","_sphericalHarmonics","_mainLight","legacy","set","copyFrom","Array","from","lerpLighting"],"sourceRoot":""}