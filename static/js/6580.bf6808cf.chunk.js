"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[6580],{46580:(e,t,i)=>{i.r(t),i.d(t,{Select:()=>k,default:()=>w});var s=i(85580),o=i(72791),l=i(9283),n=i(93655),c=i(97426),r=i(52639),a=i(2170);let d,u,p,m,f=0;function v(){u.cancel(),p&&p.remove(),m.removeAll()}function y(e,t,i){m=new n.Z({listMode:"hide"}),e.map.add(m),u=new c.Z({view:e,layer:m,defaultCreateOptions:{mode:"hybrid"}}),d=e.allLayerViews.find((e=>e.layer.title.includes("Property")&&"feature"===e.layer.type));const s=e.map.allLayers.find((e=>e.title.includes("Property")&&"feature"===e.type));return e.whenLayerView(s).then((e=>{d=e})),u.watch("activeTool",(e=>{i(e)})),u.on("create",(i=>{if("start"===i.state&&(m.graphics.removeAll(),p&&p.remove()),"complete"===i.state&&(t(f>0?h(f,i.graphic):i.graphic.geometry),u.create(i.tool),p&&p.remove(),m.graphics.removeAll()),"active"===i.state)if(0===f)g(e,i.graphic.geometry).then((e=>{p&&p.remove(),p=e}));else{const t=h(f,i.graphic);u.layer.removeAll();const s={type:"simple-fill",color:[255,255,0,.2],style:"solid"};u.layer.add(new r.Z({geometry:t,symbol:s})),g(e,t).then((e=>{p&&p.remove(),p=e}))}})),u}function h(e,t){return a.buffer(t.geometry,e,"feet")}function g(e,t){return new Promise(((i,s)=>{d.queryFeatures({geometry:t,outSpatialReference:e.spatialReference}).then((e=>{const t=d.highlight(e.features);i(t)}))}))}function x(e,t){f=""===e.target.value?0:parseInt(e.target.value),t(f)}function b(e,t){e.create(t)}const C=e=>{const t=(0,o.useRef)(!1),[i,s]=(0,o.useState)(!1),[l,n]=(0,o.useState)(""),[c,r]=(0,o.useState)(0),[a,d]=(0,o.useState)(),[u,p]=(0,o.useState)(void 0);(0,o.useEffect)((()=>(t.current||(t.current=!0,d(y(e.view,e.geometrySet,n))),()=>{a&&a.destroy()})),[]),(0,o.useEffect)((()=>{e.selectedProperty&&p(e.selectedProperty)}),[e.selectedProperty]),(0,o.useEffect)((()=>{a&&e.selectDismissed&&(a.cancel(),n(""))}),[e.selectDismissed]),(0,o.useEffect)((()=>{s(e.isActive)}),[e.isActive]);const m=(0,o.useCallback)((t=>{e.toolDismissed(),v()}),[]);return{isActive:i,selectedTool:l,setSelectedTool:n,sketchVm:a,distance:c,setDistance:r,selectedProperty:u,toolDismissed:m}};var j=i(80184);const k=e=>{const{isActive:t,selectedTool:i,setSelectedTool:o,sketchVm:n,distance:c,setDistance:r,selectedProperty:d,toolDismissed:u}=C(e);return(0,j.jsxs)(s.N$,{id:"select-panel",heading:"Select","data-panel":"select",hidden:!t,closed:!t||void 0,dismissed:!t||void 0,dismissible:!0,onCalcitePanelDismiss:u,children:[(0,j.jsx)(s.G1,{icon:"chevron-up",text:"",slot:"header-actions-end",onClick:l.F$}),(0,j.jsxs)("div",{id:"select-tools",children:[(0,j.jsxs)("div",{className:"select-container",children:[(0,j.jsx)(s.G1,{icon:"pin",text:"Point",active:"point"===i||void 0,onClick:()=>{o("point"),n&&b(n,"point")}}),(0,j.jsx)(s.G1,{icon:"line",text:"Line",active:"line"===i||void 0,onClick:()=>{o("line"),n&&b(n,"polyline")}}),(0,j.jsx)(s.G1,{icon:"polygon",text:"Polygon",active:"polygon"===i||void 0,onClick:()=>{o("polygon"),n&&b(n,"polygon")}}),(0,j.jsx)(s.G1,{icon:"pins",text:"Multi-Point",active:"multipoint"===i||void 0,onClick:()=>{o("multipoint"),n&&b(n,"multipoint")}}),(0,j.jsx)(s.G1,{icon:"trash",text:"Clear"})]}),(0,j.jsxs)("div",{className:"buffer-container",children:[(0,j.jsxs)(s.ZK,{children:["Buffer Distance",(0,j.jsx)(s.e,{type:"number",suffixText:"feet",step:50,min:0,max:5280,value:c.toString(),clearable:!0,onCalciteInputChange:e=>x(e,r)})]}),(0,j.jsx)(s.ln,{disabled:void 0===d||void 0,hidden:c<=0,width:"full",onClick:()=>function(e,t,i){i(a.buffer(e.geometry,t,"feet"))}(d,c,e.geometrySet),children:"Buffer Property"})]})]})]})},w=o.memo(k)}}]);
//# sourceMappingURL=6580.bf6808cf.chunk.js.map