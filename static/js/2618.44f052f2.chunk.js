"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[2618],{8229:(t,e,i)=>{function r(){return new Float32Array(3)}function n(t){const e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function s(t,e,i){const r=new Float32Array(3);return r[0]=t,r[1]=e,r[2]=i,r}function a(){return r()}function o(){return s(1,1,1)}function l(){return s(1,0,0)}function c(){return s(0,1,0)}function h(){return s(0,0,1)}i.d(e,{a:()=>n,c:()=>r,f:()=>s});const u=a(),f=o(),d=l(),p=c(),_=h();Object.freeze(Object.defineProperty({__proto__:null,create:r,clone:n,fromValues:s,createView:function(t,e){return new Float32Array(t,e,3)},zeros:a,ones:o,unitX:l,unitY:c,unitZ:h,ZEROS:u,ONES:f,UNIT_X:d,UNIT_Y:p,UNIT_Z:_},Symbol.toStringTag,{value:"Module"}))},48734:(t,e,i)=>{i.d(e,{B3:()=>n,Op:()=>a,U:()=>s,n1:()=>r});i(93169);function r(t){switch(t){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8;default:return}}function n(t){switch(t){case"u8":case"u16":case"u32":return!1;case"i8":case"i16":case"i32":case"f32":case"f64":return!0;default:return}}function s(t){switch(t){case"u8":case"u16":case"u32":case"i8":case"i16":case"i32":return!0;case"f32":case"f64":return!1;default:return}}function a(t){switch(t){case"u8":return 255;case"u16":return 65535;case"u32":return 4294967295;case"i8":return 127;case"i16":return 32767;case"i32":return 2147483647;case"f32":return 3402823e32;case"f64":return 179769e303;default:return}}},55158:(t,e,i)=>{i.d(e,{U$:()=>o});var r=i(25158),n=i(48734);class s{constructor(t,e){this.layout=t,this.buffer="number"==typeof e?new ArrayBuffer(e*t.stride):e;for(const i of t.fieldNames){const e=t.fields.get(i);this[i]=new e.constructor(this.buffer,e.offset,this.stride)}}get stride(){return this.layout.stride}get count(){return this.buffer.byteLength/this.stride}get byteLength(){return this.buffer.byteLength}getField(t,e){const i=this[t];return i&&i.elementCount===e.ElementCount&&i.elementType===e.ElementType?i:null}slice(t,e){return new s(this.layout,this.buffer.slice(t*this.stride,e*this.stride))}copyFrom(t,e,i,r){const n=this.stride;if(n%4==0){const s=new Uint32Array(t.buffer,e*n,r*n/4);new Uint32Array(this.buffer,i*n,r*n/4).set(s)}else{const s=new Uint8Array(t.buffer,e*n,r*n);new Uint8Array(this.buffer,i*n,r*n).set(s)}}}class a{constructor(){this.stride=0,this.fields=new Map,this.fieldNames=[]}vec2f(t,e){return this._appendField(t,r.Eu,e),this}vec2f64(t,e){return this._appendField(t,r.q6,e),this}vec3f(t,e){return this._appendField(t,r.ct,e),this}vec3f64(t,e){return this._appendField(t,r.fP,e),this}vec4f(t,e){return this._appendField(t,r.ek,e),this}vec4f64(t,e){return this._appendField(t,r.Cd,e),this}mat3f(t,e){return this._appendField(t,r.gK,e),this}mat3f64(t,e){return this._appendField(t,r.ey,e),this}mat4f(t,e){return this._appendField(t,r.bj,e),this}mat4f64(t,e){return this._appendField(t,r.O1,e),this}vec4u8(t,e){return this._appendField(t,r.mc,e),this}f32(t,e){return this._appendField(t,r.ly,e),this}f64(t,e){return this._appendField(t,r.oS,e),this}u8(t,e){return this._appendField(t,r.D_,e),this}u16(t,e){return this._appendField(t,r.av,e),this}i8(t,e){return this._appendField(t,r.Hz,e),this}vec2i8(t,e){return this._appendField(t,r.Vs,e),this}vec2i16(t,e){return this._appendField(t,r.or,e),this}vec2u8(t,e){return this._appendField(t,r.xA,e),this}vec4u16(t,e){return this._appendField(t,r.v6,e),this}u32(t,e){return this._appendField(t,r.Nu,e),this}_appendField(t,e,i){const r=e.ElementCount*(0,n.n1)(e.ElementType),s=this.stride;this.fields.set(t,{size:r,constructor:e,offset:s,optional:i}),this.stride+=r,this.fieldNames.push(t)}alignTo(t){return this.stride=Math.floor((this.stride+t-1)/t)*t,this}hasField(t){return this.fieldNames.includes(t)}createBuffer(t){return new s(this,t)}createView(t){return new s(this,t)}clone(){const t=new a;return t.stride=this.stride,t.fields=new Map,this.fields.forEach(((e,i)=>t.fields.set(i,e))),t.fieldNames=this.fieldNames.slice(),t.BufferType=this.BufferType,t}}function o(){return new a}},71011:(t,e,i)=>{var r;i.d(e,{H:()=>r}),function(t){t[t.Color=0]="Color",t[t.Depth=1]="Depth",t[t.Normal=2]="Normal",t[t.Shadow=3]="Shadow",t[t.Highlight=4]="Highlight",t[t.Draped=5]="Draped",t[t.Occlusion=6]="Occlusion",t[t.Alpha=7]="Alpha",t[t.COUNT=8]="COUNT"}(r||(r={}))},33280:(t,e,i)=>{i.d(e,{f5:()=>h});var r=i(92026),n=i(14226),s=i(81949),a=i(11186),o=i(71353),l=i(86471),c=(i(49450),i(98634));function h(t,e){u(t,e,[new l.B("slicePlaneOrigin",((t,i)=>_(e,t,i))),new l.B("slicePlaneBasis1",((t,i)=>g(e,t,i,(0,r.Wg)(i.slicePlane)?.basis1))),new l.B("slicePlaneBasis2",((t,i)=>g(e,t,i,(0,r.Wg)(i.slicePlane)?.basis2)))])}function u(t,e,i){if(!e.hasSlicePlane){const i=c.H`#define rejectBySlice(_pos_) false
#define discardBySlice(_pos_) {}
#define highlightSlice(_color_, _pos_) (_color_)`;return e.hasSliceInVertexProgram&&t.vertex.code.add(i),void t.fragment.code.add(i)}t.extensions.add("GL_OES_standard_derivatives"),e.hasSliceInVertexProgram&&t.vertex.uniforms.add(i),t.fragment.uniforms.add(i);const r=c.H`struct SliceFactors {
float front;
float side0;
float side1;
float side2;
float side3;
};
SliceFactors calculateSliceFactors(vec3 pos) {
vec3 rel = pos - slicePlaneOrigin;
vec3 slicePlaneNormal = -cross(slicePlaneBasis1, slicePlaneBasis2);
float slicePlaneW = -dot(slicePlaneNormal, slicePlaneOrigin);
float basis1Len2 = dot(slicePlaneBasis1, slicePlaneBasis1);
float basis2Len2 = dot(slicePlaneBasis2, slicePlaneBasis2);
float basis1Dot = dot(slicePlaneBasis1, rel);
float basis2Dot = dot(slicePlaneBasis2, rel);
return SliceFactors(
dot(slicePlaneNormal, pos) + slicePlaneW,
-basis1Dot - basis1Len2,
basis1Dot - basis1Len2,
-basis2Dot - basis2Len2,
basis2Dot - basis2Len2
);
}
bool sliceByFactors(SliceFactors factors) {
return factors.front < 0.0
&& factors.side0 < 0.0
&& factors.side1 < 0.0
&& factors.side2 < 0.0
&& factors.side3 < 0.0;
}
bool sliceEnabled() {
return dot(slicePlaneBasis1, slicePlaneBasis1) != 0.0;
}
bool sliceByPlane(vec3 pos) {
return sliceEnabled() && sliceByFactors(calculateSliceFactors(pos));
}
#define rejectBySlice(_pos_) sliceByPlane(_pos_)
#define discardBySlice(_pos_) { if (sliceByPlane(_pos_)) discard; }`,n=c.H`vec4 applySliceHighlight(vec4 color, vec3 pos) {
SliceFactors factors = calculateSliceFactors(pos);
const float HIGHLIGHT_WIDTH = 1.0;
const vec4 HIGHLIGHT_COLOR = vec4(0.0, 0.0, 0.0, 0.3);
factors.front /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.front);
factors.side0 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side0);
factors.side1 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side1);
factors.side2 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side2);
factors.side3 /= (2.0 * HIGHLIGHT_WIDTH) * fwidth(factors.side3);
if (sliceByFactors(factors)) {
return color;
}
float highlightFactor = (1.0 - step(0.5, factors.front))
* (1.0 - step(0.5, factors.side0))
* (1.0 - step(0.5, factors.side1))
* (1.0 - step(0.5, factors.side2))
* (1.0 - step(0.5, factors.side3));
return mix(color, vec4(HIGHLIGHT_COLOR.rgb, color.a), highlightFactor * HIGHLIGHT_COLOR.a);
}`,s=e.hasSliceHighlight?c.H`
        ${n}
        #define highlightSlice(_color_, _pos_) (sliceEnabled() ? applySliceHighlight(_color_, _pos_) : (_color_))
      `:c.H`#define highlightSlice(_color_, _pos_) (_color_)`;e.hasSliceInVertexProgram&&t.vertex.code.add(r),t.fragment.code.add(r),t.fragment.code.add(s)}function f(t,e,i){return t.instancedDoublePrecision?(0,a.s)(m,i.camera.viewInverseTransposeMatrix[3],i.camera.viewInverseTransposeMatrix[7],i.camera.viewInverseTransposeMatrix[11]):e.slicePlaneLocalOrigin}function d(t,e){return(0,r.pC)(t)?(0,a.b)(T,e.origin,t):e.origin}function p(t,e,i){return t.hasSliceTranslatedView?(0,r.pC)(e)?(0,n.j)(b,i.camera.viewMatrix,e):i.camera.viewMatrix:null}function _(t,e,i){if((0,r.Wi)(i.slicePlane))return o.Z;const n=f(t,e,i),s=d(n,i.slicePlane),l=p(t,n,i);return(0,r.pC)(l)?(0,a.m)(T,s,l):s}function g(t,e,i,n){if((0,r.Wi)(n)||(0,r.Wi)(i.slicePlane))return o.Z;const s=f(t,e,i),l=d(s,i.slicePlane),c=p(t,s,i);return(0,r.pC)(c)?((0,a.a)(v,n,l),(0,a.m)(T,l,c),(0,a.m)(v,v,c),(0,a.b)(v,v,T)):n}const m=(0,o.c)(),T=(0,o.c)(),v=(0,o.c)(),b=(0,s.c)()},94951:(t,e,i)=>{i.d(e,{w:()=>n});var r=i(98634);function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{hasModelTransformation:!1,linearDepth:!1};if(e.hasModelTransformation)return e.linearDepth?void t.vertex.code.add(r.H`vec4 transformPositionWithDepth(mat4 proj, mat4 view, mat4 model, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * (model * vec4(pos, 1.0));
depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
return proj * eye;
}`):void t.vertex.code.add(r.H`vec4 transformPosition(mat4 proj, mat4 view, mat4 model, vec3 pos) {
return proj * (view * (model * vec4(pos, 1.0)));
}`);e.linearDepth?t.vertex.code.add(r.H`vec4 transformPositionWithDepth(mat4 proj, mat4 view, vec3 pos, vec2 nearFar, out float depth) {
vec4 eye = view * vec4(pos, 1.0);
depth = (-eye.z - nearFar[0]) / (nearFar[1] - nearFar[0]) ;
return proj * eye;
}`):t.vertex.code.add(r.H`vec4 transformPosition(mat4 proj, mat4 view, vec3 pos) {
return proj * (view * vec4(pos, 1.0));
}`)}},48655:(t,e,i)=>{i.d(e,{c:()=>s});var r=i(98634),n=i(4760);function s(t,e){e.hasVertexColors?(t.attributes.add(n.T.COLOR,"vec4"),t.varyings.add("vColor","vec4"),t.vertex.code.add(r.H`void forwardVertexColor() { vColor = color; }`),t.vertex.code.add(r.H`void forwardNormalizedVertexColor() { vColor = color * 0.003921568627451; }`)):t.vertex.code.add(r.H`void forwardVertexColor() {}
void forwardNormalizedVertexColor() {}`)}},16574:(t,e,i)=>{i.d(e,{F:()=>a});var r=i(71011),n=i(78980),s=i(98634);function a(t,e){t.fragment.include(n.n),e.output===r.H.Shadow?(t.extensions.add("GL_OES_standard_derivatives"),t.fragment.code.add(s.H`float _calculateFragDepth(const in float depth) {
const float SLOPE_SCALE = 2.0;
const float BIAS = 2.0 * .000015259;
float m = max(abs(dFdx(depth)), abs(dFdy(depth)));
float result = depth + SLOPE_SCALE * m + BIAS;
return clamp(result, .0, .999999);
}
void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_calculateFragDepth(_linearDepth));
}`)):e.output===r.H.Depth&&t.fragment.code.add(s.H`void outputDepth(float _linearDepth) {
gl_FragColor = float2rgba(_linearDepth);
}`)}},137:(t,e,i)=>{i.d(e,{bA:()=>c});i(6394);var r=i(67077),n=i(82999),s=i(98634),a=i(19253);const o=(0,r.f)(1,1,0,1),l=(0,r.f)(1,0,1,1);function c(t){t.fragment.uniforms.add(new a.A("depthTex",((t,e)=>e.highlightDepthTexture))),t.fragment.uniforms.add(new n.A("highlightViewportPixelSz",((t,e)=>e.inverseViewport))),t.fragment.constants.add("occludedHighlightFlag","vec4",o).add("unoccludedHighlightFlag","vec4",l),t.fragment.code.add(s.H`void outputHighlight() {
vec4 fragCoord = gl_FragCoord;
float sceneDepth = texture2D(depthTex, fragCoord.xy * highlightViewportPixelSz.xy).r;
if (fragCoord.z > sceneDepth + 5e-7) {
gl_FragColor = occludedHighlightFlag;
}
else {
gl_FragColor = unoccludedHighlightFlag;
}
}`)}},21002:(t,e,i)=>{i.d(e,{S:()=>s});var r=i(78980),n=i(98634);function s(t){t.include(r.n),t.code.add(n.H`float linearDepthFromFloat(float depth, vec2 nearFar) {
return -(depth * (nearFar[1] - nearFar[0]) + nearFar[0]);
}
float linearDepthFromTexture(sampler2D depthTex, vec2 uv, vec2 nearFar) {
return linearDepthFromFloat(rgba2float(texture2D(depthTex, uv)), nearFar);
}`)}},15226:(t,e,i)=>{i.d(e,{a:()=>l,l:()=>o});var r=i(21002),n=i(82999),s=i(98634),a=i(19253);function o(t,e){e.hasMultipassTerrain&&(t.fragment.include(r.S),t.fragment.uniforms.add(new a.A("terrainDepthTexture",((t,e)=>e.multipassTerrain.linearDepthTexture))),t.fragment.uniforms.add(new n.A("nearFar",((t,e)=>e.camera.nearFar))),t.fragment.uniforms.add(new n.A("inverseViewport",((t,e)=>e.inverseViewport))),t.fragment.code.add(s.H`
    void terrainDepthTest(vec4 fragCoord, float fragmentDepth){
      float terrainDepth = linearDepthFromTexture(terrainDepthTexture, fragCoord.xy * inverseViewport, nearFar);
      if(fragmentDepth ${e.cullAboveGround?">":"<="} terrainDepth){
        discard;
      }
    }
  `))}class l{constructor(){this.enabled=!1,this.cullAboveGround=!1}}},26461:(t,e,i)=>{i.d(e,{F:()=>r,b:()=>n});const r=.1,n=.001},116:(t,e,i)=>{i.d(e,{Y:()=>n});var r=i(98634);function n(t){t.code.add(r.H`vec4 premultiplyAlpha(vec4 v) {
return vec4(v.rgb * v.a, v.a);
}
vec3 rgb2hsv(vec3 c) {
vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);
vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy);
vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx);
float d = q.x - min(q.w, q.y);
float e = 1.0e-10;
return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), min(d / (q.x + e), 1.0), q.x);
}
vec3 hsv2rgb(vec3 c) {
vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}
float rgb2v(vec3 c) {
return max(c.x, max(c.y, c.z));
}`)}},78980:(t,e,i)=>{i.d(e,{n:()=>n});var r=i(98634);function n(t){t.code.add(r.H`const float MAX_RGBA_FLOAT =
255.0 / 256.0 +
255.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 +
255.0 / 256.0 / 256.0 / 256.0 / 256.0;
const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);
vec4 float2rgba(const float value) {
float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);
vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);
const float toU8AsFloat = 1.0 / 255.0;
return fixedPointU8 * toU8AsFloat;
}
const vec4 RGBA_2_FLOAT_FACTORS = vec4(
255.0 / (256.0),
255.0 / (256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0),
255.0 / (256.0 * 256.0 * 256.0 * 256.0)
);
float rgba2float(vec4 rgba) {
return dot(rgba, RGBA_2_FLOAT_FACTORS);
}`)}},82552:(t,e,i)=>{i.d(e,{h:()=>d,S:()=>p});var r=i(14226),n=i(92733),s=i(11186),a=i(71353),o=i(86471),l=i(49450),c=i(61809),h=i(99340);class u extends c.x{constructor(t,e){super(t,"mat4",h.P.Draw,((i,r,n)=>i.setUniformMatrix4fv(t,e(r,n))))}}var f=i(8654);function d(t,e){e.instancedDoublePrecision?t.constants.add("cameraPosition","vec3",a.Z):t.uniforms.add(new o.B("cameraPosition",((t,e)=>(0,s.s)(g,e.camera.viewInverseTransposeMatrix[3]-t.origin[0],e.camera.viewInverseTransposeMatrix[7]-t.origin[1],e.camera.viewInverseTransposeMatrix[11]-t.origin[2]))))}function p(t,e){if(t.vertex.uniforms.add(new f.g("proj",((t,e)=>e.camera.projectionMatrix))),e.instancedDoublePrecision){const e=(t,e)=>(0,s.s)(g,e.camera.viewInverseTransposeMatrix[3],e.camera.viewInverseTransposeMatrix[7],e.camera.viewInverseTransposeMatrix[11]);t.vertex.uniforms.add(new f.g("view",((t,i)=>(0,r.j)(_,i.camera.viewMatrix,e(t,i)))));const i=new l.J("localOrigin",e);return t.vertex.uniforms.add(i),i}t.vertex.uniforms.add(new u("view",((t,e)=>(0,r.j)(_,e.camera.viewMatrix,t.origin))));const i=new o.B("localOrigin",(t=>t.origin));return t.vertex.uniforms.add(i),i}const _=(0,n.c)(),g=(0,a.c)()},82999:(t,e,i)=>{i.d(e,{A:()=>s});var r=i(61809),n=i(99340);class s extends r.x{constructor(t,e){super(t,"vec2",n.P.Pass,((i,r,n)=>i.setUniform2fv(t,e(r,n))))}}},86471:(t,e,i)=>{i.d(e,{B:()=>s});var r=i(61809),n=i(99340);class s extends r.x{constructor(t,e){super(t,"vec3",n.P.Draw,((i,r,n)=>i.setUniform3fv(t,e(r,n))))}}},49450:(t,e,i)=>{i.d(e,{J:()=>s});var r=i(61809),n=i(99340);class s extends r.x{constructor(t,e){super(t,"vec3",n.P.Pass,((i,r,n)=>i.setUniform3fv(t,e(r,n))))}}},95276:(t,e,i)=>{i.d(e,{N:()=>s});var r=i(61809),n=i(99340);class s extends r.x{constructor(t,e){super(t,"vec4",n.P.Pass,((i,r,n)=>i.setUniform4fv(t,e(r,n))))}}},58406:(t,e,i)=>{i.d(e,{p:()=>s});var r=i(61809),n=i(99340);class s extends r.x{constructor(t,e){super(t,"float",n.P.Pass,((i,r,n)=>i.setUniform1f(t,e(r,n))))}}},8654:(t,e,i)=>{i.d(e,{g:()=>s});var r=i(61809),n=i(99340);class s extends r.x{constructor(t,e){super(t,"mat4",n.P.Pass,((i,r,n)=>i.setUniformMatrix4fv(t,e(r,n))))}}},64201:(t,e,i)=>{i.d(e,{kG:()=>l});var r=i(10064),n=i(32718),s=i(92026);const a=n.Z.getLogger("esri.views.3d.webgl-engine.core.shaderModules.shaderBuilder");class o{constructor(){this.includedModules=new Map}include(t,e){if(this.includedModules.has(t)){const i=this.includedModules.get(t);if(i!==e){a.error("Trying to include shader module multiple times with different sets of options.");const e=new Set;for(const r of Object.keys(i))i[r]!==t[r]&&e.add(r);for(const r of Object.keys(t))i[r]!==t[r]&&e.add(r);e.forEach((e=>console.error(`  ${e}: current ${i[e]} new ${t[e]}`)))}}else this.includedModules.set(t,e),t(this.builder,e)}}class l extends o{constructor(){super(...arguments),this.vertex=new u,this.fragment=new u,this.attributes=new f,this.varyings=new d,this.extensions=new p,this.constants=new _}get fragmentUniforms(){return this.fragment.uniforms.entries}get builder(){return this}generate(t){const e=this.extensions.generateSource(t),i=this.attributes.generateSource(t),r=this.varyings.generateSource(),n="vertex"===t?this.vertex:this.fragment,s=n.uniforms.generateSource(),a=n.code.generateSource(),o="vertex"===t?m:g,l=this.constants.generateSource().concat(n.constants.generateSource());return`\n${e.join("\n")}\n\n${o}\n\n${l.join("\n")}\n\n${s.join("\n")}\n\n${i.join("\n")}\n\n${r.join("\n")}\n\n${a.join("\n")}`}generateBind(t,e){const i=new Map;this.vertex.uniforms.entries.forEach((e=>{const r=e.bind[t];(0,s.pC)(r)&&i.set(e.name,r)})),this.fragment.uniforms.entries.forEach((e=>{const r=e.bind[t];(0,s.pC)(r)&&i.set(e.name,r)}));const r=Array.from(i.values()),n=r.length;return(t,i)=>{for(let s=0;s<n;++s)r[s](e,t,i)}}}class c{constructor(){this._entries=new Map}add(t){if(!Array.isArray(t))return this._add(t);for(const e of t)this._add(e)}_add(t){if(this._entries.has(t.name)&&!this._entries.get(t.name).equals(t))throw new r.Z(`Duplicate uniform name ${t.name} for different uniform type`);this._entries.set(t.name,t)}generateSource(){return Array.from(this._entries.values()).map((t=>(0,s.pC)(t.arraySize)?`uniform ${t.type} ${t.name}[${t.arraySize}];`:`uniform ${t.type} ${t.name};`))}get entries(){return Array.from(this._entries.values())}}class h{constructor(){this._entries=new Array}add(t){this._entries.push(t)}generateSource(){return this._entries}}class u extends o{constructor(){super(...arguments),this.uniforms=new c,this.code=new h,this.constants=new _}get builder(){return this}}class f{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(t){return"fragment"===t?[]:this._entries.map((t=>`attribute ${t[1]} ${t[0]};`))}}class d{constructor(){this._entries=new Array}add(t,e){this._entries.push([t,e])}generateSource(){return this._entries.map((t=>`varying ${t[1]} ${t[0]};`))}}class p{constructor(){this._entries=new Set}add(t){this._entries.add(t)}generateSource(t){const e="vertex"===t?p.ALLOWLIST_VERTEX:p.ALLOWLIST_FRAGMENT;return Array.from(this._entries).filter((t=>e.includes(t))).map((t=>`#extension ${t} : enable`))}}p.ALLOWLIST_FRAGMENT=["GL_EXT_shader_texture_lod","GL_OES_standard_derivatives"],p.ALLOWLIST_VERTEX=[];class _{constructor(){this._entries=new Set}add(t,e,i){let r="ERROR_CONSTRUCTOR_STRING";switch(e){case"float":r=_._numberToFloatStr(i);break;case"int":r=_._numberToIntStr(i);break;case"bool":r=i.toString();break;case"vec2":r=`vec2(${_._numberToFloatStr(i[0])},                            ${_._numberToFloatStr(i[1])})`;break;case"vec3":r=`vec3(${_._numberToFloatStr(i[0])},                            ${_._numberToFloatStr(i[1])},                            ${_._numberToFloatStr(i[2])})`;break;case"vec4":r=`vec4(${_._numberToFloatStr(i[0])},                            ${_._numberToFloatStr(i[1])},                            ${_._numberToFloatStr(i[2])},                            ${_._numberToFloatStr(i[3])})`;break;case"ivec2":r=`ivec2(${_._numberToIntStr(i[0])},                             ${_._numberToIntStr(i[1])})`;break;case"ivec3":r=`ivec3(${_._numberToIntStr(i[0])},                             ${_._numberToIntStr(i[1])},                             ${_._numberToIntStr(i[2])})`;break;case"ivec4":r=`ivec4(${_._numberToIntStr(i[0])},                             ${_._numberToIntStr(i[1])},                             ${_._numberToIntStr(i[2])},                             ${_._numberToIntStr(i[3])})`;break;case"mat2":case"mat3":case"mat4":r=`${e}(${Array.prototype.map.call(i,(t=>_._numberToFloatStr(t))).join(", ")})`}return this._entries.add(`const ${e} ${t} = ${r};`),this}static _numberToIntStr(t){return t.toFixed(0)}static _numberToFloatStr(t){return Number.isInteger(t)?t.toFixed(1):t.toString()}generateSource(){return Array.from(this._entries)}}const g="#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n  precision highp sampler2D;\n#else\n  precision mediump float;\n  precision mediump sampler2D;\n#endif",m="precision highp float;\nprecision highp sampler2D;"},19253:(t,e,i)=>{i.d(e,{A:()=>c,J:()=>h});var r=i(92026),n=i(88396),s=i(6394),a=i(82999),o=i(61809),l=i(99340);class c extends o.x{constructor(t,e){super(t,"sampler2D",l.P.Pass,((i,r,n)=>i.bindTexture(t,e(r,n))))}}function h(t,e,i){const o=[new c(t,e)];if(i){const i=t+"Size";o.push(new a.A(i,((t,i)=>{const a=e(t,i);return(0,r.pC)(a)?(0,n.a)(u,a.descriptor.width,a.descriptor.height):s.Z})))}return o}const u=(0,s.a)()},61809:(t,e,i)=>{i.d(e,{x:()=>s});var r=i(92026),n=i(99340);class s{constructor(t,e,i,s){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.name=t,this.type=e,this.arraySize=a,this.bind={[n.P.Pass]:null,[n.P.Draw]:null},(0,r.pC)(i)&&(0,r.pC)(s)&&(this.bind[i]=s)}equals(t){return this.type===t.type&&this.name===t.name&&this.arraySize===t.arraySize}}},98634:(t,e,i)=>{i.d(e,{H:()=>n,K:()=>r});class r{}function n(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];let n="";for(let s=0;s<i.length;s++)n+=t[s]+i[s];return n+=t[t.length-1],n}!function(t){t.int=function(t){return Math.round(t).toString()},t.float=function(t){return t.toPrecision(8)}}(n||(n={}))},99340:(t,e,i)=>{var r;i.d(e,{P:()=>r}),function(t){t[t.Pass=0]="Pass",t[t.Draw=1]="Draw"}(r||(r={}))},82144:(t,e,i)=>{i.d(e,{J:()=>r});class r{constructor(t,e){this._module=t,this._loadModule=e}get(){return this._module}async reload(){return this._module=await this._loadModule(),this._module}}},31132:(t,e,i)=>{i.d(e,{A:()=>s});var r=i(92026),n=i(8548);class s{constructor(t,e,i){this.release=i,e&&(this.initializeConfiguration(t,e),this._configuration=e.snapshot()),this._program=this.initializeProgram(t),this._pipeline=this.initializePipeline(t.rctx.capabilities)}destroy(){this._program=(0,r.O3)(this._program),this._pipeline=this._configuration=null}reload(t){(0,r.O3)(this._program),this._program=this.initializeProgram(t),this._pipeline=this.initializePipeline(t.rctx.capabilities)}get program(){return this._program}get compiled(){return this.program.isCompiled}get key(){return this._configuration.key}get configuration(){return this._configuration}bindPass(t,e){this.program.bindPass(t,e)}bindDraw(t,e){this.program.bindDraw(t,e),this.program.rebindTextures()}bindPipelineState(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2?arguments[2]:void 0;t.setPipelineState(this.getPipelineState(e,i))}ensureAttributeLocations(t){this.program.assertCompatibleVertexAttributeLocations(t)}get primitiveType(){return n.MX.TRIANGLES}getPipelineState(t,e){return this._pipeline}initializeConfiguration(t,e){}}},33559:(t,e,i)=>{i.d(e,{m:()=>r,o:()=>n});class r{constructor(){this._key="",this._keyDirty=!1,this._parameterBits=this._parameterBits?this._parameterBits.map((()=>0)):[],this._parameterNames||(this._parameterNames=[])}get key(){return this._keyDirty&&(this._keyDirty=!1,this._key=String.fromCharCode.apply(String,this._parameterBits)),this._key}snapshot(){const t=this._parameterNames,e={key:this.key};for(const i of t)e[i]=this[i];return e}}function n(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e,i)=>{if(e._parameterNames=e._parameterNames??[],e._parameterNames.push(i),null!=t.constValue)Object.defineProperty(e,i,{get:()=>t.constValue});else{const r=e._parameterNames.length-1,n=t.count||2,s=Math.ceil(Math.log2(n)),a=e._parameterBits??[0];let o=0;for(;a[o]+s>16;)o++,o>=a.length&&a.push(0);e._parameterBits=a;const l=a[o],c=(1<<s)-1<<l;a[o]+=s,Object.defineProperty(e,i,{get(){return this[r]},set(t){if(this[r]!==t&&(this[r]=t,this._keyDirty=!0,this._parameterBits[o]=this._parameterBits[o]&~c|+t<<l&c,"number"!=typeof t&&"boolean"!=typeof t))throw"Configuration value for "+i+" must be boolean or number, got "+typeof t}})}}}},1395:(t,e,i)=>{i.d(e,{c:()=>n});var r=i(95439);class n{constructor(){this.id=(0,r.D)()}unload(){}}},79100:(t,e,i)=>{var r;i.d(e,{U:()=>r}),function(t){t[t.Layer=0]="Layer",t[t.Object=1]="Object",t[t.Geometry=2]="Geometry",t[t.Material=3]="Material",t[t.Texture=4]="Texture",t[t.COUNT=5]="COUNT"}(r||(r={}))},7566:(t,e,i)=>{i.d(e,{i:()=>n});var r=i(4760);const n=new Map([[r.T.POSITION,0],[r.T.NORMAL,1],[r.T.UV0,2],[r.T.COLOR,3],[r.T.SIZE,4],[r.T.TANGENT,4],[r.T.AUXPOS1,5],[r.T.SYMBOLCOLOR,5],[r.T.AUXPOS2,6],[r.T.FEATUREATTRIBUTE,6],[r.T.INSTANCEFEATUREATTRIBUTE,6],[r.T.INSTANCECOLOR,7],[r.T.MODEL,8],[r.T.MODELNORMAL,12],[r.T.MODELORIGINHI,11],[r.T.MODELORIGINLO,15]])},23620:(t,e,i)=>{i.d(e,{Z:()=>n});var r=i(68401);class n{constructor(t){this._material=t.material,this._techniqueRepository=t.techniqueRep,this._output=t.output}dispose(){this._techniqueRepository.release(this._technique)}get technique(){return this._technique}ensureTechnique(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._output;return this._technique=this._techniqueRepository.releaseAndAcquire(t,this._material.getConfiguration(i,e),this._technique),this._technique}ensureResources(t){return r.Rw.LOADED}}},74894:(t,e,i)=>{i.d(e,{Z:()=>_});var r=i(92026),n=i(68401),s=i(27546),a=i(11186),o=i(71353),l=i(97731);class c{constructor(t,e,i,r){this.primitiveIndices=t,this._numIndexPerPrimitive=e,this.indices=i,this.position=r,this.center=(0,o.c)(),(0,l.hu)(t.length>=1),(0,l.hu)(i.length%this._numIndexPerPrimitive==0),(0,l.hu)(i.length>=t.length*this._numIndexPerPrimitive),(0,l.hu)(3===r.size||4===r.size);const{data:n,size:s}=r,c=t.length;let u=s*i[this._numIndexPerPrimitive*t[0]];h.clear(),h.push(u),this.bbMin=(0,o.f)(n[u],n[u+1],n[u+2]),this.bbMax=(0,o.a)(this.bbMin);for(let a=0;a<c;++a){const e=this._numIndexPerPrimitive*t[a];for(let t=0;t<this._numIndexPerPrimitive;++t){u=s*i[e+t],h.push(u);let r=n[u];this.bbMin[0]=Math.min(r,this.bbMin[0]),this.bbMax[0]=Math.max(r,this.bbMax[0]),r=n[u+1],this.bbMin[1]=Math.min(r,this.bbMin[1]),this.bbMax[1]=Math.max(r,this.bbMax[1]),r=n[u+2],this.bbMin[2]=Math.min(r,this.bbMin[2]),this.bbMax[2]=Math.max(r,this.bbMax[2])}}(0,a.h)(this.center,this.bbMin,this.bbMax,.5),this.radius=.5*Math.max(Math.max(this.bbMax[0]-this.bbMin[0],this.bbMax[1]-this.bbMin[1]),this.bbMax[2]-this.bbMin[2]);let f=this.radius*this.radius;for(let a=0;a<h.length;++a){u=h.getItemAt(a);const t=n[u]-this.center[0],e=n[u+1]-this.center[1],i=n[u+2]-this.center[2],r=t*t+e*e+i*i;if(r<=f)continue;const s=Math.sqrt(r),o=.5*(s-this.radius);this.radius=this.radius+o,f=this.radius*this.radius;const l=o/s;this.center[0]+=t*l,this.center[1]+=e*l,this.center[2]+=i*l}h.clear()}getCenter(){return this.center}getBSRadius(){return this.radius}getBBMin(){return this.bbMin}getBBMax(){return this.bbMax}getChildren(){if(this._children)return this._children;if((0,a.d)(this.bbMin,this.bbMax)>1){const t=(0,a.h)((0,o.c)(),this.bbMin,this.bbMax,.5),e=this.primitiveIndices.length,i=new Uint8Array(e),r=new Array(8);for(let a=0;a<8;++a)r[a]=0;const{data:n,size:s}=this.position;for(let a=0;a<e;++a){let e=0;const o=this._numIndexPerPrimitive*this.primitiveIndices[a];let l=s*this.indices[o],c=n[l],h=n[l+1],u=n[l+2];for(let t=1;t<this._numIndexPerPrimitive;++t){l=s*this.indices[o+t];const e=n[l],i=n[l+1],r=n[l+2];e<c&&(c=e),i<h&&(h=i),r<u&&(u=r)}c<t[0]&&(e|=1),h<t[1]&&(e|=2),u<t[2]&&(e|=4),i[a]=e,++r[e]}let l=0;for(let a=0;a<8;++a)r[a]>0&&++l;if(l<2)return;const h=new Array(8);for(let a=0;a<8;++a)h[a]=r[a]>0?new Uint32Array(r[a]):void 0;for(let a=0;a<8;++a)r[a]=0;for(let a=0;a<e;++a){const t=i[a];h[t][r[t]++]=this.primitiveIndices[a]}this._children=new Array(8);for(let a=0;a<8;++a)void 0!==h[a]&&(this._children[a]=new c(h[a],this._numIndexPerPrimitive,this.indices,this.position))}return this._children}static prune(){h.prune()}}const h=new s.Z({deallocator:null});var u=i(1395),f=i(79100),d=i(81955),p=i(4760);class _ extends u.c{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.MX.Triangle,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;super(),this._primitiveType=i,this.edgeIndicesLength=r,this.type=f.U.Geometry,this._vertexAttributes=new Map,this._indices=new Map,this._boundingInfo=null;for(const[n,s]of t)s&&this._vertexAttributes.set(n,{...s});if(null==e||0===e.length){const t=function(t){const e=t.values().next().value;return null==e?0:e.data.length/e.size}(this._vertexAttributes),e=(0,d.p)(t);this.edgeIndicesLength=this.edgeIndicesLength<0?t:this.edgeIndicesLength;for(const i of this._vertexAttributes.keys())this._indices.set(i,e)}else for(const[n,s]of e)s&&(this._indices.set(n,g(s)),n===p.T.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._indices.get(n).length:this.edgeIndicesLength))}cloneShallow(){const t=new _([],void 0,this._primitiveType,void 0),{_vertexAttributes:e,_indices:i}=t;return this._vertexAttributes.forEach(((t,i)=>{e.set(i,t)})),this._indices.forEach(((t,e)=>{i.set(e,t)})),t.screenToWorldRatio=this.screenToWorldRatio,t._boundingInfo=this._boundingInfo,t}get vertexAttributes(){return this._vertexAttributes}getMutableAttribute(t){const e=this._vertexAttributes.get(t);return e&&!e.exclusive&&(e.data=Array.from(e.data),e.exclusive=!0),e}get indices(){return this._indices}get indexCount(){const t=this._indices.values().next().value;return t?t.length:0}get primitiveType(){return this._primitiveType}get faceCount(){return this.indexCount/3}get boundingInfo(){return(0,r.Wi)(this._boundingInfo)&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(t){return this.primitiveType===n.MX.Triangle?this._computeAttachmentOriginTriangles(t):this._computeAttachmentOriginPoints(t)}_computeAttachmentOriginTriangles(t){const e=this.indices.get(p.T.POSITION),i=this.vertexAttributes.get(p.T.POSITION);return(0,d.cM)(i,e,t)}_computeAttachmentOriginPoints(t){const e=this.indices.get(p.T.POSITION),i=this.vertexAttributes.get(p.T.POSITION);return(0,d.NO)(i,e,t)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const t=this.indices.get(p.T.POSITION);if(0===t.length)return null;const e=this.primitiveType===n.MX.Triangle?3:1;(0,l.hu)(t.length%e==0,"Indexing error: "+t.length+" not divisible by "+e);const i=(0,d.p)(t.length/e),r=this.vertexAttributes.get(p.T.POSITION);return new c(i,e,t,r)}}function g(t){if(t.BYTES_PER_ELEMENT===Uint16Array.BYTES_PER_ELEMENT)return t;for(const e of t)if(e>=65536)return t;return new Uint16Array(t)}},56529:(t,e,i)=>{i.d(e,{F5:()=>h,Mt:()=>u,yD:()=>r});var r,n=i(92026),s=i(98634),a=i(1395),o=i(79100),l=i(7566),c=i(22909);class h extends a.c{constructor(t,e){super(),this.type=o.U.Material,this.supportsEdges=!1,this._visible=!0,this._renderPriority=0,this._insertOrder=0,this._vertexAttributeLocations=l.i,this._parameters=(0,c.Uf)(t,e),this.validateParameters(this._parameters)}dispose(){}get parameters(){return this._parameters}update(t){return!1}setParameters(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,c.LO)(this._parameters,t)&&(this.validateParameters(this._parameters),e&&this.parametersChanged())}validateParameters(t){}get visible(){return this._visible}set visible(t){t!==this._visible&&(this._visible=t,this.parametersChanged())}shouldRender(t){return this.isVisible()&&this.isVisibleInPass(t.pass)&&0!=(this.renderOccluded&t.renderOccludedMask)}isVisibleInPass(t){return!0}get renderOccluded(){return this.parameters.renderOccluded}get renderPriority(){return this._renderPriority}set renderPriority(t){t!==this._renderPriority&&(this._renderPriority=t,this.parametersChanged())}get insertOrder(){return this._insertOrder}set insertOrder(t){t!==this._insertOrder&&(this._insertOrder=t,this.parametersChanged())}get vertexAttributeLocations(){return this._vertexAttributeLocations}isVisible(){return this._visible}parametersChanged(){(0,n.pC)(this.repository)&&this.repository.materialChanged(this)}}!function(t){t[t.Occlude=1]="Occlude",t[t.Transparent=2]="Transparent",t[t.OccludeAndTransparent=4]="OccludeAndTransparent",t[t.OccludeAndTransparentStencil=8]="OccludeAndTransparentStencil",t[t.Opaque=16]="Opaque"}(r||(r={}));class u extends s.K{constructor(){super(...arguments),this.renderOccluded=r.Occlude}}},78041:(t,e,i)=>{i.d(e,{Bh:()=>p,E0:()=>f,IB:()=>l,K5:()=>h,j7:()=>c,je:()=>d,ve:()=>u,wu:()=>a});var r=i(68401),n=i(8548),s=i(36207);const a=(0,s.wK)(n.zi.SRC_ALPHA,n.zi.ONE,n.zi.ONE_MINUS_SRC_ALPHA,n.zi.ONE_MINUS_SRC_ALPHA),o=(0,s.if)(n.zi.ONE,n.zi.ONE),l=(0,s.if)(n.zi.ZERO,n.zi.ONE_MINUS_SRC_ALPHA);function c(t){return t===r.Am.FrontFace?null:t===r.Am.Alpha?l:o}function h(t){return t===r.Am.FrontFace?s.LZ:null}const u=5e5,f={factor:-1,units:-2};function d(t){return t?f:null}function p(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.wb.LESS;return t===r.Am.NONE||t===r.Am.FrontFace?e:n.wb.LEQUAL}},27627:(t,e,i)=>{i.d(e,{$:()=>o});var r=i(92026),n=i(27546),s=i(99340),a=i(37825);class o{constructor(t,e,i){this._context=t,this._locations=i,this._textures=new Map,this._freeTextureUnits=new n.Z({deallocator:null}),this._glProgram=t.programCache.acquire(e.generate("vertex"),e.generate("fragment"),i),this._glProgram.stop=()=>{throw new Error("Wrapped _glProgram used directly")},this.bindPass=e.generateBind(s.P.Pass,this),this.bindDraw=e.generateBind(s.P.Draw,this),this._fragmentUniforms=(0,a.hZ)()?e.fragmentUniforms:null}dispose(){this._glProgram.dispose()}get glName(){return this._glProgram.glName}get isCompiled(){return this._glProgram.isCompiled}setUniform1b(t,e){this._glProgram.setUniform1i(t,e?1:0)}setUniform1i(t,e){this._glProgram.setUniform1i(t,e)}setUniform1f(t,e){this._glProgram.setUniform1f(t,e)}setUniform2f(t,e,i){this._glProgram.setUniform2f(t,e,i)}setUniform2fv(t,e){this._glProgram.setUniform2fv(t,e)}setUniform3f(t,e,i,r){this._glProgram.setUniform3f(t,e,i,r)}setUniform3fv(t,e){this._glProgram.setUniform3fv(t,e)}setUniform4f(t,e,i,r,n){this._glProgram.setUniform4f(t,e,i,r,n)}setUniform4fv(t,e){this._glProgram.setUniform4fv(t,e)}setUniformMatrix3fv(t,e){this._glProgram.setUniformMatrix3fv(t,e)}setUniformMatrix4fv(t,e){this._glProgram.setUniformMatrix4fv(t,e)}setUniform1fv(t,e){this._glProgram.setUniform1fv(t,e)}setUniform1iv(t,e){this._glProgram.setUniform1iv(t,e)}setUniform2iv(t,e){this._glProgram.setUniform3iv(t,e)}setUniform3iv(t,e){this._glProgram.setUniform3iv(t,e)}setUniform4iv(t,e){this._glProgram.setUniform4iv(t,e)}assertCompatibleVertexAttributeLocations(t){t.locations!==this._locations&&console.error("VertexAttributeLocations are incompatible")}stop(){this._textures.clear(),this._freeTextureUnits.clear()}bindTexture(t,e){if((0,r.Wi)(e)||null==e.glName){const e=this._textures.get(t);return e&&(this._context.bindTexture(null,e.unit),this._freeTextureUnit(e),this._textures.delete(t)),null}let i=this._textures.get(t);return null==i?(i=this._allocTextureUnit(e),this._textures.set(t,i)):i.texture=e,this._context.useProgram(this),this.setUniform1i(t,i.unit),this._context.bindTexture(e,i.unit),i.unit}rebindTextures(){this._context.useProgram(this),this._textures.forEach(((t,e)=>{this._context.bindTexture(t.texture,t.unit),this.setUniform1i(e,t.unit)})),(0,r.pC)(this._fragmentUniforms)&&this._fragmentUniforms.forEach((t=>{"sampler2D"!==t.type&&"samplerCube"!==t.type||this._textures.has(t.name)||console.error(`Texture sampler ${t.name} has no bound texture`)}))}_allocTextureUnit(t){return{texture:t,unit:0===this._freeTextureUnits.length?this._textures.size:this._freeTextureUnits.pop()}}_freeTextureUnit(t){this._freeTextureUnits.push(t.unit)}}},68198:(t,e,i)=>{var r;i.d(e,{C:()=>r}),function(t){t[t.MATERIAL=0]="MATERIAL",t[t.MATERIAL_ALPHA=1]="MATERIAL_ALPHA",t[t.MATERIAL_DEPTH=2]="MATERIAL_DEPTH",t[t.MATERIAL_NORMAL=3]="MATERIAL_NORMAL",t[t.MATERIAL_DEPTH_SHADOWMAP_ALL=4]="MATERIAL_DEPTH_SHADOWMAP_ALL",t[t.MATERIAL_HIGHLIGHT=5]="MATERIAL_HIGHLIGHT",t[t.MATERIAL_DEPTH_SHADOWMAP_DEFAULT=6]="MATERIAL_DEPTH_SHADOWMAP_DEFAULT",t[t.MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT=7]="MATERIAL_DEPTH_SHADOWMAP_HIGHLIGHT"}(r||(r={}))},93822:(t,e,i)=>{var r;i.d(e,{r:()=>r}),function(t){t[t.INTEGRATED_MESH=0]="INTEGRATED_MESH",t[t.OPAQUE_TERRAIN=1]="OPAQUE_TERRAIN",t[t.OPAQUE_MATERIAL=2]="OPAQUE_MATERIAL",t[t.TRANSPARENT_MATERIAL=3]="TRANSPARENT_MATERIAL",t[t.TRANSPARENT_TERRAIN=4]="TRANSPARENT_TERRAIN",t[t.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL=5]="TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL",t[t.OCCLUDED_TERRAIN=6]="OCCLUDED_TERRAIN",t[t.OCCLUDER_MATERIAL=7]="OCCLUDER_MATERIAL",t[t.TRANSPARENT_OCCLUDER_MATERIAL=8]="TRANSPARENT_OCCLUDER_MATERIAL",t[t.OCCLUSION_PIXELS=9]="OCCLUSION_PIXELS",t[t.POSTPROCESSING_ENVIRONMENT_OPAQUE=10]="POSTPROCESSING_ENVIRONMENT_OPAQUE",t[t.POSTPROCESSING_ENVIRONMENT_TRANSPARENT=11]="POSTPROCESSING_ENVIRONMENT_TRANSPARENT",t[t.LASERLINES=12]="LASERLINES",t[t.LASERLINES_CONTRAST_CONTROL=13]="LASERLINES_CONTRAST_CONTROL",t[t.HUD_MATERIAL=14]="HUD_MATERIAL",t[t.LABEL_MATERIAL=15]="LABEL_MATERIAL",t[t.LINE_CALLOUTS=16]="LINE_CALLOUTS",t[t.LINE_CALLOUTS_HUD_DEPTH=17]="LINE_CALLOUTS_HUD_DEPTH",t[t.DRAPED_MATERIAL=18]="DRAPED_MATERIAL",t[t.DRAPED_WATER=19]="DRAPED_WATER",t[t.VOXEL=20]="VOXEL",t[t.MAX_SLOTS=21]="MAX_SLOTS"}(r||(r={}))},50411:(t,e,i)=>{i.d(e,{JN:()=>s,P7:()=>l,RY:()=>c,YD:()=>f,eD:()=>h,ii:()=>u,s3:()=>o,zV:()=>a});var r=i(68401),n=i(8548);const s={func:n.wb.LESS},a={func:n.wb.ALWAYS},o={mask:255},l={mask:0},c={function:{func:n.wb.ALWAYS,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:n.xS.KEEP,zFail:n.xS.KEEP,zPass:n.xS.ZERO}},h={function:{func:n.wb.ALWAYS,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:n.xS.KEEP,zFail:n.xS.KEEP,zPass:n.xS.REPLACE}},u={function:{func:n.wb.EQUAL,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:n.xS.KEEP,zFail:n.xS.KEEP,zPass:n.xS.KEEP}},f={function:{func:n.wb.NOTEQUAL,ref:r.hU.OutlineVisualElementMask,mask:r.hU.OutlineVisualElementMask},operation:{fail:n.xS.KEEP,zFail:n.xS.KEEP,zPass:n.xS.KEEP}}},97731:(t,e,i)=>{i.d(e,{E6:()=>c,Kj:()=>f,RQ:()=>_,T:()=>a,ep:()=>l,hu:()=>s,kG:()=>u,tM:()=>p,u_:()=>h,yK:()=>o,zF:()=>d});var r=i(6394);i(90045);(0,i(67077).c)();class n{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function s(t,e){if(!t)throw e=e||"assert",console.log(new Error(e).stack),new n(e)}function a(t,e){t||(e=e||"",console.warn("Verify failed: "+e+"\n"+new Error("verify").stack))}function o(t,e,i,r){let n,s=(i[0]-t[0])/e[0],a=(r[0]-t[0])/e[0];s>a&&(n=s,s=a,a=n);let o=(i[1]-t[1])/e[1],l=(r[1]-t[1])/e[1];if(o>l&&(n=o,o=l,l=n),s>l||o>a)return!1;o>s&&(s=o),l<a&&(a=l);let c=(i[2]-t[2])/e[2],h=(r[2]-t[2])/e[2];return c>h&&(n=c,c=h,h=n),!(s>h||c>a)&&(h<a&&(a=h),!(a<0))}function l(t,e,i,n,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,r.a)();const o=(n[s]-i[s])*(e[0]-t[0])-(n[0]-i[0])*(e[s]-t[s]),l=(n[0]-i[0])*(t[s]-i[s])-(n[s]-i[s])*(t[0]-i[0]);if(0===o)return!1;const c=l/o;return a[0]=t[0]+c*(e[0]-t[0]),a[1]=t[s]+c*(e[s]-t[s]),!0}function c(t,e){return Math.log(t)/Math.log(e)}function h(t,e,i,r){t[12]=e,t[13]=i,t[14]=r}function u(t){return 1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&1===t[15]}function f(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/e)}function d(t,e,i){return 2*Math.atan(Math.sqrt(e*e+i*i)*Math.tan(.5*t)/i)}function p(t,e,i){return 2*Math.atan(e*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}function _(t,e,i){return 2*Math.atan(i*Math.tan(.5*t)/Math.sqrt(e*e+i*i))}},4760:(t,e,i)=>{var r;i.d(e,{T:()=>r}),function(t){t.POSITION="position",t.NORMAL="normal",t.UV0="uv0",t.AUXPOS1="auxpos1",t.AUXPOS2="auxpos2",t.MAPPOS="mapPos",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.TANGENT="tangent",t.OFFSET="offset",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.NORMALCOMPRESSED="normalCompressed",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.MODELORIGINHI="modelOriginHi",t.MODELORIGINLO="modelOriginLo",t.MODEL="model",t.MODELNORMAL="modelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMALA="normalA",t.NORMALB="normalB",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.U8PADDING="u8padding",t.U16PADDING="u16padding",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.EXTRUDE="extrude"}(r||(r={}))},68401:(t,e,i)=>{var r,n,s,a,o,l,c,h,u,f,d,p,_,g;i.d(e,{Am:()=>a,CE:()=>d,Gv:()=>n,JJ:()=>_,MX:()=>f,Rw:()=>l,V_:()=>u,Vr:()=>r,Yg:()=>p,hU:()=>c,jq:()=>h}),function(t){t[t.None=0]="None",t[t.Front=1]="Front",t[t.Back=2]="Back",t[t.COUNT=3]="COUNT"}(r||(r={})),function(t){t[t.Less=0]="Less",t[t.Lequal=1]="Lequal",t[t.COUNT=2]="COUNT"}(n||(n={})),function(t){t[t.NONE=0]="NONE",t[t.SMAA=1]="SMAA"}(s||(s={})),function(t){t[t.Color=0]="Color",t[t.Alpha=1]="Alpha",t[t.FrontFace=2]="FrontFace",t[t.NONE=3]="NONE",t[t.COUNT=4]="COUNT"}(a||(a={})),function(t){t[t.BACKGROUND=0]="BACKGROUND",t[t.UPDATE=1]="UPDATE"}(o||(o={})),function(t){t[t.NOT_LOADED=0]="NOT_LOADED",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(l||(l={})),function(t){t[t.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",t[t.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(c||(c={})),function(t){t[t.ASYNC=0]="ASYNC",t[t.SYNC=1]="SYNC"}(h||(h={})),function(t){t[t.Highlight=0]="Highlight",t[t.MaskOccludee=1]="MaskOccludee",t[t.COUNT=2]="COUNT"}(u||(u={})),function(t){t[t.Triangle=0]="Triangle",t[t.Point=1]="Point",t[t.Line=2]="Line"}(f||(f={})),function(t){t[t.STRETCH=1]="STRETCH",t[t.PAD=2]="PAD"}(d||(d={})),function(t){t[t.CHANGED=0]="CHANGED",t[t.UNCHANGED=1]="UNCHANGED"}(p||(p={})),function(t){t[t.Blend=0]="Blend",t[t.Opaque=1]="Opaque",t[t.Mask=2]="Mask",t[t.MaskBlend=3]="MaskBlend",t[t.COUNT=4]="COUNT"}(_||(_={})),function(t){t[t.OFF=0]="OFF",t[t.ON=1]="ON"}(g||(g={}))},81955:(t,e,i)=>{i.d(e,{DX:()=>h,NO:()=>f,cM:()=>u,p:()=>c,qZ:()=>d});var r=i(11186),n=i(71353),s=i(74702);let a=(()=>{const t=new Uint32Array(131072);for(let e=0;e<t.length;++e)t[e]=e;return t})();const o=new Uint16Array([0]),l=(()=>{const t=new Uint16Array(65536);for(let e=0;e<t.length;++e)t[e]=e;return t})();function c(t){if(1===t)return o;if(t<l.length)return new Uint16Array(l.buffer,0,t);if(t>a.length){const e=Math.max(2*a.length,t);a=new Uint32Array(e);for(let t=0;t<a.length;t++)a[t]=t}return new Uint32Array(a.buffer,0,t)}function h(t){if(1===t)return new Uint16Array(o);if(t<l.length)return new Uint16Array(l.slice(0,t));if(t>a.length){const e=new Uint32Array(t);for(let t=0;t<e.length;t++)e[t]=t;return e}return new Uint32Array(a.slice(0,t))}function u(t,e,i){if(!t)return!1;const{size:n,data:a}=t;(0,r.s)(i,0,0,0),(0,r.s)(m,0,0,0);let o=0,l=0;for(let c=0;c<e.length-2;c+=3){const t=e[c+0]*n,h=e[c+1]*n,u=e[c+2]*n;(0,r.s)(p,a[t+0],a[t+1],a[t+2]),(0,r.s)(_,a[h+0],a[h+1],a[h+2]),(0,r.s)(g,a[u+0],a[u+1],a[u+2]);const f=(0,s.bE)(p,_,g);f?((0,r.a)(p,p,_),(0,r.a)(p,p,g),(0,r.g)(p,p,1/3*f),(0,r.a)(i,i,p),o+=f):((0,r.a)(m,m,p),(0,r.a)(m,m,_),(0,r.a)(m,m,g),l+=3)}return(0!==l||0!==o)&&(0!==o?((0,r.g)(i,i,1/o),!0):0!==l&&((0,r.g)(i,m,1/l),!0))}function f(t,e,i){if(!t||!e)return!1;const{size:n,data:s}=t;(0,r.s)(i,0,0,0);let a=-1,o=0;for(let r=0;r<e.length;r++){const t=e[r]*n;a!==t&&(i[0]+=s[t+0],i[1]+=s[t+1],i[2]+=s[t+2],o++),a=t}return o>1&&(0,r.g)(i,i,1/o),o>0}function d(t,e,i,n){if(!t)return!1;const{size:s,data:a}=t;(0,r.s)(n,0,0,0),(0,r.s)(m,0,0,0);let o=0,l=0;const c=e?e.length-1:a.length/s-1,h=c+(i?2:0);for(let u=0;u<h;u+=2){const t=u<c?u:c,i=u<c?u+1:0,h=(e?e[t]:t)*s,f=(e?e[i]:i)*s;p[0]=a[h+0],p[1]=a[h+1],p[2]=a[h+2],_[0]=a[f+0],_[1]=a[f+1],_[2]=a[f+2],(0,r.g)(p,(0,r.a)(p,p,_),.5);const d=(0,r.j)(p,_);d>0?((0,r.a)(n,n,(0,r.g)(p,p,d)),o+=d):((0,r.a)(m,m,p),l++)}return 0!==o?((0,r.g)(n,n,1/o),!0):0!==l&&((0,r.g)(n,m,1/l),!0)}const p=(0,n.c)(),_=(0,n.c)(),g=(0,n.c)(),m=(0,n.c)()},32534:(t,e,i)=>{i.d(e,{hf:()=>d,ow:()=>f});var r=i(7566),n=i(4760),s=i(8548),a=i(61109);new a.G(n.T.POSITION,3,s.g.FLOAT,0,12),new a.G(n.T.POSITION,3,s.g.FLOAT,0,20),new a.G(n.T.UV0,2,s.g.FLOAT,12,20),new a.G(n.T.POSITION,3,s.g.FLOAT,0,32),new a.G(n.T.NORMAL,3,s.g.FLOAT,12,32),new a.G(n.T.UV0,2,s.g.FLOAT,24,32),new a.G(n.T.POSITION,3,s.g.FLOAT,0,16),new a.G(n.T.COLOR,4,s.g.UNSIGNED_BYTE,12,16);const o=[new a.G(n.T.POSITION,2,s.g.FLOAT,0,8)],l=[new a.G(n.T.POSITION,2,s.g.FLOAT,0,16),new a.G(n.T.UV0,2,s.g.FLOAT,8,16)];var c=i(44070),h=i(51378),u=i(45412);function f(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,h=null;return h=e===l?new Float32Array([n,n,0,0,a,n,1,0,n,a,0,1,a,a,1,1]):new Float32Array([n,n,a,n,n,a,a,a]),new u.U(t,i,{geometry:e},{geometry:c.f.createVertex(t,s.l1.STATIC_DRAW,h)})}function d(t){return new h.x(t,{target:s.No.TEXTURE_2D,pixelFormat:s.VI.RGBA,dataType:s.Br.UNSIGNED_BYTE,samplingMode:s.cw.NEAREST,width:1,height:1},new Uint8Array([255,255,255,255]))}},65216:(t,e,i)=>{i.d(e,{PV:()=>o,TU:()=>l,bA:()=>c,sX:()=>a});var r=i(16889);i(50951);function n(t,e,i){const r=i.parameters,n=i.paddingPixelsOverride;return h.scale=Math.min(r.divisor/(e-r.offset),1),h.factor=function(t){return Math.abs(t*t*t)}(t),h.minPixelSize=r.minPixelSize,h.paddingPixels=n,h}function s(t,e){return 0===t?e.minPixelSize:e.minPixelSize*(1+2*e.paddingPixels/t)}function a(t,e){return Math.max((0,r.t7)(t*e.scale,t,e.factor),s(t,e))}function o(t,e,i,r){r.scale=function(t,e,i){const r=n(t,e,i);return r.minPixelSize=0,r.paddingPixels=0,a(1,r)}(t,e,i),r.factor=0,r.minPixelSize=i.parameters.minPixelSize,r.paddingPixels=i.paddingPixelsOverride}function l(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];const r=Math.min(Math.max(e.scale,s(t[1],e)/Math.max(1e-5,t[1])),1);return i[0]=t[0]*r,i[1]=t[1]*r,i}function c(t,e,i,r){return a(t,n(e,i,r))}(0,r.Vl)(10),(0,r.Vl)(12),(0,r.Vl)(70),(0,r.Vl)(40);const h={scale:0,factor:0,minPixelSize:0,paddingPixels:0}},76783:(t,e,i)=>{i.d(e,{W9:()=>b,cy:()=>A,yn:()=>p});var r=i(92026),n=i(22753),s=i(11873),a=i(14226),o=i(81949),l=i(48976),c=i(98131),h=i(11186),u=i(8229),f=i(71353),d=i(23470);class p{constructor(){this._transform=(0,o.c)(),this._transformInverse=new _({value:this._transform},a.a,o.c),this._transformInverseTranspose=new _(this._transformInverse,a.t,o.c),this._transformTranspose=new _({value:this._transform},a.t,o.c),this._transformInverseRotation=new _({value:this._transform},n.n,s.c)}_invalidateLazyTransforms(){this._transformInverse.invalidate(),this._transformInverseTranspose.invalidate(),this._transformTranspose.invalidate(),this._transformInverseRotation.invalidate()}get transform(){return this._transform}get inverse(){return this._transformInverse.value}get inverseTranspose(){return this._transformInverseTranspose.value}get inverseRotation(){return this._transformInverseRotation.value}get transpose(){return this._transformTranspose.value}setTransformMatrix(t){(0,a.c)(this._transform,t)}multiplyTransform(t){(0,a.m)(this._transform,this._transform,t)}set(t){(0,a.c)(this._transform,t),this._invalidateLazyTransforms()}setAndInvalidateLazyTransforms(t,e){this.setTransformMatrix(t),this.multiplyTransform(e),this._invalidateLazyTransforms()}}class _{constructor(t,e,i){this.original=t,this.update=e,this.dirty=!0,this.transform=i()}invalidate(){this.dirty=!0}get value(){return this.dirty&&(this.update(this.transform,this.original.value),this.dirty=!1),this.transform}}const g=(0,f.c)(),m=(0,f.c)(),T=(0,f.c)();const v=new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.sphere=(0,d.c)(),this.tmpVertex=(0,f.c)()}applyToVertex(t,e,i){const r=this.objectTransform.transform;let n=r[0]*t+r[4]*e+r[8]*i+r[12],s=r[1]*t+r[5]*e+r[9]*i+r[13],a=r[2]*t+r[6]*e+r[10]*i+r[14];const o=this.offset/Math.sqrt(n*n+s*s+a*a);n+=n*o,s+=s*o,a+=a*o;const l=this.objectTransform.inverse;return this.tmpVertex[0]=l[0]*n+l[4]*s+l[8]*a+l[12],this.tmpVertex[1]=l[1]*n+l[5]*s+l[9]*a+l[13],this.tmpVertex[2]=l[2]*n+l[6]*s+l[10]*a+l[14],this.tmpVertex}applyToMinMax(t,e){const i=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*i,t[1]+=t[1]*i,t[2]+=t[2]*i;const r=this.offset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]+=e[0]*r,e[1]+=e[1]*r,e[2]+=e[2]*r}applyToAabb(t){const e=this.offset/Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]+=t[0]*e,t[1]+=t[1]*e,t[2]+=t[2]*e;const i=this.offset/Math.sqrt(t[3]*t[3]+t[4]*t[4]+t[5]*t[5]);return t[3]+=t[3]*i,t[4]+=t[4]*i,t[5]+=t[5]*i,t}applyToBoundingSphere(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this.offset/e;return this.sphere[0]=t[0]+t[0]*i,this.sphere[1]=t[1]+t[1]*i,this.sphere[2]=t[2]+t[2]*i,this.sphere[3]=t[3]+t[3]*this.offset/e,this.sphere}};function b(t){return(0,r.pC)(t)?(v.offset=t,v):null}new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.componentLocalOriginLength=0,this._tmpVertex=(0,f.c)(),this._mbs=(0,d.c)(),this._obb={center:(0,f.c)(),halfSize:(0,u.c)(),quaternion:null},this._totalOffset=0,this._offset=0,this._resetOffset(t)}_resetOffset(t){this._offset=t,this._totalOffset=t}set offset(t){this._resetOffset(t)}get offset(){return this._offset}set componentOffset(t){this._totalOffset=this._offset+t}set localOrigin(t){this.componentLocalOriginLength=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}applyToVertex(t,e,i){const r=t,n=e,s=i+this.componentLocalOriginLength,a=this._totalOffset/Math.sqrt(r*r+n*n+s*s);return this._tmpVertex[0]=t+r*a,this._tmpVertex[1]=e+n*a,this._tmpVertex[2]=i+s*a,this._tmpVertex}applyToAabb(t){const e=t[0],i=t[1],r=t[2]+this.componentLocalOriginLength,n=t[3],s=t[4],a=t[5]+this.componentLocalOriginLength,o=e*n<0?0:Math.min(Math.abs(e),Math.abs(n)),l=i*s<0?0:Math.min(Math.abs(i),Math.abs(s)),c=r*a<0?0:Math.min(Math.abs(r),Math.abs(a)),h=Math.sqrt(o*o+l*l+c*c);if(h<this._totalOffset)return t[0]-=e<0?this._totalOffset:0,t[1]-=i<0?this._totalOffset:0,t[2]-=r<0?this._totalOffset:0,t[3]+=n>0?this._totalOffset:0,t[4]+=s>0?this._totalOffset:0,t[5]+=a>0?this._totalOffset:0,t;const u=Math.max(Math.abs(e),Math.abs(n)),f=Math.max(Math.abs(i),Math.abs(s)),d=Math.max(Math.abs(r),Math.abs(a)),p=Math.sqrt(u*u+f*f+d*d),_=this._totalOffset/p,g=this._totalOffset/h;return t[0]+=e*(e>0?_:g),t[1]+=i*(i>0?_:g),t[2]+=r*(r>0?_:g),t[3]+=n*(n<0?_:g),t[4]+=s*(s<0?_:g),t[5]+=a*(a<0?_:g),t}applyToMbs(t){const e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]),i=this._totalOffset/e;return this._mbs[0]=t[0]+t[0]*i,this._mbs[1]=t[1]+t[1]*i,this._mbs[2]=t[2]+t[2]*i,this._mbs[3]=t[3]+t[3]*this._totalOffset/e,this._mbs}applyToObb(t){const e=t.center,i=this._totalOffset/Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);this._obb.center[0]=e[0]+e[0]*i,this._obb.center[1]=e[1]+e[1]*i,this._obb.center[2]=e[2]+e[2]*i,(0,h.q)(this._obb.halfSize,t.halfSize,t.quaternion),(0,h.a)(this._obb.halfSize,this._obb.halfSize,t.center);const r=this._totalOffset/Math.sqrt(this._obb.halfSize[0]*this._obb.halfSize[0]+this._obb.halfSize[1]*this._obb.halfSize[1]+this._obb.halfSize[2]*this._obb.halfSize[2]);return this._obb.halfSize[0]+=this._obb.halfSize[0]*r,this._obb.halfSize[1]+=this._obb.halfSize[1]*r,this._obb.halfSize[2]+=this._obb.halfSize[2]*r,(0,h.b)(this._obb.halfSize,this._obb.halfSize,t.center),(0,l.c)(O,t.quaternion),(0,h.q)(this._obb.halfSize,this._obb.halfSize,O),this._obb.halfSize[0]*=this._obb.halfSize[0]<0?-1:1,this._obb.halfSize[1]*=this._obb.halfSize[1]<0?-1:1,this._obb.halfSize[2]*=this._obb.halfSize[2]<0?-1:1,this._obb.quaternion=t.quaternion,this._obb}};new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.offset=t,this.tmpVertex=(0,f.c)()}applyToVertex(t,e,i){const r=t+this.localOrigin[0],n=e+this.localOrigin[1],s=i+this.localOrigin[2],a=this.offset/Math.sqrt(r*r+n*n+s*s);return this.tmpVertex[0]=t+r*a,this.tmpVertex[1]=e+n*a,this.tmpVertex[2]=i+s*a,this.tmpVertex}applyToAabb(t){for(let n=0;n<3;++n)g[n]=t[0+n]+this.localOrigin[n],m[n]=t[3+n]+this.localOrigin[n],T[n]=g[n];const e=this.applyToVertex(g[0],g[1],g[2]);for(let n=0;n<3;++n)t[n]=e[n],t[n+3]=e[n];const i=e=>{const i=this.applyToVertex(e[0],e[1],e[2]);for(let r=0;r<3;++r)t[r+0]=Math.min(t[r+0],i[r]),t[r+3]=Math.max(t[r+3],i[r])};for(let n=1;n<8;++n){for(let t=0;t<3;++t)T[t]=0==(n&1<<t)?g[t]:m[t];i(T)}let r=0;for(let n=0;n<3;++n)g[n]*m[n]<0&&(r|=1<<n);if(0!==r&&7!==r)for(let n=0;n<8;++n)if(0==(r&n)){for(let t=0;t<3;++t)r[t]?T[t]=0:T[t]=0!=(n&1<<t)?g[t]:m[t];i(T)}for(let n=0;n<3;++n)t[n+0]-=this.localOrigin[n],t[n+3]-=this.localOrigin[n];return t}};const A="terrain",O=(0,c.a)()},8883:(t,e,i)=>{i.d(e,{W:()=>a});var r=i(27366),n=i(99340),s=i(33559);class a extends s.m{}(0,r._)([(0,s.o)({constValue:!0})],a.prototype,"hasSliceHighlight",void 0),(0,r._)([(0,s.o)({constValue:!1})],a.prototype,"hasSliceInVertexProgram",void 0),(0,r._)([(0,s.o)({constValue:!1})],a.prototype,"instancedDoublePrecision",void 0),(0,r._)([(0,s.o)({constValue:!1})],a.prototype,"isGround",void 0),(0,r._)([(0,s.o)({constValue:n.P.Pass})],a.prototype,"pbrTextureBindType",void 0)},22909:(t,e,i)=>{i.d(e,{Bw:()=>_,CN:()=>v,FZ:()=>L,Hx:()=>I,LO:()=>x,TT:()=>P,Tw:()=>S,Uf:()=>E});var r=i(63780),n=i(16889),s=i(92026),a=i(11186),o=i(71353),l=i(41414),c=i(68401),h=i(65216),u=i(97731),f=i(4760),d=i(32683);const p=(0,l.Ue)();function _(t,e,i,r,n,s,a){if(!(0,d.PD)(e))if(t.boundingInfo){(0,u.hu)(t.primitiveType===c.MX.Triangle);const e=i.tolerance;m(t.boundingInfo,r,n,e,s,a)}else{const e=t.indices.get(f.T.POSITION),i=t.vertexAttributes.get(f.T.POSITION);v(r,n,0,e.length/3,e,i,void 0,s,a)}}const g=(0,o.c)();function m(t,e,i,r,n,o){if((0,s.Wi)(t))return;const c=function(t,e,i){return(0,a.s)(i,1/(e[0]-t[0]),1/(e[1]-t[1]),1/(e[2]-t[2]))}(e,i,g);if((0,l.op)(p,t.getBBMin()),(0,l.Tn)(p,t.getBBMax()),(0,s.pC)(n)&&n.applyToAabb(p),S(p,e,c,r)){const{primitiveIndices:s,indices:a,position:l}=t,c=s?s.length:a.length/3;if(c>N){const s=t.getChildren();if(void 0!==s){for(let t=0;t<8;++t)void 0!==s[t]&&m(s[t],e,i,r,n,o);return}}v(e,i,0,c,a,l,s,n,o)}}const T=(0,o.c)();function v(t,e,i,r,n,a,o,l,c){if(o)return function(t,e,i,r,n,a,o,l,c){const h=a.data,u=a.stride||a.size,f=t[0],d=t[1],p=t[2],_=e[0]-f,g=e[1]-d,m=e[2]-p;for(let v=i;v<r;++v){const t=o[v];let e=3*t,i=u*n[e++],r=h[i++],a=h[i++],b=h[i];i=u*n[e++];let A=h[i++],S=h[i++],I=h[i];i=u*n[e];let E=h[i++],x=h[i++],P=h[i];(0,s.pC)(l)&&([r,a,b]=l.applyToVertex(r,a,b,v),[A,S,I]=l.applyToVertex(A,S,I,v),[E,x,P]=l.applyToVertex(E,x,P,v));const M=A-r,L=S-a,N=I-b,y=E-r,R=x-a,w=P-b,D=g*w-R*m,U=m*y-w*_,C=_*R-y*g,F=M*D+L*U+N*C;if(Math.abs(F)<=Number.EPSILON)continue;const H=f-r,B=d-a,z=p-b,V=H*D+B*U+z*C;if(F>0){if(V<0||V>F)continue}else if(V>0||V<F)continue;const G=B*N-L*z,W=z*M-N*H,k=H*L-M*B,q=_*G+g*W+m*k;if(F>0){if(q<0||V+q>F)continue}else if(q>0||V+q<F)continue;const $=(y*G+R*W+w*k)/F;$>=0&&c($,O(M,L,N,y,R,w,T),t,!1)}}(t,e,i,r,n,a,o,l,c);const h=a.data,u=a.stride||a.size,f=t[0],d=t[1],p=t[2],_=e[0]-f,g=e[1]-d,m=e[2]-p;for(let v=i,b=3*i;v<r;++v){let t=u*n[b++],e=h[t++],i=h[t++],r=h[t];t=u*n[b++];let a=h[t++],o=h[t++],A=h[t];t=u*n[b++];let S=h[t++],I=h[t++],E=h[t];(0,s.pC)(l)&&([e,i,r]=l.applyToVertex(e,i,r,v),[a,o,A]=l.applyToVertex(a,o,A,v),[S,I,E]=l.applyToVertex(S,I,E,v));const x=a-e,P=o-i,M=A-r,L=S-e,N=I-i,y=E-r,R=g*y-N*m,w=m*L-y*_,D=_*N-L*g,U=x*R+P*w+M*D;if(Math.abs(U)<=Number.EPSILON)continue;const C=f-e,F=d-i,H=p-r,B=C*R+F*w+H*D;if(U>0){if(B<0||B>U)continue}else if(B>0||B<U)continue;const z=F*M-P*H,V=H*x-M*C,G=C*P-x*F,W=_*z+g*V+m*G;if(U>0){if(W<0||B+W>U)continue}else if(W>0||B+W<U)continue;const k=(L*z+N*V+y*G)/U;k>=0&&c(k,O(x,P,M,L,N,y,T),v,!1)}}const b=(0,o.c)(),A=(0,o.c)();function O(t,e,i,r,n,s,o){return(0,a.s)(b,t,e,i),(0,a.s)(A,r,n,s),(0,a.f)(o,b,A),(0,a.n)(o,o),o}function S(t,e,i,r){return function(t,e,i,r,n){const s=(t[0]-r-e[0])*i[0],a=(t[3]+r-e[0])*i[0];let o=Math.min(s,a),l=Math.max(s,a);const c=(t[1]-r-e[1])*i[1],h=(t[4]+r-e[1])*i[1];if(l=Math.min(l,Math.max(c,h)),l<0)return!1;if(o=Math.max(o,Math.min(c,h)),o>l)return!1;const u=(t[2]-r-e[2])*i[2],f=(t[5]+r-e[2])*i[2];return l=Math.min(l,Math.max(u,f)),!(l<0)&&(o=Math.max(o,Math.min(u,f)),!(o>l)&&o<n)}(t,e,i,r,1/0)}function I(t,e,i,r,a){let o=(i.screenLength||0)*t.pixelRatio;(0,s.pC)(a)&&(o=(0,h.bA)(o,r,e,a));const l=o*Math.tan(.5*t.fovY)/(.5*t.fullHeight);return(0,n.uZ)(l*e,i.minWorldLength||0,null!=i.maxWorldLength?i.maxWorldLength:1/0)}function E(t,e){const i=e?E(e):{};for(const r in t){let e=t[r];e&&e.forEach&&(e=M(e)),null==e&&r in i||(i[r]=e)}return i}function x(t,e){let i=!1;for(const n in e){const s=e[n];void 0!==s&&(Array.isArray(s)?null===t[n]?(t[n]=s.slice(),i=!0):(0,r.Vx)(t[n],s)&&(i=!0):t[n]!==s&&(i=!0,t[n]=s))}return i}function P(t,e,i,r,s,a){if(!e.options.selectionMode)return;const o=t.vertexAttributes.get(f.T.POSITION).data,l=t.vertexAttributes.get(f.T.SIZE),c=l&&l.data[0],h=r[0],u=r[1],d=((c+s)/2+4)*t.screenToWorldRatio;let p=Number.MAX_VALUE,_=0;for(let f=0;f<o.length-5;f+=3){const t=o[f],e=o[f+1],i=h-t,r=u-e,s=o[f+3]-t,a=o[f+4]-e,l=(0,n.uZ)((s*i+a*r)/(s*s+a*a),0,1),c=s*l-i,d=a*l-r,g=c*c+d*d;g<p&&(p=g,_=f/3)}p<d*d&&a(i.dist,i.normal,_,!1)}function M(t){const e=[];return t.forEach((t=>e.push(t))),e}const L={multiply:1,ignore:2,replace:3,tint:4},N=1e3},33236:(t,e,i)=>{i.d(e,{NK:()=>p,SW:()=>c,Vs:()=>d,ho:()=>h,s5:()=>u});var r=i(14226),n=i(25158),s=i(97731),a=i(4760);function o(t,e,i,r){const n=i.typedBuffer,s=i.typedBufferStride,a=t.length;r*=s;for(let o=0;o<a;++o){const i=2*t[o];n[r]=e[i],n[r+1]=e[i+1],r+=s}}function l(t,e,i,r,n){const s=i.typedBuffer,a=i.typedBufferStride,o=t.length;if(r*=a,null==n||1===n)for(let l=0;l<o;++l){const i=3*t[l];s[r]=e[i],s[r+1]=e[i+1],s[r+2]=e[i+2],r+=a}else for(let l=0;l<o;++l){const i=3*t[l];for(let t=0;t<n;++t)s[r]=e[i],s[r+1]=e[i+1],s[r+2]=e[i+2],r+=a}}function c(t,e,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const s=i.typedBuffer,a=i.typedBufferStride,o=t.length;if(r*=a,1===n)for(let l=0;l<o;++l){const i=4*t[l];s[r]=e[i],s[r+1]=e[i+1],s[r+2]=e[i+2],s[r+3]=e[i+3],r+=a}else for(let l=0;l<o;++l){const i=4*t[l];for(let t=0;t<n;++t)s[r]=e[i],s[r+1]=e[i+1],s[r+2]=e[i+2],s[r+3]=e[i+3],r+=a}}function h(t,e,i,r,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(!i)return void l(t,e,r,n,s);const a=r.typedBuffer,o=r.typedBufferStride,c=t.length,h=i[0],u=i[1],f=i[2],d=i[4],p=i[5],_=i[6],g=i[8],m=i[9],T=i[10],v=i[12],b=i[13],A=i[14];if(n*=o,1===s)for(let l=0;l<c;++l){const i=3*t[l],r=e[i],s=e[i+1],c=e[i+2];a[n]=h*r+d*s+g*c+v,a[n+1]=u*r+p*s+m*c+b,a[n+2]=f*r+_*s+T*c+A,n+=o}else for(let l=0;l<c;++l){const i=3*t[l],r=e[i],c=e[i+1],O=e[i+2],S=h*r+d*c+g*O+v,I=u*r+p*c+m*O+b,E=f*r+_*c+T*O+A;for(let t=0;t<s;++t)a[n]=S,a[n+1]=I,a[n+2]=E,n+=o}}function u(t,e,i,n,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(!i)return void l(t,e,n,s,a);const o=i,c=n.typedBuffer,h=n.typedBufferStride,u=t.length,f=o[0],d=o[1],p=o[2],_=o[4],g=o[5],m=o[6],T=o[8],v=o[9],b=o[10],A=!(0,r.p)(o),O=1e-6,S=1-O;if(s*=h,1===a)for(let r=0;r<u;++r){const i=3*t[r],n=e[i],a=e[i+1],o=e[i+2];let l=f*n+_*a+T*o,u=d*n+g*a+v*o,I=p*n+m*a+b*o;if(A){const t=l*l+u*u+I*I;if(t<S&&t>O){const e=1/Math.sqrt(t);l*=e,u*=e,I*=e}}c[s+0]=l,c[s+1]=u,c[s+2]=I,s+=h}else for(let r=0;r<u;++r){const i=3*t[r],n=e[i],o=e[i+1],l=e[i+2];let u=f*n+_*o+T*l,I=d*n+g*o+v*l,E=p*n+m*o+b*l;if(A){const t=u*u+I*I+E*E;if(t<S&&t>O){const e=1/Math.sqrt(t);u*=e,I*=e,E*=e}}for(let t=0;t<a;++t)c[s+0]=u,c[s+1]=I,c[s+2]=E,s+=h}}function f(t,e,i,n,s){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;if(!i)return void c(t,e,n,s,a);const o=i,l=n.typedBuffer,h=n.typedBufferStride,u=t.length,f=o[0],d=o[1],p=o[2],_=o[4],g=o[5],m=o[6],T=o[8],v=o[9],b=o[10],A=!(0,r.p)(o),O=1e-6,S=1-O;if(s*=h,1===a)for(let r=0;r<u;++r){const i=4*t[r],n=e[i],a=e[i+1],o=e[i+2],c=e[i+3];let u=f*n+_*a+T*o,I=d*n+g*a+v*o,E=p*n+m*a+b*o;if(A){const t=u*u+I*I+E*E;if(t<S&&t>O){const e=1/Math.sqrt(t);u*=e,I*=e,E*=e}}l[s+0]=u,l[s+1]=I,l[s+2]=E,l[s+3]=c,s+=h}else for(let r=0;r<u;++r){const i=4*t[r],n=e[i],o=e[i+1],c=e[i+2],u=e[i+3];let I=f*n+_*o+T*c,E=d*n+g*o+v*c,x=p*n+m*o+b*c;if(A){const t=I*I+E*E+x*x;if(t<S&&t>O){const e=1/Math.sqrt(t);I*=e,E*=e,x*=e}}for(let t=0;t<a;++t)l[s+0]=I,l[s+1]=E,l[s+2]=x,l[s+3]=u,s+=h}}function d(t,e,i,r,n){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;const a=r.typedBuffer,o=r.typedBufferStride,l=t.length;if(n*=o,1===s){if(4===i)for(let c=0;c<l;++c){const i=4*t[c];a[n]=e[i],a[n+1]=e[i+1],a[n+2]=e[i+2],a[n+3]=e[i+3],n+=o}else if(3===i)for(let c=0;c<l;++c){const i=3*t[c];a[n]=e[i],a[n+1]=e[i+1],a[n+2]=e[i+2],a[n+3]=255,n+=o}}else if(4===i)for(let c=0;c<l;++c){const i=4*t[c];for(let t=0;t<s;++t)a[n]=e[i],a[n+1]=e[i+1],a[n+2]=e[i+2],a[n+3]=e[i+3],n+=o}else if(3===i)for(let c=0;c<l;++c){const i=3*t[c];for(let t=0;t<s;++t)a[n]=e[i],a[n+1]=e[i+1],a[n+2]=e[i+2],a[n+3]=255,n+=o}}function p(t,e,i,r,l,c){for(const p of e.fieldNames){const e=t.vertexAttributes.get(p),_=t.indices.get(p);if(e&&_)switch(p){case a.T.POSITION:{(0,s.hu)(3===e.size);const t=l.getField(p,n.ct);t&&h(_,e.data,i,t,c);break}case a.T.NORMAL:{(0,s.hu)(3===e.size);const t=l.getField(p,n.ct);t&&u(_,e.data,r,t,c);break}case a.T.UV0:{(0,s.hu)(2===e.size);const t=l.getField(p,n.Eu);t&&o(_,e.data,t,c);break}case a.T.COLOR:{(0,s.hu)(3===e.size||4===e.size);const t=l.getField(p,n.mc);t&&d(_,e.data,e.size,t,c);break}case a.T.SYMBOLCOLOR:{(0,s.hu)(3===e.size||4===e.size);const t=l.getField(p,n.mc);t&&d(_,e.data,e.size,t,c);break}case a.T.TANGENT:{(0,s.hu)(4===e.size);const t=l.getField(p,n.ek);t&&f(_,e.data,r,t,c);break}}}}},32683:(t,e,i)=>{i.d(e,{EE:()=>f,PD:()=>h,U_:()=>c,bZ:()=>u,lr:()=>l});var r=i(92026),n=i(14226),s=i(81949),a=i(97731),o=i(43411);function l(t,e){return(0,r.Wi)(t)&&(t=[]),t.push(e),t}function c(t,e){if((0,r.Wi)(t))return null;const i=t.filter((t=>t!==e));return 0===i.length?null:i}function h(t){return!!(0,r.pC)(t)&&!t.visible}function u(t,e,i){const s=t.origin.vec3;(0,a.u_)(_,-s[0],-s[1],-s[2]),(0,r.pC)(t.transformation)?(0,n.m)(e,_,t.transformation):(0,n.c)(e,_),i&&((0,n.a)(i,e),(0,n.t)(i,i))}function f(t,e,i,r,n){d[0]=t.get(e,0),d[1]=t.get(e,1),d[2]=t.get(e,2),(0,o.LF)(d,p,3),i.set(n,0,p[0]),r.set(n,0,p[1]),i.set(n,1,p[2]),r.set(n,1,p[3]),i.set(n,2,p[4]),r.set(n,2,p[5])}const d=new Float64Array(3),p=new Float32Array(6),_=(0,s.c)()},61109:(t,e,i)=>{i.d(e,{G:()=>r});class r{constructor(t,e,i,r,n){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;this.name=t,this.count=e,this.type=i,this.offset=r,this.stride=n,this.normalized=s,this.divisor=a}}},43411:(t,e,i)=>{function r(t,e,i){for(let r=0;r<i;++r)e[2*r]=t[r],e[2*r+1]=t[r]-e[2*r]}function n(t,e){const i=t.length;for(let r=0;r<i;++r)a[0]=t[r],e[r]=a[0];return e}function s(t,e){const i=t.length;for(let r=0;r<i;++r)a[0]=t[r],a[1]=t[r]-a[0],e[r]=a[1];return e}i.d(e,{GB:()=>s,LF:()=>r,U8:()=>n});const a=new Float32Array(2)},36207:(t,e,i)=>{i.d(e,{BK:()=>u,LZ:()=>h,if:()=>s,jp:()=>z,sg:()=>l,sm:()=>b,wK:()=>a,zp:()=>c});var r=i(68401),n=i(8548);function s(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.db.ADD,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,0];return{srcRgb:t,srcAlpha:t,dstRgb:e,dstAlpha:e,opRgb:i,opAlpha:i,color:{r:r[0],g:r[1],b:r[2],a:r[3]}}}function a(t,e,i,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.db.ADD,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:n.db.ADD,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0,0];return{srcRgb:t,srcAlpha:e,dstRgb:i,dstAlpha:r,opRgb:s,opAlpha:a,color:{r:o[0],g:o[1],b:o[2],a:o[3]}}}const o={face:n.LR.BACK,mode:n.Wf.CCW},l={face:n.LR.FRONT,mode:n.Wf.CCW},c=t=>t===r.Vr.Back?o:t===r.Vr.Front?l:null,h={zNear:0,zFar:1},u={r:!0,g:!0,b:!0,a:!0};function f(t){return S.intern(t)}function d(t){return E.intern(t)}function p(t){return P.intern(t)}function _(t){return L.intern(t)}function g(t){return y.intern(t)}function m(t){return w.intern(t)}function T(t){return U.intern(t)}function v(t){return F.intern(t)}function b(t){return B.intern(t)}class A{constructor(t,e){this.makeKey=t,this.makeRef=e,this.interns=new Map}intern(t){if(!t)return null;const e=this.makeKey(t),i=this.interns;return i.has(e)||i.set(e,this.makeRef(t)),i.get(e)}}function O(t){return"["+t.join(",")+"]"}const S=new A(I,(t=>({__tag:"Blending",...t})));function I(t){return t?O([t.srcRgb,t.srcAlpha,t.dstRgb,t.dstAlpha,t.opRgb,t.opAlpha,t.color.r,t.color.g,t.color.b,t.color.a]):null}const E=new A(x,(t=>({__tag:"Culling",...t})));function x(t){return t?O([t.face,t.mode]):null}const P=new A(M,(t=>({__tag:"PolygonOffset",...t})));function M(t){return t?O([t.factor,t.units]):null}const L=new A(N,(t=>({__tag:"DepthTest",...t})));function N(t){return t?O([t.func]):null}const y=new A(R,(t=>({__tag:"StencilTest",...t})));function R(t){return t?O([t.function.func,t.function.ref,t.function.mask,t.operation.fail,t.operation.zFail,t.operation.zPass]):null}const w=new A(D,(t=>({__tag:"DepthWrite",...t})));function D(t){return t?O([t.zNear,t.zFar]):null}const U=new A(C,(t=>({__tag:"ColorWrite",...t})));function C(t){return t?O([t.r,t.g,t.b,t.a]):null}const F=new A(H,(t=>({__tag:"StencilWrite",...t})));function H(t){return t?O([t.mask]):null}const B=new A((function(t){return t?O([I(t.blending),x(t.culling),M(t.polygonOffset),N(t.depthTest),R(t.stencilTest),D(t.depthWrite),C(t.colorWrite),H(t.stencilWrite)]):null}),(t=>({blending:f(t.blending),culling:d(t.culling),polygonOffset:p(t.polygonOffset),depthTest:_(t.depthTest),stencilTest:g(t.stencilTest),depthWrite:m(t.depthWrite),colorWrite:T(t.colorWrite),stencilWrite:v(t.stencilWrite)})));class z{constructor(t){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._stateSetters=t}setPipeline(t){(this._pipelineInvalid||t!==this._pipeline)&&(this._setBlending(t.blending),this._setCulling(t.culling),this._setPolygonOffset(t.polygonOffset),this._setDepthTest(t.depthTest),this._setStencilTest(t.stencilTest),this._setDepthWrite(t.depthWrite),this._setColorWrite(t.colorWrite),this._setStencilWrite(t.stencilWrite),this._pipeline=t),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}_setBlending(t){this._blending=this._setSubState(t,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(t){this._culling=this._setSubState(t,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(t){this._polygonOffset=this._setSubState(t,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(t){this._depthTest=this._setSubState(t,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(t){this._stencilTest=this._setSubState(t,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(t){this._depthWrite=this._setSubState(t,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(t){this._colorWrite=this._setSubState(t,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(t){this._stencilWrite=this._setSubState(t,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setSubState(t,e,i,r){return(i||t!==e)&&(r(t),this._pipelineInvalid=!0),t}}}}]);
//# sourceMappingURL=2618.44f052f2.chunk.js.map