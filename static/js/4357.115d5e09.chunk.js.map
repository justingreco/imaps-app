{"version":3,"file":"static/js/4357.115d5e09.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/geometry/support/lineSegment.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{c as n,b as o,e as i,g as e,a as c,p as u,d as s}from\"../../chunks/vec3.js\";import{a,c as g}from\"../../chunks/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:a(t.origin),vector:a(t.vector)}:{origin:g(),vector:g()}}function p(t,r){const n=x.get();return n.origin=t,n.vector=r,n}function h(t,r=v()){return m(t.origin,t.vector,r)}function m(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function l(t,r,i=v()){return n(i.origin,t),o(i.vector,r,t),i}function b(r,n){const c=o(f.get(),n,r.origin),u=i(r.vector,c),s=i(r.vector,r.vector),a=t(u/s,0,1),g=o(f.get(),e(f.get(),r.vector,a),c);return i(g,g)}function M(t,r){return Math.sqrt(b(t,r))}function d(t,r,n){return A(t,r,0,1,n)}function j(t,r,n){return c(n,t.origin,e(n,t.vector,r))}function A(r,n,s,a,g){const{vector:v,origin:p}=r,h=o(f.get(),n,p),m=i(v,h)/u(v);return e(g,v,t(m,s,a)),c(g,g,r.origin)}function B(t,r){if(q(t,p(r.origin,r.direction),!1,w)){const{tA:r,pB:n,distance2:o}=w;if(r>=0&&r<=1)return o;if(r<0)return s(t.origin,n);if(r>1)return s(c(f.get(),t.origin,t.vector),n)}return null}function k(t,r,o){return!!q(t,r,!0,w)&&(n(o,w.pA),!0)}function S(t,r){return q(t,r,!0,w)?w.distance2:null}function q(r,n,o,i){const e=1e-6,u=r.origin,a=c(f.get(),u,r.vector),g=n.origin,v=c(f.get(),g,n.vector),p=f.get(),h=f.get();if(p[0]=u[0]-g[0],p[1]=u[1]-g[1],p[2]=u[2]-g[2],h[0]=v[0]-g[0],h[1]=v[1]-g[1],h[2]=v[2]-g[2],Math.abs(h[0])<e&&Math.abs(h[1])<e&&Math.abs(h[2])<e)return!1;const m=f.get();if(m[0]=a[0]-u[0],m[1]=a[1]-u[1],m[2]=a[2]-u[2],Math.abs(m[0])<e&&Math.abs(m[1])<e&&Math.abs(m[2])<e)return!1;const l=p[0]*h[0]+p[1]*h[1]+p[2]*h[2],b=h[0]*m[0]+h[1]*m[1]+h[2]*m[2],M=p[0]*m[0]+p[1]*m[1]+p[2]*m[2],d=h[0]*h[0]+h[1]*h[1]+h[2]*h[2],j=(m[0]*m[0]+m[1]*m[1]+m[2]*m[2])*d-b*b;if(Math.abs(j)<e)return!1;let A=(l*b-M*d)/j,B=(l+b*A)/d;o&&(A=t(A,0,1),B=t(B,0,1));const k=f.get(),S=f.get();return k[0]=u[0]+A*m[0],k[1]=u[1]+A*m[1],k[2]=u[2]+A*m[2],S[0]=g[0]+B*h[0],S[1]=g[1]+B*h[1],S[2]=g[2]+B*h[2],i.tA=A,i.tB=B,i.pA=k,i.pB=S,i.distance2=s(k,S),!0}const w={tA:0,tB:0,pA:g(),pB:g(),distance2:0},x=new r((()=>({origin:null,vector:null})));export{S as closestLineSegmentDistance2,k as closestLineSegmentPoint,B as closestRayDistance2,h as copy,v as create,M as distance,b as distance2,l as fromPoints,m as fromValues,j as pointAt,d as projectPoint,A as projectPointClamp,p as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.24/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{isNone as t,unwrapOr as s}from\"../../../../../core/maybe.js\";import{throwIfAborted as o}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/accessorSupport/ensureType.js\";import\"../../../../../core/arrayUtils.js\";import\"../../../../../core/has.js\";import\"../../../../../core/accessorSupport/set.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{C as i,a as r,i as d}from\"../../../../../chunks/vec3.js\";import{c,a}from\"../../../../../chunks/vec3f64.js\";import{create as p,fromPoints as u,projectPoint as m}from\"../../../../../geometry/support/lineSegment.js\";import{g as h,m as g,c as l}from\"../../../../../chunks/sphere.js\";import{SnappingTypes as f}from\"../../../../../layers/graphics/data/QueryEngineResult.js\";import _ from\"../../../../3d/webgl-engine/lib/Octree.js\";import{extractComponentsEdgeLocationsLayout as b}from\"../../../../3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker.js\";let j=class{constructor(){this._idToComponent=new Map,this._components=new _((e=>e.bounds)),this._edges=new _((e=>e.bounds)),this._tmpLineSegment=p(),this._tmpP1=c(),this._tmpP2=c(),this._tmpP3=c(),this.remoteClient=null}async fetchCandidates(e,t){await Promise.resolve(),o(t),await this._ensureEdgeLocations(e,t);const s=[];return this._edges.forEachNeighbor((t=>this._addCandidates(e,t,s)),e.bounds),{result:{candidates:s}}}async _ensureEdgeLocations(e,o){const n=[];if(this._components.forEachNeighbor((e=>{if(t(e.info)){const{id:t,uid:s}=e;n.push({id:t,uid:s})}}),e.bounds),!n.length)return;const i={components:n},r=await this.remoteClient.invoke(\"fetchAllEdgeLocations\",i,s(o,{}));for(const t of r.components)this._setFetchEdgeLocations(t)}async add(e){const t=new C(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((s=>{s.component===t&&e.push(s)}),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const s=this._idToComponent.get(e.id);if(t(s)||e.uid!==s.uid)return;const o=b.createView(e.locations),n=new Array(o.count),a=c(),p=c();for(let t=0;t<o.count;t++){const c=l(),u=h(c);o.position0.getVec(t,a),o.position1.getVec(t,p),i(u,u,a,.5),i(u,u,p,.5),r(u,u,e.origin),c[3]=d(u,a);const m=new E(s,t,c);n[t]=m}this._edges.add(n);const{objectIds:u,origin:m}=e;s.info={locations:o,objectIds:u,origin:m}}_addCandidates(e,t,s){const{locations:o,origin:n,objectIds:i}=t.component.info,d=o.position0.getVec(t.index,this._tmpP1),c=o.position1.getVec(t.index,this._tmpP2);r(d,d,n),r(c,c,n);const a=i[o.componentIndex.get(t.index)];this._addEdgeCandidate(e,a,d,c,s),this._addVertexCandidate(e,a,d,s),this._addVertexCandidate(e,a,c,s)}_addEdgeCandidate(e,t,s,o,n){if(!(e.types&f.EDGE))return;const i=h(e.bounds),r=u(s,o,this._tmpLineSegment),c=m(r,i,this._tmpP3);if(!g(e.bounds,c))return null;n.push({type:\"edge\",objectId:t,target:a(c),distance:d(i,c),start:a(s),end:a(o)})}_addVertexCandidate(e,t,s,o){if(!(e.types&f.VERTEX))return;const n=h(e.bounds);if(!g(e.bounds,s))return null;o.push({type:\"vertex\",objectId:t,target:a(s),distance:d(n,s)})}};function y(){return new j}j=e([n(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")],j);class C{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++C.uid}}C.uid=0;class E{constructor(e,t,s){this.component=e,this.index=t,this.bounds=s}}export{j as SceneLayerSnappingSourceWorker,y as default};\n"],"names":["v","t","origin","a","vector","g","h","r","m","o","n","l","i","b","c","f","u","s","e","d","A","j","p","B","q","x","get","direction","w","tA","pB","distance2","k","pA","Math","abs","M","S","tB","constructor","this","_idToComponent","Map","_components","_","bounds","_edges","_tmpLineSegment","_tmpP1","_tmpP2","_tmpP3","remoteClient","Promise","resolve","_ensureEdgeLocations","forEachNeighbor","_addCandidates","result","candidates","info","id","uid","push","length","components","invoke","_setFetchEdgeLocations","C","set","add","component","remove","delete","locations","Array","count","position0","getVec","position1","E","objectIds","index","componentIndex","_addEdgeCandidate","_addVertexCandidate","types","type","objectId","target","distance","start","end","y"],"sourceRoot":""}