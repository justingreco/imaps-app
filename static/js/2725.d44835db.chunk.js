/*! For license information please see 2725.d44835db.chunk.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkimaps_app=globalThis.webpackChunkimaps_app||[]).push([[2725],{29134:(e,t,i)=>{var s=i(51554),a=i(30024),n=i(74938),r=i(87776);const o=(0,s.GH)(class extends s.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteStepperItemKeyEvent=(0,s.yM)(this,"calciteStepperItemKeyEvent",7),this.calciteStepperItemSelect=(0,s.yM)(this,"calciteStepperItemSelect",7),this.calciteStepperItemRegister=(0,s.yM)(this,"calciteStepperItemRegister",7),this.active=!1,this.complete=!1,this.error=!1,this.disabled=!1,this.icon=!1,this.numbered=!1,this.scale="m",this.keyDownHandler=e=>{if(!this.disabled&&e.target===this.el)switch(e.key){case" ":case"Enter":this.emitRequestedItem(),e.preventDefault();break;case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Home":case"End":this.calciteStepperItemKeyEvent.emit({item:e}),e.preventDefault()}},this.emitRequestedItem=()=>{this.disabled||this.calciteStepperItemSelect.emit({position:this.itemPosition,content:this.itemContent})},this.setItemContent=e=>{this.itemPosition=this.getItemPosition();const t=e.target.assignedNodes({flatten:!0});t.length&&(this.itemContent=t),this.registerStepperItem(),this.active&&this.emitRequestedItem()}}disabledWatcher(){this.registerStepperItem()}componentWillLoad(){this.icon=(0,a.g)(this.el,"icon",!1),this.numbered=(0,a.g)(this.el,"numbered",!1),this.layout=(0,a.g)(this.el,"layout",!1),this.scale=(0,a.g)(this.el,"scale","m"),this.parentStepperEl=this.el.parentElement}componentDidRender(){(0,n.u)(this,!0)}render(){return(0,s.h)(s.AA,{"aria-expanded":(0,a.t)(this.active),onClick:this.emitRequestedItem,onKeyDown:this.keyDownHandler},(0,s.h)("div",{class:"container"},(0,s.h)("div",{class:"stepper-item-header"},this.icon?this.renderIcon():null,this.numbered?(0,s.h)("div",{class:"stepper-item-number"},this.getItemPosition()+1,"."):null,(0,s.h)("div",{class:"stepper-item-header-text"},(0,s.h)("span",{class:"stepper-item-title"},this.itemTitle),(0,s.h)("span",{class:"stepper-item-subtitle"},this.itemSubtitle))),(0,s.h)("div",{class:"stepper-item-content"},(0,s.h)("slot",{onSlotchange:this.setItemContent}))))}updateActiveItemOnChange(e){(e.target===this.parentStepperEl||e.composedPath().includes(this.parentStepperEl))&&(this.activePosition=e.detail.position,this.determineActiveItem())}renderIcon(){const e=this.active?"circleF":this.error?"exclamationMarkCircleF":this.complete?"checkCircleF":"circle";return(0,s.h)("calcite-icon",{class:"stepper-item-icon",icon:e,scale:"s"})}determineActiveItem(){this.active=!this.disabled&&this.itemPosition===this.activePosition}registerStepperItem(){this.calciteStepperItemRegister.emit({position:this.itemPosition,content:this.itemContent})}getItemPosition(){return Array.prototype.indexOf.call(this.parentStepperEl.querySelectorAll("calcite-stepper-item"),this.el)}get el(){return this}static get watchers(){return{disabled:["disabledWatcher"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host([scale=s]){--calcite-stepper-item-spacing-unit-s:0.25rem;--calcite-stepper-item-spacing-unit-m:0.75rem;--calcite-stepper-item-spacing-unit-l:1rem;font-size:var(--calcite-font-size--1);line-height:1rem;-webkit-margin-end:0.25rem;margin-inline-end:0.25rem}:host([scale=s]) .stepper-item-subtitle{font-size:var(--calcite-font-size--2);line-height:1rem}:host([scale=m]){--calcite-stepper-item-spacing-unit-s:0.5rem;--calcite-stepper-item-spacing-unit-m:1rem;--calcite-stepper-item-spacing-unit-l:1.25rem;font-size:var(--calcite-font-size-0);line-height:1.25rem;-webkit-margin-end:0.5rem;margin-inline-end:0.5rem}:host([scale=m]) .stepper-item-subtitle{font-size:var(--calcite-font-size--1);line-height:1rem}:host([scale=l]){--calcite-stepper-item-spacing-unit-s:0.75rem;--calcite-stepper-item-spacing-unit-m:1.25rem;--calcite-stepper-item-spacing-unit-l:1.5rem;font-size:var(--calcite-font-size-1);line-height:1.5rem;-webkit-margin-end:0.75rem;margin-inline-end:0.75rem}:host([scale=l]) .stepper-item-subtitle{font-size:var(--calcite-font-size-0);line-height:1.25rem}:host{position:relative;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;-ms-flex-direction:column;flex-direction:column;margin-bottom:var(--calcite-stepper-item-spacing-unit-s)}:host .container{position:relative;display:-ms-flexbox;display:flex;-ms-flex-positive:1;flex-grow:1;cursor:pointer;-ms-flex-direction:column;flex-direction:column;border-width:0px;border-top-width:2px;border-style:solid;border-color:var(--calcite-ui-border-3);color:var(--calcite-ui-text-3);-webkit-text-decoration-line:none;text-decoration-line:none;outline:2px solid transparent;outline-offset:2px;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host{outline-offset:0;outline-color:transparent;-webkit-transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out;transition:outline-offset 100ms ease-in-out, outline-color 100ms ease-in-out}:host(:focus){outline:2px solid var(--calcite-ui-brand);outline-offset:2px}:host .stepper-item-header{display:-ms-flexbox;display:flex;cursor:pointer;-ms-flex-align:start;align-items:flex-start}:host .stepper-item-content,:host .stepper-item-header{-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);padding-block:var(--calcite-stepper-item-spacing-unit-l);-webkit-padding-end:var(--calcite-stepper-item-spacing-unit-m);padding-inline-end:var(--calcite-stepper-item-spacing-unit-m);text-align:start}:host .stepper-item-header *{display:-ms-inline-flexbox;display:inline-flex;-ms-flex-align:center;align-items:center;-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-content{display:none;width:100%;-ms-flex-direction:column;flex-direction:column;font-size:var(--calcite-font-size--2);line-height:1.375}:host .stepper-item-icon{-webkit-margin-end:var(--calcite-stepper-item-spacing-unit-m);margin-inline-end:var(--calcite-stepper-item-spacing-unit-m);margin-top:1px;display:-ms-inline-flexbox;display:inline-flex;height:0.75rem;-ms-flex-negative:0;flex-shrink:0;-ms-flex-item-align:start;align-self:flex-start;color:var(--calcite-ui-text-3);opacity:var(--calcite-ui-opacity-disabled);-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}:host .stepper-item-header-text{-ms-flex-direction:column;flex-direction:column;text-align:initial;-webkit-margin-end:auto;margin-inline-end:auto}:host .stepper-item-title,:host .stepper-item-subtitle{display:-ms-flexbox;display:flex;width:100%}:host .stepper-item-title{margin-bottom:0.25rem;font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-2)}:host .stepper-item-subtitle{color:var(--calcite-ui-text-3)}:host .stepper-item-number{font-weight:var(--calcite-font-weight-medium);color:var(--calcite-ui-text-3);-webkit-transition-duration:150ms;transition-duration:150ms;-webkit-transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-margin-end:var(--calcite-stepper-item-spacing-unit-m);margin-inline-end:var(--calcite-stepper-item-spacing-unit-m)}:host([disabled]){pointer-events:none;cursor:default;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:var(--calcite-ui-opacity-disabled)}:host([disabled]) ::slotted([calcite-hydrated][disabled]),:host([disabled]) [calcite-hydrated][disabled]{opacity:1}:host([complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([complete]) .container .stepper-item-icon{color:var(--calcite-ui-brand)}:host([error]) .container{border-top-color:var(--calcite-ui-danger)}:host([error]) .container .stepper-item-number{color:var(--calcite-ui-danger)}:host([error]) .container .stepper-item-icon{opacity:1;color:var(--calcite-ui-danger)}:host(:hover:not([disabled]):not([active])) .container,:host(:focus:not([disabled]):not([active])) .container{border-top-color:var(--calcite-ui-brand)}:host(:hover:not([disabled]):not([active])) .container .stepper-item-title,:host(:focus:not([disabled]):not([active])) .container .stepper-item-title{color:var(--calcite-ui-text-1)}:host(:hover:not([disabled]):not([active])) .container .stepper-item-subtitle,:host(:focus:not([disabled]):not([active])) .container .stepper-item-subtitle{color:var(--calcite-ui-text-2)}:host([error]:hover:not([disabled]):not([active])) .container,:host([error]:focus:not([disabled]):not([active])) .container{border-top-color:var(--calcite-ui-danger-hover)}:host([active]) .container{border-top-color:var(--calcite-ui-brand)}:host([active]) .container .stepper-item-title{color:var(--calcite-ui-text-1)}:host([active]) .container .stepper-item-subtitle{color:var(--calcite-ui-text-2)}:host([active]) .container .stepper-item-number{color:var(--calcite-ui-brand)}:host([active]) .container .stepper-item-icon{color:var(--calcite-ui-brand);opacity:1}:host([layout=vertical]) .container{margin-left:0px;margin-right:0px;margin-top:0px;-ms-flex:1 1 auto;flex:1 1 auto;border-top-width:0px;border-style:solid;border-color:var(--calcite-ui-border-3);padding-top:0px;padding-bottom:0px;border-inline-start-width:2px;-webkit-padding-start:var(--calcite-stepper-item-spacing-unit-l);padding-inline-start:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical]) .container .stepper-item-icon{-ms-flex-order:3;order:3;margin-top:1px;margin-bottom:0px;-webkit-padding-start:var(--calcite-stepper-item-spacing-unit-s);padding-inline-start:var(--calcite-stepper-item-spacing-unit-s);-webkit-margin-start:auto;margin-inline-start:auto}:host([layout=vertical]) .container .stepper-item-header{-webkit-padding-end:0px;padding-inline-end:0px}:host([layout=vertical]) .container .stepper-item-content{padding:0px}:host([layout=vertical][active]) .container .stepper-item-content{display:-ms-flexbox;display:flex}:host([layout=vertical][active]) .container .stepper-item-content ::slotted(:last-child){margin-bottom:var(--calcite-stepper-item-spacing-unit-l)}:host([layout=vertical][complete]) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][complete]:hover:not([disabled]):not([active])) .container,:host([layout=vertical][complete]:focus:not([disabled]):not([active])) .container{border-color:var(--calcite-ui-brand)}:host([layout=vertical][error]) .container{border-color:var(--calcite-ui-danger)}:host([layout=vertical][active]) .container{border-color:var(--calcite-ui-brand)}:host([layout=vertical]:hover:not([disabled]):not([active])) .container,:host([layout=vertical]:focus:not([disabled]):not([active])) .container{border-color:rgba(0, 122, 194, 0.5)}:host([layout=vertical][error]:hover:not([disabled]):not([active])) .container,:host([layout=vertical][error]:focus:not([disabled]):not([active])) .container{border-color:var(--calcite-ui-danger-hover)}"}},[1,"calcite-stepper-item",{active:[1540],complete:[516],error:[4],disabled:[516],itemTitle:[1,"item-title"],itemSubtitle:[1,"item-subtitle"],layout:[1537],icon:[1028],numbered:[1028],scale:[1537]},[[16,"calciteStepperItemChange","updateActiveItemOnChange"]]]);function l(){if("undefined"===typeof customElements)return;["calcite-stepper-item","calcite-icon"].forEach((e=>{switch(e){case"calcite-stepper-item":customElements.get(e)||customElements.define(e,o);break;case"calcite-icon":customElements.get(e)||(0,r.d)()}}))}l()},74037:(e,t,i)=>{var s=i(51554);const a=(0,s.GH)(class extends s.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.calciteStepperItemChange=(0,s.yM)(this,"calciteStepperItemChange",7),this.icon=!1,this.layout="horizontal",this.numbered=!1,this.scale="m",this.itemMap=new Map,this.items=[],this.enabledItems=[]}contentWatcher(){"horizontal"===this.layout&&(!this.stepperContentContainer&&this.requestedContent&&this.addHorizontalContentContainer(),this.updateContent(this.requestedContent))}componentDidLoad(){this.currentPosition||this.calciteStepperItemChange.emit({position:0})}componentWillLoad(){"horizontal"!==this.layout||this.stepperContentContainer||this.addHorizontalContentContainer()}render(){return(0,s.h)("slot",null)}calciteStepperItemKeyEvent(e){const t=e.detail.item,i=e.target,s=0===this.itemIndex(i),a=this.itemIndex(i)===this.enabledItems.length-1;switch(t.key){case"ArrowDown":case"ArrowRight":a?this.focusFirstItem():this.focusNextItem(i);break;case"ArrowUp":case"ArrowLeft":s?this.focusLastItem():this.focusPrevItem(i);break;case"Home":this.focusFirstItem();break;case"End":this.focusLastItem()}}registerItem(e){const t=e.target,{content:i,position:s}=e.detail;i&&t.active&&(this.requestedContent=i),this.itemMap.set(t,s),this.items=this.sortItems(),this.enabledItems=this.filterItems()}updateItem(e){e.detail.content&&(this.requestedContent=e.detail.content),this.currentPosition=e.detail.position,this.calciteStepperItemChange.emit({position:this.currentPosition})}async nextStep(){const e=this.getEnabledStepIndex(this.currentPosition+1,"next");"number"===typeof e&&this.emitChangedItem(e)}async prevStep(){const e=this.getEnabledStepIndex(this.currentPosition-1,"previous");"number"===typeof e&&this.emitChangedItem(e)}async goToStep(e){const t=e-1;this.currentPosition!==t&&this.emitChangedItem(t)}async startStep(){const e=this.getEnabledStepIndex(0,"next");"number"===typeof e&&this.emitChangedItem(e)}async endStep(){const e=this.getEnabledStepIndex(this.items.length-1,"previous");"number"===typeof e&&this.emitChangedItem(e)}getEnabledStepIndex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next";var i;const{items:s,currentPosition:a}=this;let n=e;for(;null===(i=s[n])||void 0===i?void 0:i.disabled;)n+="previous"===t?-1:1;return n!==a&&n<s.length&&n>=0?n:null}addHorizontalContentContainer(){this.stepperContentContainer=document.createElement("div"),this.stepperContentContainer.classList.add("calcite-stepper-content"),this.el.insertAdjacentElement("beforeend",this.stepperContentContainer)}emitChangedItem(e){this.currentPosition=e,this.calciteStepperItemChange.emit({position:e})}focusFirstItem(){const e=this.enabledItems[0];this.focusElement(e)}focusLastItem(){const e=this.enabledItems[this.enabledItems.length-1];this.focusElement(e)}focusNextItem(e){const t=this.itemIndex(e),i=this.enabledItems[t+1]||this.enabledItems[0];this.focusElement(i)}focusPrevItem(e){const t=this.itemIndex(e),i=this.enabledItems[t-1]||this.enabledItems[this.enabledItems.length-1];this.focusElement(i)}itemIndex(e){return this.enabledItems.indexOf(e)}focusElement(e){e.focus()}sortItems(){const{itemMap:e}=this;return Array.from(e.keys()).sort(((t,i)=>e.get(t)-e.get(i)))}filterItems(){return this.items.filter((e=>!e.disabled))}updateContent(e){this.stepperContentContainer.innerHTML="",this.stepperContentContainer.append(...e)}get el(){return this}static get watchers(){return{requestedContent:["contentWatcher"]}}static get style(){return"@-webkit-keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in{0%{opacity:0}100%{opacity:1}}@-webkit-keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-down{0%{opacity:0;-webkit-transform:translate3D(0, -5px, 0);transform:translate3D(0, -5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;-webkit-transform:translate3D(0, 5px, 0);transform:translate3D(0, 5px, 0)}100%{opacity:1;-webkit-transform:translate3D(0, 0, 0);transform:translate3D(0, 0, 0)}}@-webkit-keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}@keyframes in-scale{0%{opacity:0;-webkit-transform:scale3D(0.95, 0.95, 1);transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;-webkit-transform:scale3D(1, 1, 1);transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-duration:var(--calcite-animation-timing);animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{-webkit-animation-name:in;animation-name:in}.calcite-animate__in-down{-webkit-animation-name:in-down;animation-name:in-down}.calcite-animate__in-up{-webkit-animation-name:in-up;animation-name:in-up}.calcite-animate__in-scale{-webkit-animation-name:in-scale;animation-name:in-scale}:root{--calcite-popper-transition:var(--calcite-animation-timing)}:host([hidden]){display:none}:host{position:relative;display:-ms-flexbox;display:flex;width:100%;min-width:100%;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:stretch;align-items:stretch;-ms-flex-pack:justify;justify-content:space-between}:host([layout=vertical]){-ms-flex:1 1 auto;flex:1 1 auto;-ms-flex-direction:column;flex-direction:column}:host ::slotted(.calcite-stepper-content){display:-ms-flexbox;display:flex;width:100%;min-width:100%;-ms-flex-direction:column;flex-direction:column;-ms-flex-wrap:wrap;flex-wrap:wrap}"}},[1,"calcite-stepper",{icon:[516],layout:[513],numbered:[516],scale:[513],requestedContent:[1040],nextStep:[64],prevStep:[64],goToStep:[64],startStep:[64],endStep:[64]},[[0,"calciteStepperItemKeyEvent","calciteStepperItemKeyEvent"],[0,"calciteStepperItemRegister","registerItem"],[0,"calciteStepperItemSelect","updateItem"]]]);function n(){if("undefined"===typeof customElements)return;["calcite-stepper"].forEach((e=>{if("calcite-stepper"===e)customElements.get(e)||customElements.define(e,a)}))}n()},54134:(e,t,i)=>{var s,a,n,r,o,l;i.d(t,{NH:()=>o,Xo:()=>n,fu:()=>s}),function(e){e[e.INNER=0]="INNER",e[e.OUTER=1]="OUTER"}(s||(s={})),function(e){e[e.REGULAR=0]="REGULAR",e[e.HAS_NORTH_POLE=1]="HAS_NORTH_POLE",e[e.HAS_SOUTH_POLE=2]="HAS_SOUTH_POLE",e[e.HAS_BOTH_POLES=3]="HAS_BOTH_POLES"}(a||(a={})),function(e){e[e.NORTH=0]="NORTH",e[e.NORTH_EAST=1]="NORTH_EAST",e[e.EAST=2]="EAST",e[e.SOUTH_EAST=3]="SOUTH_EAST",e[e.SOUTH=4]="SOUTH",e[e.SOUTH_WEST=5]="SOUTH_WEST",e[e.WEST=6]="WEST",e[e.NORTH_WEST=7]="NORTH_WEST"}(n||(n={})),function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON"}(r||(r={})),function(e){e[e.Color=0]="Color",e[e.ColorNoRasterImage=1]="ColorNoRasterImage",e[e.Highlight=2]="Highlight",e[e.Water=3]="Water",e[e.Occluded=4]="Occluded"}(o||(o={})),function(e){e[e.FADING=0]="FADING",e[e.IMMEDIATE=1]="IMMEDIATE",e[e.UNFADED=2]="UNFADED"}(l||(l={}))},97731:(e,t,i)=>{i.d(t,{E6:()=>c,Kj:()=>m,RQ:()=>f,T:()=>r,ep:()=>l,hu:()=>n,kG:()=>h,tM:()=>d,u_:()=>p,yK:()=>o,zF:()=>u});var s=i(6394);i(90045);(0,i(67077).c)();class a{constructor(e){this.message=e}toString(){return`AssertException: ${this.message}`}}function n(e,t){if(!e)throw t=t||"assert",console.log(new Error(t).stack),new a(t)}function r(e,t){e||(t=t||"",console.warn("Verify failed: "+t+"\n"+new Error("verify").stack))}function o(e,t,i,s){let a,n=(i[0]-e[0])/t[0],r=(s[0]-e[0])/t[0];n>r&&(a=n,n=r,r=a);let o=(i[1]-e[1])/t[1],l=(s[1]-e[1])/t[1];if(o>l&&(a=o,o=l,l=a),n>l||o>r)return!1;o>n&&(n=o),l<r&&(r=l);let c=(i[2]-e[2])/t[2],p=(s[2]-e[2])/t[2];return c>p&&(a=c,c=p,p=a),!(n>p||c>r)&&(p<r&&(r=p),!(r<0))}function l(e,t,i,a,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:(0,s.a)();const o=(a[n]-i[n])*(t[0]-e[0])-(a[0]-i[0])*(t[n]-e[n]),l=(a[0]-i[0])*(e[n]-i[n])-(a[n]-i[n])*(e[0]-i[0]);if(0===o)return!1;const c=l/o;return r[0]=e[0]+c*(t[0]-e[0]),r[1]=e[n]+c*(t[n]-e[n]),!0}function c(e,t){return Math.log(e)/Math.log(t)}function p(e,t,i,s){e[12]=t,e[13]=i,e[14]=s}function h(e){return 1===e[0]&&0===e[1]&&0===e[2]&&0===e[3]&&0===e[4]&&1===e[5]&&0===e[6]&&0===e[7]&&0===e[8]&&0===e[9]&&1===e[10]&&0===e[11]&&1===e[15]}function m(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/t)}function u(e,t,i){return 2*Math.atan(Math.sqrt(t*t+i*i)*Math.tan(.5*e)/i)}function d(e,t,i){return 2*Math.atan(t*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}function f(e,t,i){return 2*Math.atan(i*Math.tan(.5*e)/Math.sqrt(t*t+i*i))}},92028:(e,t,i)=>{i.d(t,{D:()=>n});var s=i(72619),a=i(50951);function n(e,t){return null!=e&&(null==t||(t===a.JY.Local?!e.isGeographic||e.isWGS84||e.wkid===s.W.CGCS2000:e.isWebMercator||e.isWGS84||e.wkid===s.W.CGCS2000||e.wkid===s.W.GCSMARS2000||e.wkid===s.W.GCSMARS2000_SPHERE||e.wkid===s.W.GCSMOON2000))}},6934:(e,t,i)=>{i.d(t,{Z:()=>Be});var s=i(27366),a=i(65905),n=i(100),r=i(94172),o=i(8025),l=i(63780),c=(i(93169),i(25243),i(49861)),p=i(69912),h=i(69407),m=i(29479),u=i(40281),d=i(41691),f=i(54472),g=i(92026),b=i(89125),y=i(79803),v=i(92975),w=i(23037),_=i(10064),k=i(66978),x=i(37933),S=i(50951),C=(i(41644),i(76200)),I=i(85015),E=i(84652),T=i(97731);class R{constructor(e){this.typeWorkerQuota=e,this.tasks=new Array,this.numWorkers=0,this.statistics=new D}}class D{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class M{constructor(e,t,i,s){this._workerFunc=e,this._callbackFunc=t,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=s.map((e=>new R(e)))}hasQuota(e){const t=this._clients[e];return!!t&&(this._totalNumWorkers<this._maxTotalNumWorkers||t.numWorkers+t.tasks.length<t.typeWorkerQuota)}push(e){const t=this._clients[e.client];t&&(this._totalNumWorkers<this._maxTotalNumWorkers?(t.numWorkers++,this._totalNumWorkers++,this._workerFunc(e,((e,t)=>this._taskCallback(e,t)))):t.tasks.push(e))}cancel(e){this._taskFinished(e),e._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(e){const t=this._clients[e.client];this._totalNumWorkers--,t.numWorkers--,t.statistics.requests++,t.statistics.size+=e.size||0,t.statistics.duration+=e.duration||0,t.statistics.speed=t.statistics.duration>0?t.statistics.size/t.statistics.duration:0,(0,T.hu)(t.numWorkers>=0),this._next()}_next(){for(const e of this._clients)if(e&&e.numWorkers<e.typeWorkerQuota&&this._processQueue(e))return;for(const e of this._clients)if(e&&this._processQueue(e))return}_processQueue(e){for(;e.tasks.length>0;)if(this._workerFunc(e.tasks.shift(),((e,t)=>this._taskCallback(e,t))))return e.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(e,t){e._cancelled||(this._callbackFunc(e,t),this._taskFinished(e))}getStatsForType(e){const t=this._clients[e];return t?{quota:t.typeWorkerQuota,workers:t.numWorkers,queueSize:t.tasks.length,requestStats:t.statistics}:null}get test(){const e=this;return{set workerFunc(t){e._workerFunc=t}}}}var L=i(99912);let O=class extends I.Z{constructor(){super(...arguments),this._tasks=new Map,this._onLoadQueue=new Array,this._doneQueue=new Array,this.updating=!1}setup(e,t,i){this._loadQueue=new M(((e,t)=>this._startLoading(e,t)),((e,t)=>this._doneLoadingCB(e,t)),e,t),i&&(this._frameTask=i.registerTask(L.T8.STREAM_DATA_LOADER,this))}destroy(){this._frameTask=(0,g.hw)(this._frameTask),this._tasks.forEach((e=>(0,g.IM)(e.abortController))),this._loadQueue=(0,g.SC)(this._loadQueue),this._onLoadQueue=null,this._doneQueue=null,this._tasks=null}hasDownloadSlots(e){return this._loadQueue.hasQuota(e)}request(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const a=(0,k.hh)();a.__signal=(0,g.pC)(s)?s.signal:null;const n=this._createOrUpdateTask(e,t,i,s,a);return(0,k.fu)(s,(()=>this._cancelRequest(n,a))),a.promise}_createTask(e,t,i,s,a,n){const r=new z(e,t,i,s,a);return this._updateTask(r,n),this._tasks.set(a,r),1===this._tasks.size&&this._set("updating",!0),this._loadQueue.push(r),r}_cancelRequest(e,t){(0,l.e$)(e.resolvers,t),t.reject((0,k.zE)()),0===e.resolvers.length&&(e.status===Z.DOWNLOADING&&(e.status=Z.CANCELLED,this._loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=Z.CANCELLED,this._tasks.delete(e.key),0===this._tasks.size&&this._set("updating",!1))}_updateTask(e,t){e.resolvers.push(t)}_createOrUpdateTask(e,t,i,s,a){const n=function(e,t,i){return`${e}:${t}:${i}`}((0,g.pC)(s)&&s.uid||e,t,i),r=this._tasks.get(n);return r?(this._updateTask(r,a),r):this._createTask(e,s,t,i,n,a)}_doneLoadingCB(e,t){this._loadQueue&&((0,T.hu)(e.status===Z.DOWNLOADING),e.status=Z.DOWNLOADED,this._frameTask?this._doneQueue.push({task:e,err:t}):this._doneLoading(e,t))}get running(){return this._doneQueue.length>0||this._onLoadQueue.length>0}runTask(e){for(;!e.done&&this._onLoadQueue.length>0;){const t=this._onLoadQueue.shift();(0,k.k_)(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this._doneQueue.length>0;){const t=this._doneQueue.shift();t.task.status!==Z.DOWNLOADED&&(t.err=t.err||(0,k.zE)()),this._doneLoading(t.task,t.err),e.madeProgress()}}_doneLoading(e,t){if(t&&!(0,k.D_)(t)&&e.numRetries>0)return--e.numRetries,void this._loadQueue.push(e);let i=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const s of e.resolvers)if(t)(0,k.D_)(t)?s.reject(t):s.reject(new _.Z("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--i;const t=i<=0?e.result:(0,E.d9)(e.result);s.resolve(t)}this._tasks.delete(e.key),0===this._tasks.size&&this._set("updating",!1)}_startLoading(e,t){if(e.status===Z.CANCELLED)return!1;let i,s;switch(e.startTime=performance.now(),e.status=Z.DOWNLOADING,e.docType){case"binary":s="array-buffer",i=0;break;case"image":s="image";break;case"image+type":s="array-buffer";break;default:s="json"}e.abortController=new AbortController;const a=e.abortController.signal;e.request=(0,C.default)(e.url,{...e.options,responseType:s,timeout:i,signal:a});let n=()=>{};const r=i=>{e.duration=performance.now()-e.startTime,e.size=i instanceof ArrayBuffer?i.byteLength:e.size||0,e.result=i,this._frameTask?this._onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},o=i=>{e.status===Z.DOWNLOADING&&t(e,i),n()};return"image+type"!==e.docType?(e.request.then((e=>r(e.data)),o),!0):(e.request.then((t=>{const l=t.data,c=function(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return 137===t[0]&&80===t[1]?"image/png":71===t[0]&&73===t[1]?"image/gif":66===t[0]&&77===t[1]?"image/bmp":255===t[0]&&216===t[1]?"image/jpeg":"unknown"}(l);if(s="image",e.size=l.byteLength,"unknown"===c)return e.request=(0,C.default)(e.url,{responseType:s,timeout:i,signal:a}),void e.request.then((e=>r(e.data)),o);const p=new Blob([l],{type:c}),h=window.URL.createObjectURL(p);n=()=>window.URL.revokeObjectURL(h),e.request=(0,C.default)(h,{responseType:s,timeout:i,signal:a}),e.request.then((e=>r(new W(e.data,c,n))),o)}),o),!0)}get test(){return{loadQueue:this._loadQueue}}};(0,s._)([(0,c.Cb)({readOnly:!0})],O.prototype,"updating",void 0),O=(0,s._)([(0,p.j)("esri.views.3d.support.StreamDataLoader")],O);const A=0;class W{constructor(e,t,i){this.image=e,this.type=t,this.release=i}get isOpaque(){return"image/jpeg"===this.type}}class z extends class{constructor(e){this.client=e,this._cancelled=!1,this.size=0,this.duration=0}}{constructor(e,t,i,s,a){super(s),this.url=e,this.options=t,this.docType=i,this.key=a,this.result=null,this.status=Z.QUEUED,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0,this.numRetries=A}}var Z;!function(e){e[e.QUEUED=1]="QUEUED",e[e.DOWNLOADING=2]="DOWNLOADING",e[e.DOWNLOADED=3]="DOWNLOADED",e[e.CANCELLED=4]="CANCELLED"}(Z||(Z={}));var B=i(54134),N=i(11186),P=i(71353),F=i(65156),q=i(16889),G=i(68860),H=i(53866),U=i(78952),Q=i(81753),j=i(22824);class Y{constructor(e){const t=Y.checkUnsupported(e);if((0,g.pC)(t))throw t;const i=(0,g.Wg)(e);this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=(0,y.jF)(this.spatialReference)||(0,v.BZ)(this.spatialReference)||(0,v.V2)(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const s=i.lods.reduce(((e,t,i)=>(t.level<e.min&&(e.min=t.level,e.minIndex=i),e.max=Math.max(e.max,t.level),e)),{min:1/0,minIndex:0,max:-1/0}),a=i.lods[s.minIndex],n=2**a.level;let r=a.resolution*n,o=a.scale*n;this.levels=new Array(s.max+1);for(let l=0;l<this.levels.length;l++)this.levels[l]={resolution:r,scale:o,tileSize:[r*i.size[0],r*i.size[1]]},r/=2,o/=2}clone(){return new Y(this.toTileInfo())}toTileInfo(){return new j.Z({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map(((e,t)=>({level:t,scale:e.scale,resolution:e.resolution})))})}getExtent(e,t,i,s){const a=this.levels[e],n=a.tileSize[0],r=a.tileSize[1];s[0]=this.origin[0]+i*n,s[2]=this.origin[0]+(i+1)*n,s[3]=this.origin[1]-t*r,s[1]=this.origin[1]-(t+1)*r}convertExtentToRadians(e,t){this._isWebMercator?(t[0]=(0,Q.tp)(e[0]),t[1]=(0,Q.mZ)(e[1]),t[2]=(0,Q.tp)(e[2]),t[3]=(0,Q.mZ)(e[3])):this._isGCS&&(t[0]=(0,q.Vl)(e[0]),t[1]=(0,q.Vl)(e[1]),t[2]=(0,q.Vl)(e[2]),t[3]=(0,q.Vl)(e[3]))}getExtentGeometry(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new H.Z;return this.getExtent(e,t,i,V),s.spatialReference=this.spatialReference,s.xmin=V[0],s.ymin=V[1],s.xmax=V[2],s.ymax=V[3],s.zmin=void 0,s.zmax=void 0,s}ensureMaxLod(e){if(null==e)return!1;let t=!1;for(;this.levels.length<=e;){const e=this.levels[this.levels.length-1],i=e.resolution/2;this.levels.push({resolution:i,scale:e.scale/2,tileSize:[i*this.pixelSize,i*this.pixelSize]}),t=!0}return t}capMaxLod(e){this.levels.length>e+1&&(this.levels.length=e+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(e){return this.levels[0].scale/2**e}levelAtScale(e){const t=this.levels[0].scale;return e>=t?0:Math.log(t/e)*Math.LOG2E}resolutionAtLevel(e){return this.levels[0].resolution/2**e}compatibleWith(e){if(!(e instanceof Y)){if(Y.checkUnsupported(e))return!1;e=new Y(e)}if(!e.spatialReference.equals(this.spatialReference))return!1;if(e.pixelSize!==this.pixelSize)return!1;const t=Math.min(this.levels.length,e.levels.length)-1,i=this.levels[t].resolution;let s=.5*i;return!(!(0,q.W8)(e.origin[0],this.origin[0],s)||!(0,q.W8)(e.origin[1],this.origin[1],s))&&(s=.5*i/2**t/this.pixelSize*12,(0,q.W8)(i,e.levels[t].resolution,s))}rootTilesInExtent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;const s=new Array,a=this.levels[0].tileSize;if((0,g.Wi)(e)||0===a[0]||0===a[1])return s;Y.computeRowColExtent(e,a,this.origin,V);let n=V[1],r=V[3],o=V[0],l=V[2];const c=l-o,p=r-n;if(c*p>i){const e=Math.floor(Math.sqrt(i));p>e&&(n=n+Math.floor(.5*p)-Math.floor(.5*e),r=n+e),c>e&&(o=o+Math.floor(.5*c)-Math.floor(.5*e),l=o+e)}for(let h=n;h<r;h++)for(let e=o;e<l;e++)s.push([0,h,e]);return(0,g.pC)(t)&&(t[0]=this.origin[0]+o*a[0],t[1]=this.origin[1]-r*a[1],t[2]=this.origin[0]+l*a[0],t[3]=this.origin[1]-n*a[1]),s}static computeRowColExtent(e,t,i,s){const a=.001*(e[2]-e[0]+(e[3]-e[1]));s[0]=Math.max(0,Math.floor((e[0]+a-i[0])/t[0])),s[2]=Math.max(0,Math.ceil((e[2]-a-i[0])/t[0])),s[1]=Math.max(0,Math.floor((i[1]-e[3]+a)/t[1])),s[3]=Math.max(0,Math.ceil((i[1]-e[1]-a)/t[1]))}static isPowerOfTwo(e){const t=e.lods,i=t[0].resolution*2**t[0].level;return!t.some((e=>!(0,q.Y8)(e.resolution,i/2**e.level)))}static hasGapInLevels(e){const t=e.lods.map((e=>e.level));t.sort(((e,t)=>e-t));for(let i=1;i<t.length;i++)if(t[i]!==t[0]+i)return!0;return!1}static tileSizeSupported(e){const t=e.size[1];return t===e.size[0]&&0==(t&t-1)&&t>=128&&t<=512}static hasOriginPerLODs(e){const t=e.origin;return e.lods.some((e=>null!=e.origin&&(e.origin[0]!==t.x||e.origin[1]!==t.y)))}static getMissingTileInfoError(){return new _.Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}static checkUnsupported(e){return(0,g.Wi)(e)?$():e.lods.length<1?new _.Z("tilingscheme:generic","Tiling scheme must have at least one level"):Y.isPowerOfTwo(e)?Y.hasGapInLevels(e)?new _.Z("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Y.tileSizeSupported(e)?Y.hasOriginPerLODs(e)?new _.Z("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new _.Z("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new _.Z("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(e,t){const i=e[2]-e[0],s=e[3]-e[1],a=(0,G.c9)(t),n=1.2*Math.max(i,s),r=256,o=new Y(new j.Z({size:[r,r],origin:{x:e[0]-.5*(n-i),y:e[3]+.5*(n-s)},lods:[{level:0,resolution:n/r,scale:1/(r/96*.0254/(n*a))}],spatialReference:t}));return o.ensureMaxLod(20),o}static makeWebMercatorAuxiliarySphere(e){const t=new Y(Y.WebMercatorAuxiliarySphereTileInfo);return t.ensureMaxLod(e),t}static makeGCSWithTileSize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;const s=256/t,a=new Y(new j.Z({size:[t,t],origin:{x:-180,y:90,spatialReference:e},spatialReference:e,lods:[{level:0,resolution:.703125*s,scale:295497598.570834*s}]}));return a.ensureMaxLod(i),a}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}function $(){return new _.Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information")}Y.WebMercatorAuxiliarySphereTileInfo=new j.Z({size:[256,256],origin:{x:-20037508.342787,y:20037508.342787,spatialReference:U.Z.WebMercator},spatialReference:U.Z.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527.591555}]}),Y.WebMercatorAuxiliarySphere=Y.makeWebMercatorAuxiliarySphere(19);const V=(0,F.Ue)(),K=((0,q.oK)(q._3/10),(0,F.Ue)());Y.WebMercatorAuxiliarySphere.getExtent(0,0,0,K);(0,F.Ue)([-180,-90,180,90]);const X=(0,P.c)(),J=(0,P.c)(),ee=(0,P.c)(),te=(0,P.c)();function ie(e,t,i,s){(0,N.c)(X,i),X[s]=t[s];const a=(0,N.b)(X,X,t),n=(0,N.b)(J,e,t),r=(0,N.e)(n,a),o=(0,N.e)(a,a);let l;l=r<=0?t:o<=r?i:(0,N.a)(X,t,(0,N.g)(a,a,r/o));const c=(0,N.b)(X,e,l);return Math.PI/2-Math.atan(c[2]/Math.sqrt(c[0]*c[0]+c[1]*c[1]))}const se=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=e.extent;if((0,g.Wi)(s))return!1;if(0===i)return(0,F.BD)(s,t);const a=Math.min(s[2]-s[0],s[3]-s[1]);return(0,F.Zm)(s,t,i*a)},tiltToExtentEdge:function(e,t,i){const s=e.extent;if((0,g.Wi)(s))return 0;ee[0]=s[0],ee[1]=s[1],ee[2]=i,te[0]=s[2],te[1]=s[3],te[2]=i;let a=1/0,n=1/0;return t[0]<ee[0]?a=ie(t,ee,te,0):t[0]>te[0]&&(a=ie(t,te,ee,0)),t[1]<ee[1]?n=ie(t,ee,te,1):t[1]>te[1]&&(n=ie(t,te,ee,1)),Math.min(a,n)},checkIfTileInfoSupportedForViewSR:function(e,t,i){if((0,g.Wi)(e))return $();if(e.spatialReference.isGeographic&&!(0,y.jF)(e.spatialReference))return new _.Z("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const s=Y.checkUnsupported(e);if((0,g.pC)(s))return s;if((0,g.Wi)(i))return new _.Z("tilingscheme:extent-not-exist","The layer does not provide a layer extent.");const a=function(e,t){const i=e.lods,s=i[0].resolution*2**i[0].level,a=[s*e.size[0],s*e.size[1]],n=[e.origin.x,e.origin.y],r=(0,F.oJ)(t),o=(0,F.Ue)();Y.computeRowColExtent(r,a,n,o);const l=(o[2]-o[0])*(o[3]-o[1]);if(l>64){const t=i[0].scale*2**i[0].level;let a=Math.max((r[3]-r[1])/e.size[1],(r[2]-r[0])/e.size[0])*t/s;const n=Math.floor(Math.log(a)/Math.log(10));return a=Math.ceil(a/10**n)*10**n,new _.Z("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(t).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+a.toLocaleString()+".",{level0Scale:t,suggestedLevel0Scale:a,requiredNumRootTiles:l,allowedNumRootTiles:64})}return null}(e,i);if(a)return a;const n=e.spatialReference;return(0,g.pC)(t)&&!(n.equals(t)||t.isWGS84&&n.isWebMercator)?new _.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null}},Symbol.toStringTag,{value:"Module"}));const ae=Object.freeze(Object.defineProperty({__proto__:null,isInsideExtent:function(){return!0},tiltToExtentEdge:function(){return 0},checkIfTileInfoSupportedForViewSR:function(e,t){if((0,g.Wi)(e))return $();const i=e.lods.length-1,s=e.spatialReference,a=(0,y.jF)(s)||(0,v.BZ)(s)||(0,v.V2)(s);if(s.isWebMercator){if(!Y.makeWebMercatorAuxiliarySphere(i).compatibleWith(e))return new _.Z("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!a)return new _.Z("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Y.makeGCSWithTileSize(e.spatialReference,e.size[0],i).compatibleWith(e))return e.spatialReference.isWGS84?new _.Z("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new _.Z("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}return(0,g.pC)(t)&&!e.spatialReference.equals(t)?new _.Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene"):void 0}},Symbol.toStringTag,{value:"Module"})),ne={[S.JY.Global]:ae,[S.JY.Local]:se};function re(e,t,i,s){return ne[s].checkIfTileInfoSupportedForViewSR(e,i,t)}function oe(e,t,i){const s=(0,x.mt)(e);if((0,g.pC)(s)){if(!u.Z.isCollection(s))return{tileInfo:s.tileInfo,fullExtent:s.fullExtent};{const e=s.find((e=>null==re(e.tileInfo,e.fullExtent,t,i)));if(e)return{tileInfo:e.tileInfo,fullExtent:e.fullExtent}}}return{tileInfo:null,fullExtent:null}}B.Xo.NORTH,B.Xo.EAST,B.Xo.SOUTH,B.Xo.WEST,B.Xo.NORTH_EAST,B.Xo.SOUTH_EAST,B.Xo.SOUTH_WEST,B.Xo.NORTH_WEST;var le=i(92028);async function ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await me(e,t),(0,k.k_)(t)}async function pe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{basemap:i,view:s}=e;if((0,k.k_)(t),"spatialReferenceLocked"in s&&!s.spatialReferenceLocked)return;if(await i.load(t),(0,k.k_)(t),0===i.baseLayers.length)return;const a=i.baseLayers.getItemAt(0);if(!(0,x.iC)(a))return;if(i.spatialReference){if(s.spatialReference.equals(i.spatialReference))return;he()}await a.load(t),(0,k.k_)(t);const n=(("supportedSpatialReferences"in a?a.supportedSpatialReferences:null)||["tileInfo"in a?a.tileInfo.spatialReference:null]).filter(Boolean);0!==n.length&&n.every((e=>!s.spatialReference.equals(e)))&&he()}function he(){throw new _.Z("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function me(e,t){const{basemap:i,view:s}=e;if(await i.load(t),0===i.baseLayers.length)return;const a=i.baseLayers.concat(i.referenceLayers).toArray().filter((e=>!(0,x.qq)(e))).map((e=>new _.Z("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:e,operationalLayerType:e.operationalLayerType||"unknown"})));if(a.length)throw a[0];const n=i.baseLayers.getItemAt(0);if((0,x.qq)(n)){try{await n.load(t)}catch(r){const e="basemap-compatibility:unknown-error",t="Unknown basemap compatibility error",{name:i=e,message:s=t,details:a}=r;throw new _.Z(i,s,a)}!function(e,t){const i=t.state.viewingMode;if(!i)return;let s,a;if("wmts"===e?.type){const n=oe(e,t.spatialReference,i);if((0,g.Wi)(n.tileInfo))throw new _.Z("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view");s=n.tileInfo,a=n.fullExtent}else s=e.tileInfo,a=e.fullExtent;if((0,g.Wi)(s))return;if(!(0,le.D)(s.spatialReference,i))throw new _.Z(`basemapgalleryitem:spatial-reference-unsupported-${(0,S.M7)(i)}`,`Basemap spatial reference is unsupported in ${(0,S.M7)(i)} mode`);const n=s.spatialReference.isGeographic,r="vector-tile"===e?.type?s.getOrCreateCompatible(256,n?1:2):null;if(i===S.JY.Global){let t=re(s,a,null,i);if(t&&"vector-tile"===e?.type&&(0,g.pC)(a)&&r&&!re(r,a,null,i)&&(t=null),t){const e=s.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new _.Z(`basemapgalleryitem:tiling-scheme-unsupported-${e}-global`,"Basemap tiling scheme is unsupported in global mode",{error:t})}}else if(Y.checkUnsupported(s))throw new _.Z("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const o=t.get("basemapTerrain.tilingScheme");if(o&&!o.compatibleWith(s)&&("vector-tile"!==e?.type||!r||!o.compatibleWith(r)))throw new _.Z("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}(n,s)}}let ue=class extends((0,d.p)(I.Z)){constructor(e){super(e),this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){const e=()=>this.refresh();this.handles.add([(0,r.YP)((()=>this.basemap?.loadStatus),e),(0,r.YP)((()=>this.compatibilityFunction),e),(0,r.YP)((()=>this.view&&"basemapTerrain"in this.view&&this.view.basemapTerrain?.tilingScheme),e),(0,r.YP)((()=>this.view?.ready),e),(0,r.YP)((()=>this.view?.spatialReference),e)]),this.refresh()}destroy(){this._cancelRefresh(),this.basemap=null,this.compatibilityFunction=null,this.view=null}get _spatialReferenceTask(){return(0,w.Us)(this.view,this.basemap)}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch((()=>{})),this._set("basemap",e)}get spatialReference(){return this._spatialReferenceTask.spatialReference}refresh(){this._cancelRefresh(),this._set("state","loading");const e=this.basemap?.loadStatus;if("loaded"!==e&&"failed"!==e)return;if(!this.compatibilityFunction)return void("loaded"===e?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:i}=t;this.compatibilityFunction(this,{signal:i}).then((()=>(0,r.N1)((()=>!this._spatialReferenceTask.updating),i))).then((()=>{this._set("state","ready"),this._set("error",null)})).catch((e=>{(0,k.D_)(e)||(this._set("state","error"),this._set("error",e))})),this._refreshController=t}_cancelRefresh(){this._refreshController&&(this._refreshController.abort(),this._refreshController=null)}};(0,s._)([(0,c.Cb)({readOnly:!0})],ue.prototype,"_spatialReferenceTask",null),(0,s._)([(0,c.Cb)()],ue.prototype,"basemap",null),(0,s._)([(0,c.Cb)()],ue.prototype,"compatibilityFunction",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],ue.prototype,"error",void 0),(0,s._)([(0,c.Cb)({readOnly:!0})],ue.prototype,"spatialReference",null),(0,s._)([(0,c.Cb)({readOnly:!0})],ue.prototype,"state",void 0),(0,s._)([(0,c.Cb)()],ue.prototype,"view",void 0),ue=(0,s._)([(0,p.j)("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],ue);const de=ue;var fe=i(76243),ge=i(97862);const be=u.Z.ofType(de);let ye=class extends((0,d.p)(f.Z)){constructor(e){super(e),this._loadingProjectionEngine=!1,this.items=new be,this.source=new ge.Z,this.view=null}initialize(){const e=()=>this._recreateItems();this.handles.add([(0,r.YP)((()=>"ready"===this.state?this.compatibilityFunction:null),(()=>this._updateItems())),(0,r.on)((()=>this.source?.basemaps),"change",e,{onListenerAdd:e})])}get activeBasemap(){return this.view?.map?.basemap??null}set activeBasemap(e){if(!this.view.map)return;const t="string"==typeof e?m.default.fromId(e):e;if(!t||!this.view.ready)return this.view.map.basemap=t,void this._clearOverride("activeBasemap");const i=t.spatialReference||this.items?.find((e=>this.basemapEquals(t,e.basemap)))?.spatialReference;if(i&&"spatialReferenceLocked"in this.view&&!this.view.spatialReferenceLocked){const s=this.view.spatialReference;if((0,g.pC)(i)&&!(0,v.fS)(s,i)&&!(0,y.Up)(this.view.spatialReference,i)&&!(0,y.kR)())return this._override("activeBasemap",t),this._loadingProjectionEngine=!0,void(0,y.zD)().then((()=>{this._get("activeBasemap")===e&&(this.view.map.basemap=e,this.view.spatialReference=i,this._clearOverride("activeBasemap"))}),(()=>{})).then((()=>{this._loadingProjectionEngine=!1}));this.view.map.basemap=t,this._clearOverride("activeBasemap"),(0,g.pC)(i)&&!(0,v.fS)(this.view.spatialReference,i)&&(this.view.spatialReference=i)}else this.view.map.basemap=t,this._clearOverride("activeBasemap")}get compatibilityFunction(){return"3d"===this.view?.type?ce:pe}set compatibilityFunction(e){(0,g.pC)(e)?this._override("compatibilityFunction",e):this._clearOverride("compatibilityFunction")}castSource(e){return Array.isArray(e)||u.Z.isCollection(e)?new fe.Z({basemaps:e}):function(e){return e&&"esri.portal.Portal"===e.declaredClass}(e)?new ge.Z({portal:e}):function(e){return e&&!(e instanceof ge.Z)&&(!!e.portal||!!e.query)}(e)?new ge.Z(e):function(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}(e)?e:null}get state(){return this.view?.ready&&this.source?this._loadingProjectionEngine?"loading":"ready":"disabled"}basemapEquals(e,t){return(0,w.Bj)(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(f.Z.isLoadable(this.source)?this.source.load(e):null),Promise.resolve(this)}_recreateItems(){const e=this.source?.basemaps,{view:t,compatibilityFunction:i}=this;this.items.removeAll().forEach((e=>e.destroy())),e&&this.items.addMany(e.map((e=>new de({basemap:e,compatibilityFunction:i,view:t}))))}_updateItems(){for(const e of this.items)e.compatibilityFunction=this.compatibilityFunction,e.view=this.view}};(0,s._)([(0,c.Cb)()],ye.prototype,"_loadingProjectionEngine",void 0),(0,s._)([(0,c.Cb)()],ye.prototype,"activeBasemap",null),(0,s._)([(0,c.Cb)()],ye.prototype,"compatibilityFunction",null),(0,s._)([(0,c.Cb)({readOnly:!0,type:be})],ye.prototype,"items",void 0),(0,s._)([(0,c.Cb)()],ye.prototype,"source",void 0),(0,s._)([(0,b.p)("source")],ye.prototype,"castSource",null),(0,s._)([(0,c.Cb)({readOnly:!0})],ye.prototype,"state",null),(0,s._)([(0,c.Cb)()],ye.prototype,"view",void 0),ye=(0,s._)([(0,p.j)("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],ye);const ve=ye;var we=i(96919),_e=i(78088),ke=i(80532),xe=i(67005);i(80975);const Se="esri-basemap-gallery esri-widget esri-widget--panel-height-only",Ce="esri-basemap-gallery--source-loading",Ie="esri-basemap-gallery__loader",Ee="esri-basemap-gallery__item",Te="esri-basemap-gallery__item-container",Re="esri-basemap-gallery__item-title",De="esri-basemap-gallery__item-thumbnail",Me="esri-basemap-gallery__item--selected",Le="esri-basemap-gallery__item--error",Oe="esri-widget__content--empty",Ae="esri-icon-basemap",We="esri-disabled",ze="esri-widget__loader-animation";let Ze=class extends h.Z{constructor(e,t){super(e,t),this._handles=new n.Z,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=Ae,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new ve}initialize(){const e=this._handles;this.own([(0,r.on)((()=>this.viewModel.items),"change",(t=>{const i="basemap-gallery-item-changes",{added:s,moved:a}=t;e.remove(i),e.add([...s,...a].map((e=>(0,r.YP)((()=>e.state),(()=>this.scheduleRender())))),i),this.scheduleRender()})),e,(0,r.gx)((()=>this.source),(()=>this.viewModel.load()),{initial:!0,once:!0})])}destroy(){this._handles.destroy()}loadDependencies(){return Promise.resolve().then(i.bind(i,89794))}render(){const e="loading"===this.get("source.state"),t=this.disabled||"disabled"===this.get("viewModel.state"),i=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),s={[Ce]:e,[We]:t},a=e?(0,xe.u)("div",{class:Ie,key:"esri-basemap-gallery__loader"}):null,n=e?null:i.length>0?(0,xe.u)("ul",{class:Te,key:"esri-basemap-gallery__item-container",role:"menu"},i):(0,xe.u)("div",{class:Oe,key:"esri-basemap-gallery__empty-message"},(0,xe.u)(we.X6,{level:this.headingLevel},this.messages.noBasemaps));return(0,xe.u)("div",{class:this.classes(Se,s)},a,n)}_handleClick(e){const t=e.currentTarget["data-item"];"ready"===t.state&&(this.viewModel.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||(0,a.V)("esri/themes/base/images/basemap-toggle-64.svg"),i=e.get("basemap.title"),s=e.get("basemap.portalItem.snippet"),n=e.get("error.message")||s||i,{viewModel:r}=this,o=this.disabled||"disabled"===r.state||"ready"!==e.state?-1:0,l=r.basemapEquals(e.basemap,this.activeBasemap),c="loading"===r.state,p={[Me]:l,[Le]:"error"===e.state};return(0,xe.u)("li",{"aria-selected":l.toString(),bind:this,class:this.classes(Ee,p),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:o,title:n},(0,xe.u)("img",{alt:"",class:De,src:t}),(0,xe.u)("div",{class:Re},i),"loading"===e.state||l&&c?(0,xe.u)("calcite-scrim",null,(0,xe.u)("span",{"aria-hidden":"true",role:"presentation",class:ze})):null)}};(0,s._)([(0,o.B)("viewModel.activeBasemap")],Ze.prototype,"activeBasemap",void 0),(0,s._)([(0,c.Cb)()],Ze.prototype,"disabled",void 0),(0,s._)([(0,c.Cb)()],Ze.prototype,"headingLevel",void 0),(0,s._)([(0,c.Cb)()],Ze.prototype,"iconClass",void 0),(0,s._)([(0,c.Cb)({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Ze.prototype,"label",void 0),(0,s._)([(0,c.Cb)(),(0,ke.H)("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Ze.prototype,"messages",void 0),(0,s._)([(0,o.B)("viewModel.source")],Ze.prototype,"source",void 0),(0,s._)([(0,o.B)("viewModel.view")],Ze.prototype,"view",void 0),(0,s._)([(0,c.Cb)()],Ze.prototype,"viewModel",void 0),(0,s._)([(0,_e.h)()],Ze.prototype,"_handleClick",null),Ze=(0,s._)([(0,p.j)("esri.widgets.BasemapGallery")],Ze);const Be=Ze},76243:(e,t,i)=>{i.d(t,{Z:()=>h});var s=i(27366),a=i(29479),n=i(85015),r=i(40281),o=i(49861),l=(i(63780),i(93169),i(25243),i(69912));const c=r.Z.ofType(a.default);let p=class extends n.Z{constructor(e){super(e),this.basemaps=new c}get state(){return"ready"}refresh(){}};(0,s._)([(0,o.Cb)({type:c})],p.prototype,"basemaps",void 0),(0,s._)([(0,o.Cb)({readOnly:!0})],p.prototype,"state",null),p=(0,s._)([(0,l.j)("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],p);const h=p},97862:(e,t,i)=>{i.d(t,{Z:()=>_});var s=i(27366),a=i(29479),n=i(40281),r=i(10064),o=i(100),l=i(54472),c=i(32718),p=i(67426),h=i(66978),m=i(94172),u=i(49861),d=(i(63780),i(93169),i(25243),i(69912)),f=i(70032),g=i(76243);const b=n.Z.ofType(a.default),y="esri.widgets.BasemapGallery.support.PortalBasemapsSource",v=c.Z.getLogger(y);let w=class extends(l.Z.LoadableMixin((0,p.v)(g.Z))){constructor(e){super(e),this._handles=new o.Z,this.basemaps=new b,this.filterFunction=null,this.portal=f.Z.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([(0,m.YP)((()=>[this.filterFunction,this.loadStatus,this.portal?.basemapGalleryGroupQuery,this.portal?.user,this.query,this.updateBasemapsCallback]),(()=>this.refresh()),m.nn)])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return"not-loaded"===this.loadStatus?"not-loaded":"loading"===this.loadStatus||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if("ready"!==this.state)return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const i=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(i)}catch(i){if((0,h.D_)(i))throw i;v.warn(new r.Z("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:i})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&"string"!=typeof e?Object.keys(e).map((t=>`${t}:${e[t]}`)).join(" AND "):e}_updateBasemaps(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};(0,s._)([(0,u.Cb)({readOnly:!0,type:b})],w.prototype,"basemaps",void 0),(0,s._)([(0,u.Cb)()],w.prototype,"filterFunction",void 0),(0,s._)([(0,u.Cb)({type:f.Z})],w.prototype,"portal",void 0),(0,s._)([(0,u.Cb)()],w.prototype,"query",void 0),(0,s._)([(0,u.Cb)({readOnly:!0})],w.prototype,"state",null),(0,s._)([(0,u.Cb)()],w.prototype,"updateBasemapsCallback",void 0),w=(0,s._)([(0,d.j)(y)],w);const _=w}}]);
//# sourceMappingURL=2725.d44835db.chunk.js.map