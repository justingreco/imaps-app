{"version":3,"file":"static/js/2112.1bb7dd63.chunk.js","mappings":"gOAKA,IAAIA,EACAC,EAoCJ,MAAMC,EAAa,CAACC,EAAsBC,KACxCJ,EAAmBG,EAAKE,MAAM,cAAc,KACtCF,EAAKG,YACPF,EAASG,KACP,CAAEC,OAAQL,EAAKM,OAAOC,OAAQC,KAAMR,EAAKQ,KAAO,GAChD,CAAEC,OAAQ,YAEb,IAGHT,EAAKU,IAAIR,MAAM,WAAWS,GAAWV,EAASS,IAAIC,QAAUA,IAC5Db,EAAeE,EAAKE,MAAM,UAAU,KAClCD,EAASW,SAASC,YAClBZ,EAASW,SAASE,IAChB,IAAIC,EAAAA,EAAQ,CACVC,SAAUhB,EAAKM,OACfW,OAAQ,IAAIC,EAAAA,EAAiB,CAC3BC,MAAO,CAAC,EAAG,EAAG,EAAG,KACjBC,MAAO,QACPC,QAAS,CACPC,MAAO,EACPH,MAAO,CAAC,IAAK,IAAK,IAAK,SAK1BI,EAAeC,WAAWvB,EAASK,OAAQN,EAAKM,SACnDL,EAASG,KACP,CAAEC,OAAQL,EAAKM,OAAOC,OAAQC,KAAMR,EAAKQ,KAAO,GAChD,CAAEC,OAAQ,YAEb,GApBH,EAwBIgB,EAAqBxB,IACzBA,EAASyB,GAAG,YAAaC,IACvB,MACMC,EAAaD,EAAME,KACmB,IAFrB,CAAC,IAAK,IAAK,QAAS,IAAK,KAE7BC,QAAQF,IACzBD,EAAMI,iBACP,IAEH9B,EAASyB,GAAG,eAAgBC,IAC1BA,EAAMI,iBAAN,IAEF9B,EAASyB,GAAG,gBAAiBC,IAC3BA,EAAMI,iBAAN,IAEF9B,EAASyB,GAAG,eAAgB,CAAC,YAAaC,IACxCA,EAAMI,iBAAN,IAEF9B,EAASyB,GAAG,QAASC,IACnBA,EAAMI,iBAAN,IAEF9B,EAASyB,GAAG,OAAQ,CAAC,UAAWC,IAC9BA,EAAMI,iBAAN,IAGF9B,EAASyB,GAAG,OAAQ,CAAC,QAAS,YAAaC,IACzCA,EAAMI,iBAAN,GADF,EChFF,EAhBqBC,IACjB,MAAMC,GAAMC,EAAAA,EAAAA,UACNC,GAASD,EAAAA,EAAAA,SAAO,GACtB,IAAIjC,EAUJ,OATAmC,EAAAA,EAAAA,YAAU,MACHD,EAAOE,SAAWL,EAAKhC,OAC1BmC,EAAOE,SAAU,EACjBpC,EDLD,SAA4BgC,EAAqBjC,GACtD,MAAMU,EAAM,IAAI4B,EAAAA,EAAI,CAClB3B,QAASX,EAAKU,IAAIC,UAEdV,EAAW,IAAIsC,EAAAA,EAAQ,CAC3B7B,IAAKA,EACL8B,UAAWP,EACXQ,WAAY,CACVC,uBAAuB,EACvBC,wBAAwB,EACxBC,iBAAiB,KAsBrB,OAnBA3C,EAAS4C,GAAGC,OAAO,QACnB7C,EAAS4C,GAAGC,OAAO,eAEnB9C,EAAK+C,MAAK,KACR9C,EAASK,OAASN,EAAKM,OAAO0C,QAAQC,OAAO,GAC7ClD,EAAWC,EAAMC,GAEFD,EAAK6C,GAAGK,KAAK,YACFhD,MAAM,YAAaiD,IAC3B,IAAD,IAAVA,EAIHpD,EAAWC,EAAMC,IAHD,QAAhB,EAAAJ,SAAA,SAAkBiD,SACN,QAAZ,EAAAhD,SAAA,SAAcgD,SAGf,GANH,IASFrB,EAAkBxB,GAEXA,CACR,CC5BkBmD,CAAmBnB,EAAII,QAASL,EAAKhC,OAE3C,KACLC,GAAYA,EAASoD,SAArB,IAED,IACI,CAACpB,MAAR,E,eCdJ,SAASqB,EAAStB,GAChB,MAAM,IAAEC,GAAQsB,EAAYvB,GAE5B,OAAO,gBAAKwB,GAAG,eAAevB,IAAKA,GACpC,CAED,QAAewB,EAAAA,KAAWH,E","sources":["components/WebMap/utils/overview.ts","components/WebMap/utils/useOverview.ts","components/WebMap/Overview.tsx"],"sourcesContent":["import MapView from \"@arcgis/core/views/MapView\";\nimport Map from \"@arcgis/core/Map\";\nimport Graphic from \"@arcgis/core/Graphic\";\nimport SimpleFillSymbol from \"@arcgis/core/symbols/SimpleFillSymbol\";\nimport * as geometryEngine from \"@arcgis/core/geometry/geometryEngine\";\nlet stationaryHandle: __esri.WatchHandle;\nlet extentHandle: __esri.WatchHandle;\nexport function initializeOverview(ref: HTMLDivElement, view: MapView) {\n  const map = new Map({\n    basemap: view.map.basemap,\n  });\n  const overview = new MapView({\n    map: map,\n    container: ref,\n    navigation: {\n      mouseWheelZoomEnabled: false,\n      browserTouchPanEnabled: false,\n      momentumEnabled: false,\n    },\n  });\n  overview.ui.remove(\"zoom\");\n  overview.ui.remove(\"attribution\");\n\n  view.when(() => {\n    overview.extent = view.extent.clone().expand(2);\n    addWatches(view, overview);\n\n    const expand = view.ui.find(\"overview\");\n    (expand as __esri.Expand).watch(\"expanded\", (expanded: boolean) => {\n      if (!expanded) {\n        stationaryHandle?.remove();\n        extentHandle?.remove();\n      } else {\n        addWatches(view, overview);\n      }\n    });\n  });\n  disableNavigation(overview);\n\n  return overview;\n}\n\nconst addWatches = (view: __esri.MapView, overview: __esri.MapView) => {\n  stationaryHandle = view.watch(\"stationary\", () => {\n    if (view.stationary) {\n      overview.goTo(\n        { target: view.extent.center, zoom: view.zoom - 4 },\n        { easing: \"ease-out\" }\n      );\n    }\n  });\n\n  view.map.watch('basemap', basemap => overview.map.basemap = basemap);\n  extentHandle = view.watch(\"extent\", () => {\n    overview.graphics.removeAll();\n    overview.graphics.add(\n      new Graphic({\n        geometry: view.extent,\n        symbol: new SimpleFillSymbol({\n          color: [0, 0, 0, 0.25],\n          style: \"solid\",\n          outline: {\n            width: 1,\n            color: [255, 255, 255, 1],\n          },\n        }),\n      })\n    );\n    if (!geometryEngine.intersects(overview.extent, view.extent)) {\n      overview.goTo(\n        { target: view.extent.center, zoom: view.zoom - 4 },\n        { easing: \"ease-out\" }\n      );\n    }\n  });\n};\n\nconst disableNavigation = (overview: __esri.MapView) => {\n  overview.on(\"key-down\", (event) => {\n    const prohibitedKeys = [\"+\", \"-\", \"Shift\", \"_\", \"=\"];\n    const keyPressed = event.key;\n    if (prohibitedKeys.indexOf(keyPressed) !== -1) {\n      event.stopPropagation();\n    }\n  });\n  overview.on(\"mouse-wheel\", (event) => {\n    event.stopPropagation();\n  });\n  overview.on(\"double-click\", (event) => {\n    event.stopPropagation();\n  });\n  overview.on(\"double-click\", [\"Control\"], (event) => {\n    event.stopPropagation();\n  });\n  overview.on(\"drag\", (event) => {\n    event.stopPropagation();\n  });\n  overview.on(\"drag\", [\"Shift\"], (event) => {\n    event.stopPropagation();\n  });\n\n  overview.on(\"drag\", [\"Shift\", \"Control\"], (event) => {\n    event.stopPropagation();\n  });\n};\n","import { useEffect, useRef } from \"react\";\nimport MapView from \"@arcgis/core/views/MapView\";\n\nimport { initializeOverview } from \"../utils/overview\";\n  \nconst useOverview = (args: any) => {\n    const ref = useRef() as any;\n    const loaded = useRef(false);\n    let overview: MapView;\n    useEffect(() => {\n      if (!loaded.current && args.view) {\n        loaded.current = true;\n        overview = initializeOverview(ref.current, args.view);\n      }\n      return () => {\n        overview && overview.destroy();\n      };\n    }, []);\n    return {ref}\n};\n\nexport default useOverview;","import React from \"react\";\n\nimport \"./WebMap.css\";\nimport useOverview from \"./utils/useOverview\";\nfunction Overview(args: any) {\n  const { ref } = useOverview(args)\n\n  return <div id=\"overview-map\" ref={ref}></div>;\n}\n\nexport default React.memo(Overview);\n"],"names":["stationaryHandle","extentHandle","addWatches","view","overview","watch","stationary","goTo","target","extent","center","zoom","easing","map","basemap","graphics","removeAll","add","Graphic","geometry","symbol","SimpleFillSymbol","color","style","outline","width","geometryEngine","intersects","disableNavigation","on","event","keyPressed","key","indexOf","stopPropagation","args","ref","useRef","loaded","useEffect","current","Map","MapView","container","navigation","mouseWheelZoomEnabled","browserTouchPanEnabled","momentumEnabled","ui","remove","when","clone","expand","find","expanded","initializeOverview","destroy","Overview","useOverview","id","React"],"sourceRoot":""}